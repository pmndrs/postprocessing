function _typeof2(e){return _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof2(e)}(function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},t(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function r(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return t&&("object"===_typeof2(t)||"function"==typeof t)?t:d(e)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=s(e),null!==e););return e}function p(e,t,a){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=g(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(a):o.value}},p(e,t,a||e)}function f(e){return A(e)||h(e)||C()}function A(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function h(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function C(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function k(e,t){var n=e.__state.conversionName.toString(),o=Fe(e.r),r=Fe(e.g),i=Fe(e.b),l=e.a,a=Fe(e.h),d=e.s.toFixed(1),s=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);6>c.length;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+o+","+r+","+i+")":"CSS_RGBA"===n?"rgba("+o+","+r+","+i+","+l+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+r+","+i+"]":"RGBA_ARRAY"===n?"["+o+","+r+","+i+","+l+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+r+",b:"+i+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+r+",b:"+i+",a:"+l+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+d+",v:"+s+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+d+",v:"+s+",a:"+l+"}":"unknown format"}function E(e,t,a){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(Ze.recalculateRGB(this,t,a),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(Ze.recalculateRGB(this,t,a),this.__state.space="RGB"),this.__state[t]=e}})}function S(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(Ze.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(Ze.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}function B(e){if("0"===e||Ue.isUndefined(e))return 0;var t=e.match(tt);return Ue.isNull(t)?0:parseFloat(t[1])}function D(e){var t=e.toString();return-1<t.indexOf(".")?t.length-t.indexOf(".")-1:0}function w(e,t){var a=Pe(10,t);return Fe(e*a)/a}function P(e,t,a,n,o){return n+(o-n)*((e-t)/(a-t))}function M(e,t,n,a){e.style.background="",Ue.each(ut,function(o){e.style.cssText+="background: "+o+"linear-gradient("+t+", "+n+" 0%, "+a+" 100%); "})}function T(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}function L(e,t,a){var n=document.createElement("li");return t&&n.appendChild(t),a?e.__ul.insertBefore(n,a):e.__ul.appendChild(n),e.onResize(),n}function F(e){at.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&at.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function I(e,t){var a=e.__preset_select[e.__preset_select.selectedIndex];a.innerHTML=t?a.value+"*":a.value}function R(e,t,a){if(a.__li=t,a.__gui=e,Ue.extend(a,{options:function(t){if(1<arguments.length){var n=a.__li.nextElementSibling;return a.remove(),G(e,a.object,a.property,{before:n,factoryArgs:[Ue.toArray(arguments)]})}if(Ue.isArray(t)||Ue.isObject(t)){var o=a.__li.nextElementSibling;return a.remove(),G(e,a.object,a.property,{before:o,factoryArgs:[t]})}},name:function(e){return a.__li.firstElementChild.firstElementChild.innerHTML=e,a},listen:function(){return a.__gui.listen(a),a},remove:function(){return a.__gui.remove(a),a}}),a instanceof lt){var n=new st(a.object,a.property,{min:a.__min,max:a.__max,step:a.__step});Ue.each(["updateDisplay","onChange","onFinishChange","step"],function(e){var t=a[e],o=n[e];a[e]=n[e]=function(){var e=Array.prototype.slice.call(arguments);return o.apply(n,e),t.apply(a,e)}}),at.addClass(t,"has-slider"),a.domElement.insertBefore(n.domElement,a.domElement.firstElementChild)}else if(a instanceof st){var o=function(t){if(Ue.isNumber(a.__min)&&Ue.isNumber(a.__max)){var n=a.__li.firstElementChild.firstElementChild.innerHTML,o=-1<a.__gui.__listening.indexOf(a);a.remove();var r=G(e,a.object,a.property,{before:a.__li.nextElementSibling,factoryArgs:[a.__min,a.__max,a.__step]});return r.name(n),o&&r.listen(),r}return t};a.min=Ue.compose(o,a.min),a.max=Ue.compose(o,a.max)}else a instanceof nt?(at.bind(t,"click",function(){at.fakeEvent(a.__checkbox,"click")}),at.bind(a.__checkbox,"click",function(t){t.stopPropagation()})):a instanceof dt?(at.bind(t,"click",function(){at.fakeEvent(a.__button,"click")}),at.bind(t,"mouseover",function(){at.addClass(a.__button,"hover")}),at.bind(t,"mouseout",function(){at.removeClass(a.__button,"hover")})):a instanceof ct&&(at.addClass(t,"color"),a.updateDisplay=Ue.compose(function(e){return t.style.borderLeftColor=a.__color.toString(),e},a.updateDisplay),a.updateDisplay());a.setValue=Ue.compose(function(t){return e.getRoot().__preset_select&&a.isModified()&&I(e.getRoot(),!0),t},a.setValue)}function O(e,t){var a=e.getRoot(),n=a.__rememberedObjects.indexOf(t.object);if(-1!==n){var o=a.__rememberedObjectIndecesToControllers[n];if(void 0===o&&(o={},a.__rememberedObjectIndecesToControllers[n]=o),o[t.property]=t,a.load&&a.load.remembered){var r=a.load.remembered,i=void 0;if(r[e.preset])i=r[e.preset];else if(r.Default)i=r.Default;else return;if(i[n]&&void 0!==i[n][t.property]){var s=i[n][t.property];t.initialValue=s,t.setValue(s)}}}}function G(e,t,a,n){if(void 0===t[a])throw new Error("Object \""+t+"\" has no property \""+a+"\"");var o;if(n.color)o=new ct(t,a);else{var r=[t,a].concat(n.factoryArgs);o=gt.apply(e,r)}n.before instanceof $e&&(n.before=n.before.__li),O(e,o),at.addClass(o.domElement,"c");var i=document.createElement("span");at.addClass(i,"property-name"),i.innerHTML=o.property;var s=document.createElement("div");s.appendChild(i),s.appendChild(o.domElement);var l=L(e,s,n.before);return at.addClass(l,St.CLASS_CONTROLLER_ROW),o instanceof ct?at.addClass(l,"color"):at.addClass(l,Xe(o.getValue())),R(e,l,o),e.__controllers.push(o),o}function U(e,t){return document.location.href+"."+t}function _(e,t,a){var n=document.createElement("option");n.innerHTML=t,n.value=t,e.__preset_select.appendChild(n),a&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function H(e,t){t.style.display=e.useLocalStorage?"block":"none"}function Q(e){var t=e.__save_row=document.createElement("li");at.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),at.addClass(t,"save-row");var a=document.createElement("span");a.innerHTML="&nbsp;",at.addClass(a,"button gears");var n=document.createElement("span");n.innerHTML="Save",at.addClass(n,"button"),at.addClass(n,"save");var o=document.createElement("span");o.innerHTML="New",at.addClass(o,"button"),at.addClass(o,"save-as");var r=document.createElement("span");r.innerHTML="Revert",at.addClass(r,"button"),at.addClass(r,"revert");var i=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?Ue.each(e.load.remembered,function(t,a){_(e,a,a===e.preset)}):_(e,"Default",!1),at.bind(i,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(i),t.appendChild(a),t.appendChild(n),t.appendChild(o),t.appendChild(r),xt){var s=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage"),d=document.getElementById("dg-save-locally");d.style.display="block","true"===localStorage.getItem(U(e,"isLocal"))&&l.setAttribute("checked","checked"),H(e,s),at.bind(l,"change",function(){e.useLocalStorage=!e.useLocalStorage,H(e,s)})}var c=document.getElementById("dg-new-constructor");at.bind(c,"keydown",function(t){t.metaKey&&(67===t.which||67===t.keyCode)&&ht.hide()}),at.bind(a,"click",function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),ht.show(),c.focus(),c.select()}),at.bind(n,"click",function(){e.save()}),at.bind(o,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),at.bind(r,"click",function(){e.revert()})}function V(t){function a(a){return a.preventDefault(),t.width+=o-a.clientX,t.onResize(),o=a.clientX,!1}function n(){at.removeClass(t.__closeButton,St.CLASS_DRAG),at.unbind(window,"mousemove",a),at.unbind(window,"mouseup",n)}function e(r){return r.preventDefault(),o=r.clientX,at.addClass(t.__closeButton,St.CLASS_DRAG),at.bind(window,"mousemove",a),at.bind(window,"mouseup",n),!1}var o;t.__resize_handle=document.createElement("div"),Ue.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),at.bind(t.__resize_handle,"mousedown",e),at.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function N(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function Y(e,t){var a={};return Ue.each(e.__rememberedObjects,function(n,o){var r={},i=e.__rememberedObjectIndecesToControllers[o];Ue.each(i,function(e,a){r[a]=t?e.initialValue:e.getValue()}),a[o]=r}),a}function X(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function W(e){0!==e.length&&mt.call(window,function(){W(e)}),Ue.each(e,function(e){e.updateDisplay()})}function j(e,t){for(var a=[],n;null!==(n=e.exec(t));)a.push(n[1]);return a}function K(e,t,a){var n=!0,o=!1,r=void 0,i,s;try{for(var l=t[Symbol.iterator](),d,c;!(n=(d=l.next()).done);n=!0){c=d.value,i="$1"+e+c.charAt(0).toUpperCase()+c.slice(1),s=new RegExp("([^\\.])(\\b"+c+"\\b)","g");var u=!0,g=!1,m=void 0;try{for(var p=a.entries()[Symbol.iterator](),f,y;!(u=(f=p.next()).done);u=!0)y=f.value,null!==y[1]&&a.set(y[0],y[1].replace(s,i))}catch(e){g=!0,m=e}finally{try{u||null==p.return||p.return()}finally{if(g)throw m}}}}catch(e){o=!0,r=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw r}}}function J(e,t,a,n,o,r,i){var s=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,l=/(?:varying\s+\w+\s+(\w*))/g,d=t.blendMode,c=new Map([["fragment",t.fragmentShader],["vertex",t.vertexShader]]),u=c.get("fragment")!==void 0&&0<=c.get("fragment").indexOf("mainImage"),g=c.get("fragment")!==void 0&&0<=c.get("fragment").indexOf("mainUv"),m=[],p=[],f=!1;if(c.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(g&&0!=(i&ta.CONVOLUTION))console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!u&&!g)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{if(g&&(a.set(Ht.FRAGMENT_MAIN_UV,a.get(Ht.FRAGMENT_MAIN_UV)+"\t"+e+"MainUv(UV);\n"),f=!0),null!==c.get("vertex")&&0<=c.get("vertex").indexOf("mainSupport")&&(a.set(Ht.VERTEX_MAIN_SUPPORT,a.get(Ht.VERTEX_MAIN_SUPPORT)+"\t"+e+"MainSupport();\n"),m=m.concat(j(l,c.get("vertex"))),p=p.concat(m).concat(j(s,c.get("vertex")))),p=p.concat(j(s,c.get("fragment"))).concat(Array.from(t.uniforms.keys())).concat(Array.from(t.defines.keys())),t.uniforms.forEach(function(t,a){return r.set(e+a.charAt(0).toUpperCase()+a.slice(1),t)}),t.defines.forEach(function(t,a){return o.set(e+a.charAt(0).toUpperCase()+a.slice(1),t)}),K(e,p,o),K(e,p,c),n.set(d.blendFunction,d),u){var y=e+"MainImage(color0, UV, ";0!=(t.attributes&ta.DEPTH)&&(y+="depth, "),y+="color1);\n\t";var v=e+"BlendOpacity";r.set(v,d.opacity),y+="color0 = blend"+d.blendFunction+"(color0, color1, "+v+");\n\n\t",a.set(Ht.FRAGMENT_MAIN_IMAGE,a.get(Ht.FRAGMENT_MAIN_IMAGE)+y),a.set(Ht.FRAGMENT_HEAD,a.get(Ht.FRAGMENT_HEAD)+"uniform float "+v+";\n\n")}a.set(Ht.FRAGMENT_HEAD,a.get(Ht.FRAGMENT_HEAD)+c.get("fragment")+"\n"),null!==c.get("vertex")&&a.set(Ht.VERTEX_HEAD,a.get(Ht.VERTEX_HEAD)+c.get("vertex")+"\n")}return{varyings:m,transformedUv:f}}function Z(e,t){return e+Math.random()*(t-e)}function $(e,t,a,n){var o=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=o.getContext("2d"),s=r.createImageData(e,t),l=s.data,d,c,u,g;for(c=0;c<t;++c)for(d=0;d<e;++d)u=4*(c*e+d),g=(c*e+d)*n,l[u]=0<n?a[g]:0,l[u+1]=1<n?a[g+1]:0,l[u+2]=2<n?a[g+2]:0,l[u+3]=3<n?a[g+3]:255;return o.width=e,o.height=t,r.putImageData(s,0,0),o}function ee(e,t,a){return e+(t-e)*a}function te(e){return ze(Te(e,0),1)}function ae(e,t){var a=t.min,n=t.max,o=.5*be(2*a.x),r=.5*be(2*a.y),i=.5*be(2*n.x),s=.5*be(2*n.y),l=te(e/32);return a.set(ee(o,a.x,l),ee(r,a.y,l)),n.set(ee(i,n.x,l),ee(s,n.y,l)),t}function ne(e,n,o,r){var i=Math.trunc,s=n.x-e.x,l=n.y-e.y,d=o,c=o+1,u=e.y+l*(d-e.x)/s,g=e.y+l*(c-e.x)/s,m,p,f,y;return d>=e.x&&d<n.x||c>e.x&&c<=n.x?Ce(u)===Ce(g)||1e-4>Me(u)||1e-4>Me(g)?(m=(u+g)/2,0>m?r.set(Me(m),0):r.set(0,Me(m))):(y=-e.y*s/l+e.x,p=y>e.x?u*(y-i(y))/2:0,f=y<n.x?g*(1-(y-i(y)))/2:0,m=Me(p)>Me(f)?p:-f,0>m?r.set(Me(p),Me(f)):r.set(Me(f),Me(p))):r.set(0,0),r}function oe(e,t,n,o,r){var i=Ga.min,s=Ga.max,l=Ua.min,c=Ua.max,u=Ua,a=.5+o,g=.5+o-1,m=t+n+1;switch(e){case 0:{r.set(0,0);break}case 1:{t<=n?ne(i.set(0,g),s.set(m/2,0),t,r):r.set(0,0);break}case 2:{t>=n?ne(i.set(m/2,0),s.set(m,g),t,r):r.set(0,0);break}case 3:{ne(i.set(0,g),s.set(m/2,0),t,l),ne(i.set(m/2,0),s.set(m,g),t,c),ae(m,u),r.addVectors(l,c);break}case 4:{t<=n?ne(i.set(0,a),s.set(m/2,0),t,r):r.set(0,0);break}case 5:{r.set(0,0);break}case 6:{0<Me(o)?(ne(i.set(0,a),s.set(m,g),t,l),ne(i.set(0,a),s.set(m/2,0),t,c),c.add(ne(i.set(m/2,0),s.set(m,g),t,r)),r.addVectors(l,c).divideScalar(2)):ne(i.set(0,a),s.set(m,g),t,r);break}case 7:{ne(i.set(0,a),s.set(m,g),t,r);break}case 8:{t>=n?ne(i.set(m/2,0),s.set(m,a),t,r):r.set(0,0);break}case 9:{0<Me(o)?(ne(i.set(0,g),s.set(m,a),t,l),ne(i.set(0,g),s.set(m/2,0),t,c),c.add(ne(i.set(m/2,0),s.set(m,a),t,r)),r.addVectors(l,c).divideScalar(2)):ne(i.set(0,g),s.set(m,a),t,r);break}case 10:{r.set(0,0);break}case 11:{ne(i.set(0,g),s.set(m,a),t,r);break}case 12:{ne(i.set(0,a),s.set(m/2,0),t,l),ne(i.set(m/2,0),s.set(m,a),t,c),ae(m,u),r.addVectors(l,c);break}case 13:{ne(i.set(0,g),s.set(m,a),t,r);break}case 14:{ne(i.set(0,a),s.set(m,g),t,r);break}case 15:{r.set(0,0);break}}return r}function re(e,t,n,o){var r=e.equals(t),i,s,l,d,u;return r||(i=(e.x+t.x)/2,s=(e.y+t.y)/2,l=t.y-e.y,d=e.x-t.x,u=l*(n-i)+d*(o-s),r=0<u),r}function ie(e,t,n,o){var r,i,s,l,d;for(r=0,s=0;s<30;++s)for(i=0;i<30;++i)l=i/29,d=s/29,re(e,t,n+l,o+d)&&++r;return r/900}function se(t,a,n,o,r,i){var s=Ya[t],e=s[0],l=s[1];return 0<e&&(a.x+=r[0],a.y+=r[1]),0<l&&(n.x+=r[0],n.y+=r[1]),i.set(1-ie(a,n,1+o,0+o),ie(a,n,1+o,1+o))}function le(e,t,a,n,o){var r=Ga.min,i=Ga.max,s=Ua.min,l=Ua.max,c=t+a+1;switch(e){case 0:{se(e,r.set(1,1),i.set(1+c,1+c),t,n,s),se(e,r.set(1,0),i.set(1+c,0+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}case 1:{se(e,r.set(1,0),i.set(0+c,0+c),t,n,s),se(e,r.set(1,0),i.set(1+c,0+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}case 2:{se(e,r.set(0,0),i.set(1+c,0+c),t,n,s),se(e,r.set(1,0),i.set(1+c,0+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}case 3:{se(e,r.set(1,0),i.set(1+c,0+c),t,n,o);break}case 4:{se(e,r.set(1,1),i.set(0+c,0+c),t,n,s),se(e,r.set(1,1),i.set(1+c,0+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}case 5:{se(e,r.set(1,1),i.set(0+c,0+c),t,n,s),se(e,r.set(1,0),i.set(1+c,0+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}case 6:{se(e,r.set(1,1),i.set(1+c,0+c),t,n,o);break}case 7:{se(e,r.set(1,1),i.set(1+c,0+c),t,n,s),se(e,r.set(1,0),i.set(1+c,0+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}case 8:{se(e,r.set(0,0),i.set(1+c,1+c),t,n,s),se(e,r.set(1,0),i.set(1+c,1+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}case 9:{se(e,r.set(1,0),i.set(1+c,1+c),t,n,o);break}case 10:{se(e,r.set(0,0),i.set(1+c,1+c),t,n,s),se(e,r.set(1,0),i.set(1+c,0+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}case 11:{se(e,r.set(1,0),i.set(1+c,1+c),t,n,s),se(e,r.set(1,0),i.set(1+c,0+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}case 12:{se(e,r.set(1,1),i.set(1+c,1+c),t,n,o);break}case 13:{se(e,r.set(1,1),i.set(1+c,1+c),t,n,s),se(e,r.set(1,0),i.set(1+c,1+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}case 14:{se(e,r.set(1,1),i.set(1+c,1+c),t,n,s),se(e,r.set(1,1),i.set(1+c,0+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}case 15:{se(e,r.set(1,1),i.set(1+c,1+c),t,n,s),se(e,r.set(1,0),i.set(1+c,0+c),t,n,l),o.addVectors(s,l).divideScalar(2);break}}return o}function de(t,a,n){var o=new e.Vector2,r,s,d,u,g,m,p,f;for(r=0,s=t.length;r<s;++r)for(m=t[r],p=m.data,f=m.width,u=0;u<f;++u)for(d=0;d<f;++d)n?oe(r,d,u,a,o):le(r,d,u,a,o),g=2*(u*f+d),p[g]=255*o.x,p[g+1]=255*o.y}function ce(t,a,n,o,r,s){var u=new e.Vector2,g=s.data,m=s.width,p,f,v,A,h,C,b,k,E,S;for(p=0,f=a.length;p<f;++p)for(b=n[p],k=a[p],E=k.data,S=k.width,A=0;A<o;++A)for(v=0;v<o;++v)u.fromArray(b).multiplyScalar(o),u.add(t),u.x+=v,u.y+=A,h=2*(u.y*m+u.x),C=r?2*(A*A*S+v*v):2*(A*S+v),g[h]=E[C],g[h+1]=E[C+1]}function ue(e,t,a){return e+(t-e)*a}function ge(t){var e=ue(t[0],t[1],1-.25),a=ue(t[2],t[3],1-.25);return ue(e,a,1-.125)}function me(e,t){var a=0;return 1===t[3]&&(a+=1),1==a&&1===t[2]&&1!==e[1]&&1!==e[3]&&(a+=1),a}function pe(e,t){var a=0;return 1===t[3]&&1!==e[1]&&1!==e[3]&&(a+=1),1==a&&1===t[2]&&1!==e[0]&&1!==e[2]&&(a+=1),a}function fe(e,t,a){return Te(ze(e,a),t)}function ye(e){requestAnimationFrame(ye),vo.render(e)}function ve(e){var t=e.demo,a=yo.renderer.getSize();fo.setSize(a.width,a.height),yo.replaceRenderer(fo),yo.reset(),yo.addPass(t.renderPass),document.getElementById("viewport").children[0].style.display="initial"}function Ae(e){e.demo.renderPass.camera=e.demo.camera,document.getElementById("viewport").children[0].style.display="none"}var xe=Math.atan2,he=Math.acos,Ce=Math.sign,be=Math.sqrt,ke=Math.ceil,Ee=Math.log2,Se=Math.cos,Be=Math.sin,De=Math.PI,we=Number.parseInt,Pe=Math.pow,Me=Math.abs,Te=Math.max,ze=Math.min,Le=Math.floor,Fe=Math.round,Ie=function(){function t(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"demo";n(this,t),this.id=a,this.renderer=null,this.loadingManager=new e.LoadingManager,this.assets=new Map,this.scene=new e.Scene,this.camera=null,this.controls=null,this.ready=!1}return r(t,[{key:"setRenderer",value:function(e){return this.renderer=e,this}},{key:"load",value:function(){return Promise.resolve()}},{key:"initialize",value:function(){}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"registerOptions",value:function(){}},{key:"reset",value:function(){var t=this.scene.fog;return this.scene=new e.Scene,this.scene.fog=t,this.camera=null,null!==this.controls&&(this.controls.dispose(),this.controls=null),this.ready=!1,this}}]),t}(),Re=function(){function e(){n(this,e),this.listenerFunctions=new Map,this.listenerObjects=new Map}return r(e,[{key:"addEventListener",value:function(e,t){var a="function"==typeof t?this.listenerFunctions:this.listenerObjects;a.has(e)?a.get(e).add(t):a.set(e,new Set([t]))}},{key:"removeEventListener",value:function(e,t){var a="function"==typeof t?this.listenerFunctions:this.listenerObjects,n;a.has(e)&&(n=a.get(e),n.delete(t),0===n.size&&a.delete(e))}},{key:"dispatchEvent",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this,a=t.listenerFunctions,n=t.listenerObjects,o,r;if(e.target=t,a.has(e.type)){o=a.get(e.type);var i=!0,s=!1,l=void 0;try{for(var d=o[Symbol.iterator](),c;!(i=(c=d.next()).done);i=!0)r=c.value,r.call(t,e)}catch(e){s=!0,l=e}finally{try{i||null==d.return||d.return()}finally{if(s)throw l}}}if(n.has(e.type)){o=n.get(e.type);var u=!0,g=!1,m=void 0;try{for(var p=o[Symbol.iterator](),f;!(u=(f=p.next()).done);u=!0)r=f.value,r.handleEvent(e)}catch(e){g=!0,m=e}finally{try{u||null==p.return||p.return()}finally{if(g)throw m}}}}}]),e}(),Oe=Array.prototype.forEach,Ge=Array.prototype.slice,Ue={BREAK:{},extend:function(e){return this.each(Ge.call(arguments,1),function(t){var a=this.isObject(t)?Object.keys(t):[];a.forEach(function(a){this.isUndefined(t[a])||(e[a]=t[a])}.bind(this))},this),e},defaults:function(e){return this.each(Ge.call(arguments,1),function(t){var a=this.isObject(t)?Object.keys(t):[];a.forEach(function(a){this.isUndefined(e[a])&&(e[a]=t[a])}.bind(this))},this),e},compose:function(){var e=Ge.call(arguments);return function(){for(var t=Ge.call(arguments),a=e.length-1;0<=a;a--)t=[e[a].apply(this,t)];return t[0]}},each:function(e,t,a){if(e)if(Oe&&e.forEach&&e.forEach===Oe)e.forEach(t,a);else if(e.length===e.length+0){var n=void 0,o=void 0;for(n=0,o=e.length;n<o;n++)if(n in e&&t.call(a,e[n],n)===this.BREAK)return}else for(var r in e)if(t.call(a,e[r],r)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,a){var n;return function(){var o=this,r=arguments,i=a||!n;clearTimeout(n),n=setTimeout(function(){n=null,a||e.apply(o,r)},t),i&&e.apply(o,r)}},toArray:function(e){return e.toArray?e.toArray():Ge.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},_e=[{litmus:Ue.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:k},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:k},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:k},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:k}}},{litmus:Ue.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:Ue.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:Ue.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(Ue.isNumber(e.r)&&Ue.isNumber(e.g)&&Ue.isNumber(e.b)&&Ue.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(Ue.isNumber(e.r)&&Ue.isNumber(e.g)&&Ue.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(Ue.isNumber(e.h)&&Ue.isNumber(e.s)&&Ue.isNumber(e.v)&&Ue.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(Ue.isNumber(e.h)&&Ue.isNumber(e.s)&&Ue.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],He=void 0,Qe=void 0,Ve=function(){Qe=!1;var e=1<arguments.length?Ue.toArray(arguments):arguments[0];return Ue.each(_e,function(t){if(t.litmus(e))return Ue.each(t.conversions,function(t,a){if(He=t.read(e),!1===Qe&&!1!==He)return Qe=He,He.conversionName=a,He.conversion=t,Ue.BREAK}),Ue.BREAK}),Qe},Ne=void 0,Ye={hsv_to_rgb:function(e,a,n){var o=Le(e/60)%6,r=e/60-Le(e/60),i=n*(1-a),s=n*(1-r*a),l=n*(1-(1-r)*a),t=[[n,l,i],[s,n,i],[i,n,l],[i,s,n],[l,i,n],[n,i,s]][o];return{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(e,t,a){var n=ze(e,t,a),o=Te(e,t,a),r=o-n,i=void 0,l=void 0;if(0!==o)l=r/o;else return{h:NaN,s:0,v:0};return i=e===o?(t-a)/r:t===o?2+(a-e)/r:4+(e-t)/r,i/=6,0>i&&(i+=1),{h:360*i,s:l,v:o/255}},rgb_to_hex:function(e,t,a){var n=this.hex_with_component(0,2,e);return n=this.hex_with_component(n,1,t),n=this.hex_with_component(n,0,a),n},component_from_hex:function(e,t){return 255&e>>8*t},hex_with_component:function(e,t,a){return a<<(Ne=8*t)|e&~(255<<Ne)}},Xe="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},We=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},je=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Ke=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,n)}if("value"in o)return o.value;var i=o.get;return void 0===i?void 0:i.call(n)},Je=function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+t(a));e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)},qe=function(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"===t(a)||"function"==typeof a)?a:e},Ze=function(){function e(){if(We(this,e),this.__state=Ve.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return je(e,[{key:"toString",value:function(){return k(this)}},{key:"toHexString",value:function(){return k(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();Ze.recalculateRGB=function(e,t,a){if("HEX"===e.__state.space)e.__state[t]=Ye.component_from_hex(e.__state.hex,a);else if("HSV"===e.__state.space)Ue.extend(e.__state,Ye.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v));else throw new Error("Corrupted color state")},Ze.recalculateHSV=function(e){var t=Ye.rgb_to_hsv(e.r,e.g,e.b);Ue.extend(e.__state,{s:t.s,v:t.v}),Ue.isNaN(t.h)?Ue.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},Ze.COMPONENTS=["r","g","b","h","s","v","hex","a"],E(Ze.prototype,"r",2),E(Ze.prototype,"g",1),E(Ze.prototype,"b",0),S(Ze.prototype,"h"),S(Ze.prototype,"s"),S(Ze.prototype,"v"),Object.defineProperty(Ze.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(Ze.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=Ye.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var $e=function(){function e(t,a){We(this,e),this.initialValue=t[a],this.domElement=document.createElement("div"),this.object=t,this.property=a,this.__onChange=void 0,this.__onFinishChange=void 0}return je(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),et={};Ue.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){Ue.each(e,function(a){et[a]=t})});var tt=/(\d+(\.\d+)?)px/,at={makeSelectable:function(e,t){void 0===e||void 0===e.style||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,a){var n=a,o=t;Ue.isUndefined(o)&&(o=!0),Ue.isUndefined(n)&&(n=!0),e.style.position="absolute",o&&(e.style.left=0,e.style.right=0),n&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,a,n){var o=a||{},r=et[t];if(!r)throw new Error("Event type "+t+" not supported.");var i=document.createEvent(r);switch(r){case"MouseEvents":{var s=o.x||o.clientX||0,l=o.y||o.clientY||0;i.initMouseEvent(t,o.bubbles||!1,o.cancelable||!0,window,o.clickCount||1,0,0,s,l,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var d=i.initKeyboardEvent||i.initKeyEvent;Ue.defaults(o,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(t,o.bubbles||!1,o.cancelable,window,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode);break}default:{i.initEvent(t,o.bubbles||!1,o.cancelable||!0);break}}Ue.defaults(i,n),e.dispatchEvent(i)},bind:function(e,t,a,n){return e.addEventListener?e.addEventListener(t,a,n||!1):e.attachEvent&&e.attachEvent("on"+t,a),at},unbind:function(e,t,a,n){return e.removeEventListener?e.removeEventListener(t,a,n||!1):e.detachEvent&&e.detachEvent("on"+t,a),at},addClass:function(e,t){if(e.className===void 0)e.className=t;else if(e.className!==t){var a=e.className.split(/ +/);-1===a.indexOf(t)&&(a.push(t),e.className=a.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return at},removeClass:function(e,t){if(!t)e.className=void 0;else if(e.className===t)e.removeAttribute("class");else{var a=e.className.split(/ +/),n=a.indexOf(t);-1!==n&&(a.splice(n,1),e.className=a.join(" "))}return at},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return B(t["border-left-width"])+B(t["border-right-width"])+B(t["padding-left"])+B(t["padding-right"])+B(t.width)},getHeight:function(e){var t=getComputedStyle(e);return B(t["border-top-width"])+B(t["border-bottom-width"])+B(t["padding-top"])+B(t["padding-bottom"])+B(t.height)},getOffset:function(e){var t=e,a={left:0,top:0};if(t.offsetParent)do a.left+=t.offsetLeft,a.top+=t.offsetTop,t=t.offsetParent;while(t);return a},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},nt=function(e){function t(e,a){We(this,t);var n=qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a)),o=n;return n.__prev=n.getValue(),n.__checkbox=document.createElement("input"),n.__checkbox.setAttribute("type","checkbox"),at.bind(n.__checkbox,"change",function(){o.setValue(!o.__prev)},!1),n.domElement.appendChild(n.__checkbox),n.updateDisplay(),n}return Je(t,e),je(t,[{key:"setValue",value:function(e){var a=Ke(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),a}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Ke(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}($e),ot=function(e){function t(e,a,n){We(this,t);var o=qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a)),r=n,i=o;if(o.__select=document.createElement("select"),Ue.isArray(r)){var s={};Ue.each(r,function(e){s[e]=e}),r=s}return Ue.each(r,function(e,t){var a=document.createElement("option");a.innerHTML=t,a.setAttribute("value",e),i.__select.appendChild(a)}),o.updateDisplay(),at.bind(o.__select,"change",function(){var e=this.options[this.selectedIndex].value;i.setValue(e)}),o.domElement.appendChild(o.__select),o}return Je(t,e),je(t,[{key:"setValue",value:function(e){var a=Ke(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),a}},{key:"updateDisplay",value:function(){return at.isActive(this.__select)?this:(this.__select.value=this.getValue(),Ke(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}($e),rt=function(e){function t(e,a){function n(){r.setValue(r.__input.value)}We(this,t);var o=qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a)),r=o;return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),at.bind(o.__input,"keyup",n),at.bind(o.__input,"change",n),at.bind(o.__input,"blur",function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}),at.bind(o.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return Je(t,e),je(t,[{key:"updateDisplay",value:function(){return at.isActive(this.__input)||(this.__input.value=this.getValue()),Ke(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}($e),it=function(e){function t(e,a,n){We(this,t);var o=qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a)),r=n||{};return o.__min=r.min,o.__max=r.max,o.__step=r.step,o.__impliedStep=Ue.isUndefined(o.__step)?0===o.initialValue?1:Pe(10,Le(Math.log(Me(o.initialValue))/Math.LN10))/10:o.__step,o.__precision=D(o.__impliedStep),o}return Je(t,e),je(t,[{key:"setValue",value:function(e){var a=e;return void 0!==this.__min&&a<this.__min?a=this.__min:void 0!==this.__max&&a>this.__max&&(a=this.__max),void 0!==this.__step&&0!=a%this.__step&&(a=Fe(a/this.__step)*this.__step),Ke(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,a)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=D(e),this}}]),t}($e),st=function(e){function t(e,a,n){function o(){l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}function r(t){var e=d-t.clientY;l.setValue(l.getValue()+e*l.__impliedStep),d=t.clientY}function i(){at.unbind(window,"mousemove",r),at.unbind(window,"mouseup",i),o()}We(this,t);var s=qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,n));s.__truncationSuspended=!1;var l=s,d=void 0;return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),at.bind(s.__input,"change",function(){var e=parseFloat(l.__input.value);Ue.isNaN(e)||l.setValue(e)}),at.bind(s.__input,"blur",function(){o()}),at.bind(s.__input,"mousedown",function(t){at.bind(window,"mousemove",r),at.bind(window,"mouseup",i),d=t.clientY}),at.bind(s.__input,"keydown",function(t){13===t.keyCode&&(l.__truncationSuspended=!0,this.blur(),l.__truncationSuspended=!1,o())}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return Je(t,e),je(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():w(this.getValue(),this.__precision),Ke(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(it),lt=function(e){function t(e,a,n,o,r){function i(t){t.preventDefault();var e=u.__background.getBoundingClientRect();return u.setValue(P(t.clientX,e.left,e.right,u.__min,u.__max)),!1}function s(){at.unbind(window,"mousemove",i),at.unbind(window,"mouseup",s),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}function l(t){var e=t.touches[0].clientX,a=u.__background.getBoundingClientRect();u.setValue(P(e,a.left,a.right,u.__min,u.__max))}function d(){at.unbind(window,"touchmove",l),at.unbind(window,"touchend",d),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}We(this,t);var c=qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,{min:n,max:o,step:r})),u=c;return c.__background=document.createElement("div"),c.__foreground=document.createElement("div"),at.bind(c.__background,"mousedown",function(t){document.activeElement.blur(),at.bind(window,"mousemove",i),at.bind(window,"mouseup",s),i(t)}),at.bind(c.__background,"touchstart",function(t){1!==t.touches.length||(at.bind(window,"touchmove",l),at.bind(window,"touchend",d),l(t))}),at.addClass(c.__background,"slider"),at.addClass(c.__foreground,"slider-fg"),c.updateDisplay(),c.__background.appendChild(c.__foreground),c.domElement.appendChild(c.__background),c}return Je(t,e),je(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",Ke(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(it),dt=function(e){function t(e,a,n){We(this,t);var o=qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return o.__button=document.createElement("div"),o.__button.innerHTML=void 0===n?"Fire":n,at.bind(o.__button,"click",function(t){return t.preventDefault(),o.fire(),!1}),at.addClass(o.__button,"button"),o.domElement.appendChild(o.__button),o}return Je(t,e),je(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}($e),ct=function(e){function t(e,a){function n(t){d(t),at.bind(window,"mousemove",d),at.bind(window,"touchmove",d),at.bind(window,"mouseup",r),at.bind(window,"touchend",r)}function o(t){c(t),at.bind(window,"mousemove",c),at.bind(window,"touchmove",c),at.bind(window,"mouseup",i),at.bind(window,"touchend",i)}function r(){at.unbind(window,"mousemove",d),at.unbind(window,"touchmove",d),at.unbind(window,"mouseup",r),at.unbind(window,"touchend",r),l()}function i(){at.unbind(window,"mousemove",c),at.unbind(window,"touchmove",c),at.unbind(window,"mouseup",i),at.unbind(window,"touchend",i),l()}function s(){var e=Ve(this.value);!1===e?this.value=g.__color.toString():(g.__color.__state=e,g.setValue(g.__color.toOriginal()))}function l(){g.__onFinishChange&&g.__onFinishChange.call(g,g.__color.toOriginal())}function d(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=g.__saturation_field.getBoundingClientRect(),a=t.touches&&t.touches[0]||t,n=a.clientX,o=a.clientY,r=(n-e.left)/(e.right-e.left),i=1-(o-e.top)/(e.bottom-e.top);return 1<i?i=1:0>i&&(i=0),1<r?r=1:0>r&&(r=0),g.__color.v=i,g.__color.s=r,g.setValue(g.__color.toOriginal()),!1}function c(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=g.__hue_field.getBoundingClientRect(),a=t.touches&&t.touches[0]||t,n=a.clientY,o=1-(n-e.top)/(e.bottom-e.top);return 1<o?o=1:0>o&&(o=0),g.__color.h=360*o,g.setValue(g.__color.toOriginal()),!1}We(this,t);var u=qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));u.__color=new Ze(u.getValue()),u.__temp=new Ze(0);var g=u;u.domElement=document.createElement("div"),at.makeSelectable(u.domElement,!1),u.__selector=document.createElement("div"),u.__selector.className="selector",u.__saturation_field=document.createElement("div"),u.__saturation_field.className="saturation-field",u.__field_knob=document.createElement("div"),u.__field_knob.className="field-knob",u.__field_knob_border="2px solid ",u.__hue_knob=document.createElement("div"),u.__hue_knob.className="hue-knob",u.__hue_field=document.createElement("div"),u.__hue_field.className="hue-field",u.__input=document.createElement("input"),u.__input.type="text",u.__input_textShadow="0 1px 1px ",at.bind(u.__input,"keydown",function(t){13===t.keyCode&&s.call(this)}),at.bind(u.__input,"blur",s),at.bind(u.__selector,"mousedown",function(){at.addClass(this,"drag").bind(window,"mouseup",function(){at.removeClass(g.__selector,"drag")})}),at.bind(u.__selector,"touchstart",function(){at.addClass(this,"drag").bind(window,"touchend",function(){at.removeClass(g.__selector,"drag")})});var m=document.createElement("div");return Ue.extend(u.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Ue.extend(u.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:u.__field_knob_border+(.5>u.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Ue.extend(u.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Ue.extend(u.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Ue.extend(m.style,{width:"100%",height:"100%",background:"none"}),M(m,"top","rgba(0,0,0,0)","#000"),Ue.extend(u.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),T(u.__hue_field),Ue.extend(u.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:u.__input_textShadow+"rgba(0,0,0,0.7)"}),at.bind(u.__saturation_field,"mousedown",n),at.bind(u.__saturation_field,"touchstart",n),at.bind(u.__field_knob,"mousedown",n),at.bind(u.__field_knob,"touchstart",n),at.bind(u.__hue_field,"mousedown",o),at.bind(u.__hue_field,"touchstart",o),u.__saturation_field.appendChild(m),u.__selector.appendChild(u.__field_knob),u.__selector.appendChild(u.__saturation_field),u.__selector.appendChild(u.__hue_field),u.__hue_field.appendChild(u.__hue_knob),u.domElement.appendChild(u.__input),u.domElement.appendChild(u.__selector),u.updateDisplay(),u}return Je(t,e),je(t,[{key:"updateDisplay",value:function(){var e=Ve(this.getValue());if(!1!==e){var t=!1;Ue.each(Ze.COMPONENTS,function(a){if(!Ue.isUndefined(e[a])&&!Ue.isUndefined(this.__color.__state[a])&&e[a]!==this.__color.__state[a])return t=!0,{}},this),t&&Ue.extend(this.__color.__state,e)}Ue.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=.5>this.__color.v||.5<this.__color.s?255:0,n=255-a;Ue.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,M(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Ue.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}}]),t}($e),ut=["-moz-","-o-","-webkit-","-ms-",""],gt=function(e,t){var a=e[t];return Ue.isArray(arguments[2])||Ue.isObject(arguments[2])?new ot(e,t,arguments[2]):Ue.isNumber(a)?Ue.isNumber(arguments[2])&&Ue.isNumber(arguments[3])?Ue.isNumber(arguments[4])?new lt(e,t,arguments[2],arguments[3],arguments[4]):new lt(e,t,arguments[2],arguments[3]):Ue.isNumber(arguments[4])?new st(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new st(e,t,{min:arguments[2],max:arguments[3]}):Ue.isString(a)?new rt(e,t):Ue.isFunction(a)?new dt(e,t,""):Ue.isBoolean(a)?new nt(e,t):null},mt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},pt=function(){function e(){We(this,e),this.backgroundElement=document.createElement("div"),Ue.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),at.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Ue.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;at.bind(this.backgroundElement,"click",function(){t.hide()})}return je(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Ue.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function e(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",at.unbind(t.domElement,"webkitTransitionEnd",e),at.unbind(t.domElement,"transitionend",e),at.unbind(t.domElement,"oTransitionEnd",e)};at.bind(this.domElement,"webkitTransitionEnd",e),at.bind(this.domElement,"transitionend",e),at.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-at.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-at.getHeight(this.domElement)/2+"px"}}]),e}(),ft=function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");({load:function(e,t){var a=t||document,n=a.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,a.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){var a=t||document,n=document.createElement("style");n.type="text/css",n.innerHTML=e;var o=a.getElementsByTagName("head")[0];try{o.appendChild(n)}catch(t){}}}).inject(ft);var yt=72,vt=20,At="Default",xt=function(){try{return!!window.localStorage}catch(t){return!1}}(),ht=void 0,Ct=!0,bt=void 0,kt=!1,Et=[],St=function e(t){var a=this,n=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),at.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=Ue.defaults(n,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),n=Ue.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),Ue.isUndefined(n.load)?n.load={preset:At}:n.preset&&(n.load.preset=n.preset),Ue.isUndefined(n.parent)&&n.hideable&&Et.push(this),n.resizable=Ue.isUndefined(n.parent)&&n.resizable,n.autoPlace&&Ue.isUndefined(n.scrollable)&&(n.scrollable=!0);var o=xt&&"true"===localStorage.getItem(U(this,"isLocal")),r=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return a.parent?a.getRoot().preset:n.load.preset},set:function(e){a.parent?a.getRoot().preset=e:n.load.preset=e,X(this),a.revert()}},width:{get:function(){return n.width},set:function(e){n.width=e,N(a,e)}},name:{get:function(){return n.name},set:function(e){n.name=e,titleRowName&&(titleRowName.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(t){n.closed=t,n.closed?at.addClass(a.__ul,e.CLASS_CLOSED):at.removeClass(a.__ul,e.CLASS_CLOSED),this.onResize(),a.__closeButton&&(a.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return o},set:function(e){xt&&(o=e,e?at.bind(window,"unload",r):at.unbind(window,"unload",r),localStorage.setItem(U(a,"isLocal"),e))}}}),Ue.isUndefined(n.parent)){if(n.closed=!1,at.addClass(this.domElement,e.CLASS_MAIN),at.makeSelectable(this.domElement,!1),xt&&o){a.useLocalStorage=!0;var i=localStorage.getItem(U(this,"gui"));i&&(n.load=JSON.parse(i))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,at.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),n.closeOnTop?(at.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(at.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),at.bind(this.__closeButton,"click",function(){a.closed=!a.closed})}else{void 0===n.closed&&(n.closed=!0);var s=document.createTextNode(n.name);at.addClass(s,"controller-name");var l=L(a,s),d=function(t){return t.preventDefault(),a.closed=!a.closed,!1};at.addClass(this.__ul,e.CLASS_CLOSED),at.addClass(l,"title"),at.bind(l,"click",d),n.closed||(this.closed=!1)}n.autoPlace&&(Ue.isUndefined(n.parent)&&(Ct&&(bt=document.createElement("div"),at.addClass(bt,"dg"),at.addClass(bt,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(bt),Ct=!1),bt.appendChild(this.domElement),at.addClass(this.domElement,e.CLASS_AUTO_PLACE)),!this.parent&&N(a,n.width)),this.__resizeHandler=function(){a.onResizeDebounced()},at.bind(window,"resize",this.__resizeHandler),at.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),at.bind(this.__ul,"transitionend",this.__resizeHandler),at.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&V(this),r=function(){xt&&"true"===localStorage.getItem(U(a,"isLocal"))&&localStorage.setItem(U(a,"gui"),JSON.stringify(a.getSaveObject()))},this.saveToLocalStorageIfPossible=r,n.parent||function(){var e=a.getRoot();e.width+=1,Ue.defer(function(){e.width-=1})}()};St.toggleHide=function(){kt=!kt,Ue.each(Et,function(e){e.domElement.style.display=kt?"none":""})},St.CLASS_AUTO_PLACE="a",St.CLASS_AUTO_PLACE_CONTAINER="ac",St.CLASS_MAIN="main",St.CLASS_CONTROLLER_ROW="cr",St.CLASS_TOO_TALL="taller-than-window",St.CLASS_CLOSED="closed",St.CLASS_CLOSE_BUTTON="close-button",St.CLASS_CLOSE_TOP="close-top",St.CLASS_CLOSE_BOTTOM="close-bottom",St.CLASS_DRAG="drag",St.DEFAULT_WIDTH=245,St.TEXT_CLOSED="Close Controls",St.TEXT_OPEN="Open Controls",St._keydownHandler=function(t){"text"!==document.activeElement.type&&(t.which===yt||t.keyCode===yt)&&St.toggleHide()},at.bind(window,"keydown",St._keydownHandler,!1),Ue.extend(St.prototype,{add:function(e,t){return G(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return G(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;Ue.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&bt.removeChild(this.domElement);var e=this;Ue.each(this.__folders,function(t){e.removeFolder(t)}),at.unbind(window,"keydown",St._keydownHandler,!1),F(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error("You already have a folder in this GUI by the name \""+e+"\"");var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var a=new St(t);this.__folders[e]=a;var n=L(this,a.domElement);return at.addClass(n,"folder"),a},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],F(e);var t=this;Ue.each(e.__folders,function(t){e.removeFolder(t)}),Ue.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=at.getOffset(e.__ul).top,a=0;Ue.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(a+=at.getHeight(t))}),window.innerHeight-t-vt<a?(at.addClass(e.domElement,St.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-vt+"px"):(at.removeClass(e.domElement,St.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&Ue.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:Ue.debounce(function(){this.onResize()},50),remember:function(){if(Ue.isUndefined(ht)&&(ht=new pt,ht.domElement.innerHTML="<div id=\"dg-save\" class=\"dg dialogue\">\n\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\n\n  <textarea id=\"dg-new-constructor\"></textarea>\n\n  <div id=\"dg-save-locally\">\n\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id=\"dg-local-explain\">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>"),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;Ue.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&Q(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&N(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,0<this.__rememberedObjects.length&&(e.preset=this.preset,!e.remembered&&(e.remembered={}),e.remembered[this.preset]=Y(this)),e.folders={},Ue.each(this.__folders,function(t,a){e.folders[a]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Y(this),I(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[At]=Y(this,!0)),this.load.remembered[e]=Y(this),this.preset=e,_(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){Ue.each(this.__controllers,function(t){this.getRoot().load.remembered?O(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),Ue.each(this.__folders,function(e){e.revert(e)}),e||I(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&W(this.__listening)},updateDisplay:function(){Ue.each(this.__controllers,function(e){e.updateDisplay()}),Ue.each(this.__folders,function(e){e.updateDisplay()})}});var Bt=St,Dt=function(e){function t(e){var a;return n(this,t),a=u(this,s(t).call(this,e)),a.previousDemo=null,a.demo=null,a}return i(t,e),t}(function e(t){n(this,e),this.type=t,this.target=null}),wt=new Dt("change"),Pt=new Dt("load"),Mt=window.location.hash.slice(1),Tt=function(t){function a(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r;n(this,a);var i=void 0===o.aside?t:o.aside;return r=u(this,s(a).call(this)),r.renderer=void 0===o.renderer?function(){var a=new e.WebGLRenderer;return a.setSize(t.clientWidth,t.clientHeight),a.setPixelRatio(window.devicePixelRatio),a}():o.renderer,t.appendChild(r.renderer.domElement),r.clock=new e.Clock,r.menu=new Bt({autoPlace:!1}),i.appendChild(r.menu.domElement),r.demos=new Map,r.demo=null,r.currentDemo=null,r}return i(a,t),r(a,[{key:"resetMenu",value:function(){var e=this,t=this.menu.domElement.parentNode,a=new Bt({autoPlace:!1});if(1<this.demos.size){var n=a.add(this,"demo",Array.from(this.demos.keys()));n.onChange(function(){return e.loadDemo()})}return t.removeChild(this.menu.domElement),t.appendChild(a.domElement),this.menu.destroy(),this.menu=a,a}},{key:"startDemo",value:function(e){e.id===this.demo&&(e.initialize(),e.registerOptions(this.resetMenu()),e.ready=!0,Pt.demo=e,this.dispatchEvent(Pt))}},{key:"loadDemo",value:function(){var e=this,t=this.demo,a=this.demos,n=a.get(t),o=this.currentDemo,r=this.renderer;window.location.hash=t,null!==o&&o.reset(),this.menu.domElement.style.display="none",r.clear(),wt.previousDemo=o,wt.demo=n,this.currentDemo=n,this.dispatchEvent(wt),n.load().then(function(){return e.startDemo(n)}).catch(function(t){return console.error(t)})}},{key:"addDemo",value:function(e){var t=this.currentDemo;return this.demos.set(e.id,e.setRenderer(this.renderer)),(null===this.demo||e.id===Mt)&&(this.demo=e.id,this.loadDemo()),this.resetMenu(),null!==t&&t.ready&&t.registerOptions(this.menu),this}},{key:"removeDemo",value:function(e){var t=this.demos,a;return t.has(e)&&(t.delete(e),this.demo===e&&0<t.size?(a=t.entries().next().value,this.demo=a[0],this.currentDemo=a[1],this.loadDemo()):(this.demo=null,this.currentDemo=null,this.renderer.clear())),this}},{key:"setSize",value:function(e,t){var a=this.currentDemo;this.renderer.setSize(e,t),null!==a&&null!==a.camera&&(a.camera.aspect=e/t,a.camera.updateProjectionMatrix())}},{key:"render",value:function(){var e=this.currentDemo,t=this.clock.getDelta();null!==e&&e.ready&&e.render(t)}}]),a}(Re),zt=function(){function e(){n(this,e)}return r(e,[{key:"dispose",value:function(){}}]),e}(),Lt=function(t){function a(){return n(this,a),u(this,s(a).call(this,{type:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{previousLuminanceBuffer:new e.Uniform(null),currentLuminanceBuffer:new e.Uniform(null),minLuminance:new e.Uniform(.01),delta:new e.Uniform(0),tau:new e.Uniform(1)},fragmentShader:"uniform sampler2D previousLuminanceBuffer;\r\nuniform sampler2D currentLuminanceBuffer;\r\nuniform float minLuminance;\r\nuniform float delta;\r\nuniform float tau;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tfloat previousLuminance = texture2D(previousLuminanceBuffer, vUv, MIP_LEVEL_1X1).r;\r\n\tfloat currentLuminance = texture2D(currentLuminanceBuffer, vUv, MIP_LEVEL_1X1).r;\r\n\r\n\tpreviousLuminance = max(minLuminance, previousLuminance);\r\n\tcurrentLuminance = max(minLuminance, currentLuminance);\r\n\r\n\t// Adapt the luminance using Pattanaik's technique.\r\n\tfloat adaptedLum = previousLuminance + (currentLuminance - previousLuminance) * (1.0 - exp(-delta * tau));\r\n\r\n\tgl_FragColor.r = adaptedLum;\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),a}(e.ShaderMaterial),Ft=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2;return n(this,a),u(this,s(a).call(this,{type:"ColorEdgesMaterial",defines:{EDGE_THRESHOLD:"0.1"},uniforms:{inputBuffer:new e.Uniform(null),texelSize:new e.Uniform(t)},fragmentShader:"uniform sampler2D inputBuffer;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset[3];\r\n\r\nvoid main() {\r\n\r\n\tconst vec2 threshold = vec2(EDGE_THRESHOLD);\r\n\r\n\t// Calculate color deltas.\r\n\tvec4 delta;\r\n\tvec3 c = texture2D(inputBuffer, vUv).rgb;\r\n\r\n\tvec3 cLeft = texture2D(inputBuffer, vOffset[0].xy).rgb;\r\n\tvec3 t = abs(c - cLeft);\r\n\tdelta.x = max(max(t.r, t.g), t.b);\r\n\r\n\tvec3 cTop = texture2D(inputBuffer, vOffset[0].zw).rgb;\r\n\tt = abs(c - cTop);\r\n\tdelta.y = max(max(t.r, t.g), t.b);\r\n\r\n\t// We do the usual threshold.\r\n\tvec2 edges = step(threshold, delta.xy);\r\n\r\n\t// Then discard if there is no edge.\r\n\tif(dot(edges, vec2(1.0)) == 0.0) {\r\n\r\n\t\tdiscard;\r\n\r\n\t}\r\n\r\n\t// Calculate right and bottom deltas.\r\n\tvec3 cRight = texture2D(inputBuffer, vOffset[1].xy).rgb;\r\n\tt = abs(c - cRight);\r\n\tdelta.z = max(max(t.r, t.g), t.b);\r\n\r\n\tvec3 cBottom = texture2D(inputBuffer, vOffset[1].zw).rgb;\r\n\tt = abs(c - cBottom);\r\n\tdelta.w = max(max(t.r, t.g), t.b);\r\n\r\n\t// Calculate the maximum delta in the direct neighborhood.\r\n\tfloat maxDelta = max(max(max(delta.x, delta.y), delta.z), delta.w);\r\n\r\n\t// Calculate left-left and top-top deltas.\r\n\tvec3 cLeftLeft = texture2D(inputBuffer, vOffset[2].xy).rgb;\r\n\tt = abs(c - cLeftLeft);\r\n\tdelta.z = max(max(t.r, t.g), t.b);\r\n\r\n\tvec3 cTopTop = texture2D(inputBuffer, vOffset[2].zw).rgb;\r\n\tt = abs(c - cTopTop);\r\n\tdelta.w = max(max(t.r, t.g), t.b);\r\n\r\n\t// Calculate the final maximum delta.\r\n\tmaxDelta = max(max(maxDelta, delta.z), delta.w);\r\n\r\n\t// Local contrast adaptation in action.\r\n\tedges.xy *= step(0.5 * maxDelta, delta.xy);\r\n\r\n\tgl_FragColor = vec4(edges, 0.0, 0.0);\r\n\r\n}\r\n",vertexShader:"uniform vec2 texelSize;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset[3];\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\r\n\tvOffset[0] = uv.xyxy + texelSize.xyxy * vec4(-1.0, 0.0, 0.0, 1.0); // Changed sign in W component.\r\n\tvOffset[1] = uv.xyxy + texelSize.xyxy * vec4(1.0, 0.0, 0.0, -1.0); // Changed sign in W component.\r\n\tvOffset[2] = uv.xyxy + texelSize.xyxy * vec4(-2.0, 0.0, 0.0, 2.0); // Changed sign in W component.\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),r(a,[{key:"setEdgeDetectionThreshold",value:function(e){this.defines.EDGE_THRESHOLD=e.toFixed("2"),this.needsUpdate=!0}}]),a}(e.ShaderMaterial),It=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2,o;return n(this,a),o=u(this,s(a).call(this,{type:"ConvolutionMaterial",uniforms:{inputBuffer:new e.Uniform(null),texelSize:new e.Uniform(new e.Vector2()),halfTexelSize:new e.Uniform(new e.Vector2()),kernel:new e.Uniform(0)},fragmentShader:"#include <common>\r\n#include <dithering_pars_fragment>\r\n\r\nuniform sampler2D inputBuffer;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\t// Sample top left texel.\r\n\tvec4 sum = texture2D(inputBuffer, vUv0);\r\n\r\n\t// Sample top right texel.\r\n\tsum += texture2D(inputBuffer, vUv1);\r\n\r\n\t// Sample bottom right texel.\r\n\tsum += texture2D(inputBuffer, vUv2);\r\n\r\n\t// Sample bottom left texel.\r\n\tsum += texture2D(inputBuffer, vUv3);\r\n\r\n\t// Compute the average.\r\n\tgl_FragColor = sum * 0.25;\r\n\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n",vertexShader:"uniform vec2 texelSize;\r\nuniform vec2 halfTexelSize;\r\nuniform float kernel;\r\n\r\n/* Packing multiple texture coordinates into one varying and using a swizzle to\r\nextract them in the fragment shader still causes a dependent texture read. */\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\tvec2 dUv = (texelSize * vec2(kernel)) + halfTexelSize;\r\n\r\n\tvUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\r\n\tvUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\r\n\tvUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\r\n\tvUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1})),o.setTexelSize(t.x,t.y),o.kernelSize=Ot.LARGE,o}return i(a,t),r(a,[{key:"getKernel",value:function(){return Rt[this.kernelSize]}},{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}}]),a}(e.ShaderMaterial),Rt=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Ot={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Gt=function(t){function a(){return n(this,a),u(this,s(a).call(this,{type:"CopyMaterial",uniforms:{inputBuffer:new e.Uniform(null),opacity:new e.Uniform(1)},fragmentShader:"uniform sampler2D inputBuffer;\r\nuniform float opacity;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel = texture2D(inputBuffer, vUv);\r\n\tgl_FragColor = opacity * texel;\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),a}(e.ShaderMaterial),Ut=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,o=1<arguments.length?arguments[1]:void 0,r;return n(this,a),r=u(this,s(a).call(this,{type:"DepthComparisonMaterial",uniforms:{depthBuffer:new e.Uniform(t),cameraNear:new e.Uniform(.1),cameraFar:new e.Uniform(2e3)},fragmentShader:"#include <packing>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nuniform sampler2D depthBuffer;\r\nuniform float cameraNear;\r\nuniform float cameraFar;\r\n\r\nvarying float vViewZ;\r\nvarying vec4 vProjTexCoord;\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\t// Transform into Cartesian coordinate (not mirrored).\r\n\tvec2 projTexCoord = (vProjTexCoord.xy / vProjTexCoord.w) * 0.5 + 0.5;\r\n\tprojTexCoord = clamp(projTexCoord, 0.002, 0.998);\r\n\r\n\tfloat fragCoordZ = unpackRGBAToDepth(texture2D(depthBuffer, projTexCoord));\r\n\r\n\t#ifdef PERSPECTIVE_CAMERA\r\n\r\n\t\tfloat viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\r\n\r\n\t#else\r\n\r\n\t\tfloat viewZ = orthographicDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\r\n\r\n\t#endif\r\n\r\n\tfloat depthTest = (-vViewZ > -viewZ) ? 1.0 : 0.0;\r\n\r\n\tgl_FragColor.rgb = vec3(0.0, depthTest, 1.0);\r\n\r\n}\r\n",vertexShader:"#include <common>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvarying float vViewZ;\r\nvarying vec4 vProjTexCoord;\r\n\r\nvoid main() {\r\n\r\n\t#include <skinbase_vertex>\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\r\n\tvViewZ = mvPosition.z;\r\n\tvProjTexCoord = gl_Position;\r\n\r\n\t#include <clipping_planes_vertex>\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1,morphTargets:!0,skinning:!0})),r.adoptCameraSettings(o),r}return i(a,t),r(a,[{key:"adoptCameraSettings",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;null!==t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof e.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA)}}]),a}(e.ShaderMaterial),_t=function(t){function a(t,o,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,l=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4],d;if(n(this,a),d=u(this,s(a).call(this,{type:"EffectMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{inputBuffer:new e.Uniform(null),depthBuffer:new e.Uniform(null),resolution:new e.Uniform(new e.Vector2()),texelSize:new e.Uniform(new e.Vector2()),cameraNear:new e.Uniform(.3),cameraFar:new e.Uniform(1e3),aspect:new e.Uniform(1),time:new e.Uniform(0)},fragmentShader:"#include <common>\r\n#include <packing>\r\n#include <dithering_pars_fragment>\r\n\r\nuniform sampler2D inputBuffer;\r\nuniform sampler2D depthBuffer;\r\n\r\nuniform vec2 resolution;\r\nuniform vec2 texelSize;\r\n\r\nuniform float cameraNear;\r\nuniform float cameraFar;\r\nuniform float aspect;\r\nuniform float time;\r\n\r\nvarying vec2 vUv;\r\n\r\nfloat readDepth(const in vec2 uv) {\r\n\r\n\t#if DEPTH_PACKING == 3201\r\n\r\n\t\tfloat depth = unpackRGBAToDepth(texture2D(depthBuffer, uv));\r\n\r\n\t#else\r\n\r\n\t\tfloat depth = texture2D(depthBuffer, uv).r;\r\n\r\n\t#endif\r\n\r\n\t#if defined(PERSPECTIVE_CAMERA) && !defined(USE_LOGDEPTHBUF)\r\n\r\n\t\tdepth = viewZToOrthographicDepth(perspectiveDepthToViewZ(depth, cameraNear, cameraFar), cameraNear, cameraFar);\r\n\r\n\t#endif\r\n\r\n\treturn depth;\r\n\r\n}\r\n\r\nFRAGMENT_HEAD\r\n\r\nvoid main() {\r\n\r\n\tFRAGMENT_MAIN_UV\r\n\r\n\tvec4 color0 = texture2D(inputBuffer, UV);\r\n\tvec4 color1 = vec4(0.0);\r\n\r\n\tFRAGMENT_MAIN_IMAGE\r\n\r\n\tgl_FragColor = color0;\r\n\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n".replace(Ht.FRAGMENT_HEAD,t.get(Ht.FRAGMENT_HEAD)).replace(Ht.FRAGMENT_MAIN_UV,t.get(Ht.FRAGMENT_MAIN_UV)).replace(Ht.FRAGMENT_MAIN_IMAGE,t.get(Ht.FRAGMENT_MAIN_IMAGE)),vertexShader:"uniform vec2 resolution;\r\nuniform vec2 texelSize;\r\n\r\nuniform float cameraNear;\r\nuniform float cameraFar;\r\nuniform float aspect;\r\nuniform float time;\r\n\r\nvarying vec2 vUv;\r\n\r\nVERTEX_HEAD\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\r\n\tVERTEX_MAIN_SUPPORT\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n".replace(Ht.VERTEX_HEAD,t.get(Ht.VERTEX_HEAD)).replace(Ht.VERTEX_MAIN_SUPPORT,t.get(Ht.VERTEX_MAIN_SUPPORT)),dithering:l,depthWrite:!1,depthTest:!1})),null!==o){var c=!0,g=!1,m=void 0;try{for(var p=o.entries()[Symbol.iterator](),f,y;!(c=(f=p.next()).done);c=!0)y=f.value,d.defines[y[0]]=y[1]}catch(e){g=!0,m=e}finally{try{c||null==p.return||p.return()}finally{if(g)throw m}}}if(null!==r){var v=!0,A=!1,x=void 0;try{for(var h=r.entries()[Symbol.iterator](),C,b;!(v=(C=h.next()).done);v=!0)b=C.value,d.uniforms[b[0]]=b[1]}catch(e){A=!0,x=e}finally{try{v||null==h.return||h.return()}finally{if(A)throw x}}}return d.adoptCameraSettings(i),d}return i(a,t),r(a,[{key:"setResolution",value:function(e,t){e=Te(e,1),t=Te(t,1),this.uniforms.resolution.value.set(e,t),this.uniforms.texelSize.value.set(1/e,1/t),this.uniforms.aspect.value=e/t}},{key:"adoptCameraSettings",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;null!==t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof e.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA)}},{key:"depthPacking",get:function(){return we(this.defines.DEPTH_PACKING)},set:function(e){this.defines.DEPTH_PACKING=e.toFixed(0)}}]),a}(e.ShaderMaterial),Ht={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Qt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};n(this,a);var r=Object.assign({exposure:.6,density:.93,decay:.96,weight:.4,clampMax:1},o);return u(this,s(a).call(this,{type:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new e.Uniform(null),lightPosition:new e.Uniform(t),exposure:new e.Uniform(r.exposure),decay:new e.Uniform(r.decay),density:new e.Uniform(r.density),weight:new e.Uniform(r.weight),clampMax:new e.Uniform(r.clampMax)},fragmentShader:"#include <common>\r\n#include <dithering_pars_fragment>\r\n\r\nuniform sampler2D inputBuffer;\r\nuniform vec2 lightPosition;\r\nuniform float exposure;\r\nuniform float decay;\r\nuniform float density;\r\nuniform float weight;\r\nuniform float clampMax;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec2 coord = vUv;\r\n\r\n\t// Calculate the vector from this pixel to the light position in screen space.\r\n\tvec2 delta = coord - lightPosition;\r\n\tdelta *= 1.0 / SAMPLES_FLOAT * density;\r\n\r\n\t// A decreasing illumination factor.\r\n\tfloat illuminationDecay = 1.0;\r\n\r\n\tvec4 sample;\r\n\tvec4 color = vec4(0.0);\r\n\r\n\t/* Estimate the probability of occlusion at each pixel by summing samples\r\n\talong a ray to the light position. */\r\n\tfor(int i = 0; i < SAMPLES_INT; ++i) {\r\n\r\n\t\tcoord -= delta;\r\n\t\tsample = texture2D(inputBuffer, coord);\r\n\r\n\t\t// Apply the sample attenuation scale/decay factors.\r\n\t\tsample *= illuminationDecay * weight;\r\n\t\tcolor += sample;\r\n\r\n\t\t// Update the exponential decay factor.\r\n\t\tilluminationDecay *= decay;\r\n\r\n\t}\r\n\r\n\tgl_FragColor = clamp(color * exposure, 0.0, clampMax);\r\n\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),r(a,[{key:"samples",get:function(){return we(this.defines.SAMPLES_INT)},set:function(e){e=Le(e),this.defines.SAMPLES_INT=e.toFixed(0),this.defines.SAMPLES_FLOAT=e.toFixed(1),this.needsUpdate=!0}}]),a}(e.ShaderMaterial),Vt=function(t){function a(){var t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r;n(this,a);var i=null!==o;return r=u(this,s(a).call(this,{type:"LuminanceMaterial",uniforms:{inputBuffer:new e.Uniform(null),distinction:new e.Uniform(1),range:new e.Uniform(i?o:new e.Vector2)},fragmentShader:"#include <common>\r\n\r\nuniform sampler2D inputBuffer;\r\nuniform float distinction;\r\nuniform vec2 range;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel = texture2D(inputBuffer, vUv);\r\n\tfloat l = linearToRelativeLuminance(texel.rgb);\r\n\r\n\t#ifdef RANGE\r\n\r\n\t\tfloat low = step(range.x, l);\r\n\t\tfloat high = step(l, range.y);\r\n\r\n\t\t// Apply the mask.\r\n\t\tl *= low * high;\r\n\r\n\t#endif\r\n\r\n\tl = pow(abs(l), distinction);\r\n\r\n\t#ifdef COLOR\r\n\r\n\t\tgl_FragColor = vec4(texel.rgb * l, texel.a);\r\n\r\n\t#else\r\n\r\n\t\tgl_FragColor = vec4(l, l, l, texel.a);\r\n\r\n\t#endif\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n"})),r.setColorOutputEnabled(t),r.setLuminanceRangeEnabled(i),r}return i(a,t),r(a,[{key:"setColorOutputEnabled",value:function(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}},{key:"setLuminanceRangeEnabled",value:function(e){e?this.defines.RANGE="1":delete this.defines.RANGE,this.needsUpdate=!0}}]),a}(e.ShaderMaterial),Nt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2,o;return n(this,a),o=u(this,s(a).call(this,{type:"OutlineEdgesMaterial",uniforms:{maskTexture:new e.Uniform(null),texelSize:new e.Uniform(new e.Vector2())},fragmentShader:"uniform sampler2D maskTexture;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\tvec2 c0 = texture2D(maskTexture, vUv0).rg;\r\n\tvec2 c1 = texture2D(maskTexture, vUv1).rg;\r\n\tvec2 c2 = texture2D(maskTexture, vUv2).rg;\r\n\tvec2 c3 = texture2D(maskTexture, vUv3).rg;\r\n\r\n\tfloat d0 = (c0.x - c1.x) * 0.5;\r\n\tfloat d1 = (c2.x - c3.x) * 0.5;\r\n\tfloat d = length(vec2(d0, d1));\r\n\r\n\tfloat a0 = min(c0.y, c1.y);\r\n\tfloat a1 = min(c2.y, c3.y);\r\n\tfloat visibilityFactor = min(a0, a1);\r\n\r\n\tgl_FragColor.rg = (1.0 - visibilityFactor > 0.001) ? vec2(d, 0.0) : vec2(0.0, d);\r\n\r\n}\r\n",vertexShader:"uniform vec2 texelSize;\r\n\r\nvarying vec2 vUv0;\r\nvarying vec2 vUv1;\r\nvarying vec2 vUv2;\r\nvarying vec2 vUv3;\r\n\r\nvoid main() {\r\n\r\n\tvUv0 = vec2(uv.x + texelSize.x, uv.y);\r\n\tvUv1 = vec2(uv.x - texelSize.x, uv.y);\r\n\tvUv2 = vec2(uv.x, uv.y + texelSize.y);\r\n\tvUv3 = vec2(uv.x, uv.y - texelSize.y);\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1})),o.setTexelSize(t.x,t.y),o}return i(a,t),r(a,[{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t)}}]),a}(e.ShaderMaterial),Yt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new e.Vector2;return n(this,a),u(this,s(a).call(this,{type:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"8",MAX_SEARCH_STEPS_FLOAT:"8.0",AREATEX_MAX_DISTANCE:"16.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new e.Uniform(null),areaTexture:new e.Uniform(null),searchTexture:new e.Uniform(null),texelSize:new e.Uniform(t)},fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + float(offset) * texelSize, 0.0)\r\n\r\nuniform sampler2D inputBuffer;\r\nuniform sampler2D areaTexture;\r\nuniform sampler2D searchTexture;\r\n\r\nuniform vec2 texelSize;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset[3];\r\nvarying vec2 vPixCoord;\r\n\r\nvec2 round(vec2 x) {\r\n\r\n\treturn sign(x) * floor(abs(x) + 0.5);\r\n\r\n}\r\n\r\nfloat searchLength(vec2 e, float bias, float scale) {\r\n\r\n\t// Not required if searchTexture accesses are set to point.\r\n\t// const vec2 SEARCH_TEX_PIXEL_SIZE = 1.0 / vec2(66.0, 33.0);\r\n\t// e = vec2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE + e * vec2(scale, 1.0) * vec2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\r\n\r\n\te.r = bias + e.r * scale;\r\n\r\n\treturn 255.0 * texture2D(searchTexture, e, 0.0).r;\r\n\r\n}\r\n\r\nfloat searchXLeft(vec2 texCoord, float end) {\r\n\r\n\t/* @PSEUDO_GATHER4\r\n\t * This texCoord has been offset by (-0.25, -0.125) in the vertex shader to\r\n\t * sample between edge, thus fetching four edges in a row.\r\n\t * Sampling with different offsets in each direction allows to disambiguate\r\n\t * which edges are active from the four fetched ones.\r\n\t */\r\n\r\n\tvec2 e = vec2(0.0, 1.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i) {\r\n\r\n\t\te = texture2D(inputBuffer, texCoord, 0.0).rg;\r\n\t\ttexCoord -= vec2(2.0, 0.0) * texelSize;\r\n\r\n\t\tif(!(texCoord.x > end && e.g > 0.8281 && e.r == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\t// Correct the previously applied offset (-0.25, -0.125).\r\n\ttexCoord.x += 0.25 * texelSize.x;\r\n\r\n\t// The searches are biased by 1, so adjust the coords accordingly.\r\n\ttexCoord.x += texelSize.x;\r\n\r\n\t// Disambiguate the length added by the last step.\r\n\ttexCoord.x += 2.0 * texelSize.x; // Undo last step.\r\n\ttexCoord.x -= texelSize.x * searchLength(e, 0.0, 0.5);\r\n\r\n\treturn texCoord.x;\r\n\r\n}\r\n\r\nfloat searchXRight(vec2 texCoord, float end) {\r\n\r\n\tvec2 e = vec2(0.0, 1.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i) {\r\n\r\n\t\te = texture2D(inputBuffer, texCoord, 0.0).rg;\r\n\t\ttexCoord += vec2(2.0, 0.0) * texelSize;\r\n\r\n\t\tif(!(texCoord.x < end && e.g > 0.8281 && e.r == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\ttexCoord.x -= 0.25 * texelSize.x;\r\n\ttexCoord.x -= texelSize.x;\r\n\ttexCoord.x -= 2.0 * texelSize.x;\r\n\ttexCoord.x += texelSize.x * searchLength(e, 0.5, 0.5);\r\n\r\n\treturn texCoord.x;\r\n\r\n}\r\n\r\nfloat searchYUp(vec2 texCoord, float end) {\r\n\r\n\tvec2 e = vec2(1.0, 0.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i) {\r\n\r\n\t\te = texture2D(inputBuffer, texCoord, 0.0).rg;\r\n\t\ttexCoord += vec2(0.0, 2.0) * texelSize; // Changed sign.\r\n\r\n\t\tif(!(texCoord.y > end && e.r > 0.8281 && e.g == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\ttexCoord.y -= 0.25 * texelSize.y; // Changed sign.\r\n\ttexCoord.y -= texelSize.y; // Changed sign.\r\n\ttexCoord.y -= 2.0 * texelSize.y; // Changed sign.\r\n\ttexCoord.y += texelSize.y * searchLength(e.gr, 0.0, 0.5); // Changed sign.\r\n\r\n\treturn texCoord.y;\r\n\r\n}\r\n\r\nfloat searchYDown(vec2 texCoord, float end) {\r\n\r\n\tvec2 e = vec2(1.0, 0.0);\r\n\r\n\tfor(int i = 0; i < MAX_SEARCH_STEPS_INT; ++i ) {\r\n\r\n\t\te = texture2D(inputBuffer, texCoord, 0.0).rg;\r\n\t\ttexCoord -= vec2(0.0, 2.0) * texelSize; // Changed sign.\r\n\r\n\t\tif(!(texCoord.y < end && e.r > 0.8281 && e.g == 0.0)) { break; }\r\n\r\n\t}\r\n\r\n\ttexCoord.y += 0.25 * texelSize.y; // Changed sign.\r\n\ttexCoord.y += texelSize.y; // Changed sign.\r\n\ttexCoord.y += 2.0 * texelSize.y; // Changed sign.\r\n\ttexCoord.y -= texelSize.y * searchLength(e.gr, 0.5, 0.5); // Changed sign.\r\n\r\n\treturn texCoord.y;\r\n\r\n}\r\n\r\nvec2 area(vec2 dist, float e1, float e2, float offset) {\r\n\r\n\t// Rounding prevents precision errors of bilinear filtering.\r\n\tvec2 texCoord = AREATEX_MAX_DISTANCE * round(4.0 * vec2(e1, e2)) + dist;\r\n\r\n\t// Scale and bias for texel space translation.\r\n\ttexCoord = AREATEX_PIXEL_SIZE * texCoord + (0.5 * AREATEX_PIXEL_SIZE);\r\n\r\n\t// Move to proper place, according to the subpixel offset.\r\n\ttexCoord.y += AREATEX_SUBTEX_SIZE * offset;\r\n\r\n\treturn texture2D(areaTexture, texCoord, 0.0).rg;\r\n\r\n}\r\n\r\nvoid main() {\r\n\r\n\tvec4 weights = vec4(0.0);\r\n\tvec4 subsampleIndices = vec4(0.0);\r\n\tvec2 e = texture2D(inputBuffer, vUv).rg;\r\n\r\n\tif(e.g > 0.0) {\r\n\r\n\t\t// Edge at north.\r\n\t\tvec2 d;\r\n\r\n\t\t// Find the distance to the left.\r\n\t\tvec2 coords;\r\n\t\tcoords.x = searchXLeft(vOffset[0].xy, vOffset[2].x);\r\n\t\tcoords.y = vOffset[1].y; // vOffset[1].y = vUv.y - 0.25 * texelSize.y (@CROSSING_OFFSET)\r\n\t\td.x = coords.x;\r\n\r\n\t\t/* Now fetch the left crossing edges, two at a time using bilinear\r\n\t\tfiltering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to discern what\r\n\t\tvalue each edge has. */\r\n\t\tfloat e1 = texture2D(inputBuffer, coords, 0.0).r;\r\n\r\n\t\t// Find the distance to the right.\r\n\t\tcoords.x = searchXRight(vOffset[0].zw, vOffset[2].y);\r\n\t\td.y = coords.x;\r\n\r\n\t\t/* Translate distances to pixel units for better interleave arithmetic and\r\n\t\tmemory accesses. */\r\n\t\td = d / texelSize.x - vPixCoord.x;\r\n\r\n\t\t// The area texture is compressed quadratically.\r\n\t\tvec2 sqrtD = sqrt(abs(d));\r\n\r\n\t\t// Fetch the right crossing edges.\r\n\t\tcoords.y -= texelSize.y; // WebGL port note: Added.\r\n\t\tfloat e2 = sampleLevelZeroOffset(inputBuffer, coords, ivec2(1, 0)).r;\r\n\r\n\t\t// Pattern recognised, now get the actual area.\r\n\t\tweights.rg = area(sqrtD, e1, e2, subsampleIndices.y);\r\n\r\n\t}\r\n\r\n\tif(e.r > 0.0) {\r\n\r\n\t\t// Edge at west.\r\n\t\tvec2 d;\r\n\r\n\t\t// Find the distance to the top.\r\n\t\tvec2 coords;\r\n\t\tcoords.y = searchYUp(vOffset[1].xy, vOffset[2].z);\r\n\t\tcoords.x = vOffset[0].x; // vOffset[1].x = vUv.x - 0.25 * texelSize.x;\r\n\t\td.x = coords.y;\r\n\r\n\t\t// Fetch the top crossing edges.\r\n\t\tfloat e1 = texture2D(inputBuffer, coords, 0.0).g;\r\n\r\n\t\t// Find the distance to the bottom.\r\n\t\tcoords.y = searchYDown(vOffset[1].zw, vOffset[2].w);\r\n\t\td.y = coords.y;\r\n\r\n\t\t// Distances in pixel units.\r\n\t\td = d / texelSize.y - vPixCoord.y;\r\n\r\n\t\t// The area texture is compressed quadratically.\r\n\t\tvec2 sqrtD = sqrt(abs(d));\r\n\r\n\t\t// Fetch the bottom crossing edges.\r\n\t\tcoords.y -= texelSize.y; // WebGL port note: Added.\r\n\t\tfloat e2 = sampleLevelZeroOffset(inputBuffer, coords, ivec2(0, 1)).g;\r\n\r\n\t\t// Get the area for this direction.\r\n\t\tweights.ba = area(sqrtD, e1, e2, subsampleIndices.x);\r\n\r\n\t}\r\n\r\n\tgl_FragColor = weights;\r\n\r\n}\r\n",vertexShader:"uniform vec2 texelSize;\r\n\r\nvarying vec2 vUv;\r\nvarying vec4 vOffset[3];\r\nvarying vec2 vPixCoord;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\r\n\tvPixCoord = uv / texelSize;\r\n\r\n\t// Offsets for the searches (see @PSEUDO_GATHER4).\r\n\tvOffset[0] = uv.xyxy + texelSize.xyxy * vec4(-0.25, 0.125, 1.25, 0.125); // Changed sign in Y and W components.\r\n\tvOffset[1] = uv.xyxy + texelSize.xyxy * vec4(-0.125, 0.25, -0.125, -1.25); //Changed sign in Y and W components.\r\n\r\n\t// This indicates the ends of the loops.\r\n\tvOffset[2] = vec4(vOffset[0].xz, vOffset[1].yw) + vec4(-2.0, 2.0, -2.0, 2.0) * texelSize.xxyy * MAX_SEARCH_STEPS_FLOAT;\r\n\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1}))}return i(a,t),r(a,[{key:"setOrthogonalSearchSteps",value:function(e){this.defines.MAX_SEARCH_STEPS_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=e.toFixed("1"),this.needsUpdate=!0}}]),a}(e.ShaderMaterial),Xt=function(){function t(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Pass",o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new e.Scene,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new e.OrthographicCamera(-1,1,1,-1,0,1);n(this,t),this.name=a,this.scene=o,this.camera=r,this.quad=null,this.needsSwap=!0,this.needsDepthTexture=!1,this.renderToScreen=!1,this.enabled=!0}return r(t,[{key:"getFullscreenMaterial",value:function(){return null===this.quad?null:this.quad.material}},{key:"setFullscreenMaterial",value:function(t){var a=this.quad;null===a?(a=new e.Mesh(new e.PlaneBufferGeometry(2,2),t),a.frustumCulled=!1,null!==this.scene&&(this.scene.add(a),this.quad=a)):a.material=t}},{key:"getDepthTexture",value:function(){return null}},{key:"setDepthTexture",value:function(){}},{key:"render",value:function(){throw new Error("Render method not implemented!")}},{key:"setSize",value:function(){}},{key:"initialize",value:function(){}},{key:"dispose",value:function(){var e=this.getFullscreenMaterial();null!==e&&e.dispose();for(var t=Object.keys(this),a=0,n;a<t.length;a++)n=t[a],null!==this[n]&&"function"==typeof this[n].dispose&&(this[n].dispose(),this[n]=null)}}]),t}(),Wt=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;return n(this,a),o=u(this,s(a).call(this,"BlurPass")),o.renderTargetX=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),o.renderTargetX.texture.name="Blur.TargetX",o.renderTargetX.texture.generateMipmaps=!1,o.renderTargetY=o.renderTargetX.clone(),o.renderTargetY.texture.name="Blur.TargetY",o.resolution=new e.Vector2,o.resolutionScale=void 0===t.resolutionScale?.5:t.resolutionScale,o.convolutionMaterial=new It,o.ditheredConvolutionMaterial=new It,o.ditheredConvolutionMaterial.dithering=!0,o.dithering=!1,o.kernelSize=t.kernelSize,o}return i(a,t),r(a,[{key:"getResolutionScale",value:function(){return this.resolutionScale}},{key:"setResolutionScale",value:function(e){this.resolutionScale=e,this.setSize(this.resolution.x,this.resolution.y)}},{key:"render",value:function(e,t,a){var n=this.scene,o=this.camera,r=this.renderTargetX,s=this.renderTargetY,d=this.convolutionMaterial,c=d.uniforms,u=d.getKernel(),g=t,m,p,f;for(this.setFullscreenMaterial(d),p=0,f=u.length-1;p<f;++p)m=0==p%2?r:s,c.kernel.value=u[p],c.inputBuffer.value=g.texture,e.render(n,o,m),g=m;this.dithering&&(d=this.ditheredConvolutionMaterial,c=d.uniforms,this.setFullscreenMaterial(d)),c.kernel.value=u[p],c.inputBuffer.value=g.texture,e.render(n,o,this.renderToScreen?null:a)}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),e=Te(1,Le(e*this.resolutionScale)),t=Te(1,Le(t*this.resolutionScale)),this.renderTargetX.setSize(e,t),this.renderTargetY.setSize(e,t),this.convolutionMaterial.setTexelSize(1/e,1/t),this.ditheredConvolutionMaterial.setTexelSize(1/e,1/t)}},{key:"initialize",value:function(t,a){a||(this.renderTargetX.texture.format=e.RGBFormat,this.renderTargetY.texture.format=e.RGBFormat)}},{key:"width",get:function(){return this.renderTargetX.width}},{key:"height",get:function(){return this.renderTargetX.height}},{key:"kernelSize",get:function(){return this.convolutionMaterial.kernelSize},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ot.LARGE;this.convolutionMaterial.kernelSize=e,this.ditheredConvolutionMaterial.kernelSize=e}}]),a}(Xt),jt=function(e){function t(){var e;return n(this,t),e=u(this,s(t).call(this,"ClearMaskPass",null,null)),e.needsSwap=!1,e}return i(t,e),r(t,[{key:"render",value:function(e){e.state.buffers.stencil.setTest(!1)}}]),t}(Xt),Kt=new e.Color,Jt=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a;return n(this,t),a=u(this,s(t).call(this,"ClearPass",null,null)),a.needsSwap=!1,a.clearColor=void 0===e.clearColor?null:e.clearColor,a.clearAlpha=void 0===e.clearAlpha?0:e.clearAlpha,a}return i(t,e),r(t,[{key:"render",value:function(e,t){var a=this.clearColor,n;null!==a&&(Kt.copy(e.getClearColor()),n=e.getClearAlpha(),e.setClearColor(a,this.clearAlpha)),e.setRenderTarget(this.renderToScreen?null:t),e.clear(),null!==a&&e.setClearColor(Kt,n)}}]),t}(Xt),qt={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,NEGATION:11,NORMAL:12,OVERLAY:13,REFLECT:14,SCREEN:15,SOFT_LIGHT:16,SUBTRACT:17},Zt=new Map([[qt.SKIP,null],[qt.ADD,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn min(x + y, 1.0) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.ALPHA,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn y * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, y.a), x.a);\r\n\r\n}\r\n"],[qt.AVERAGE,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn (x + y) * 0.5 * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.COLOR_BURN,"float blend(const in float x, const in float y) {\r\n\r\n\treturn (y == 0.0) ? y : max(1.0 - (1.0 - x) / y, 0.0);\r\n\r\n}\r\n\r\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\r\n\r\n\treturn z * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.COLOR_DODGE,"float blend(const in float x, const in float y) {\r\n\r\n\treturn (y == 1.0) ? y : min(x / (1.0 - y), 1.0);\r\n\r\n}\r\n\r\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\r\n\r\n\treturn z * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.DARKEN,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn min(x, y) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.DIFFERENCE,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn abs(x - y) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.EXCLUSION,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn (x + y - 2.0 * x * y) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.LIGHTEN,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn max(x, y) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.MULTIPLY,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn x * y * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.NEGATION,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn (1.0 - abs(1.0 - x - y)) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.NORMAL,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn y * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.OVERLAY,"float blend(const in float x, const in float y) {\r\n\r\n\treturn (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));\r\n\r\n}\r\n\r\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\r\n\r\n\treturn z * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.REFLECT,"float blend(const in float x, const in float y) {\r\n\r\n\treturn (y == 1.0) ? y : min(x * x / (1.0 - y), 1.0);\r\n\r\n}\r\n\r\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\r\n\r\n\treturn z * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.SCREEN,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn (1.0 - (1.0 - x) * (1.0 - y)) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.SOFT_LIGHT,"float blend(const in float x, const in float y) {\r\n\r\n\treturn (y < 0.5) ?\r\n\t\t(2.0 * x * y + x * x * (1.0 - 2.0 * y)) :\r\n\t\t(sqrt(x) * (2.0 * y - 1.0) + 2.0 * x * (1.0 - y));\r\n\r\n}\r\n\r\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\r\n\r\n\treturn z * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"],[qt.SUBTRACT,"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\r\n\r\n\treturn max(x + y - 1.0, 0.0) * opacity + x * (1.0 - opacity);\r\n\r\n}\r\n\r\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\r\n\r\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\r\n\r\n}\r\n"]]),$t=function(){function t(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;n(this,t),this.blendFunction=a,this.opacity=new e.Uniform(o)}return r(t,[{key:"getShaderCode",value:function(){return Zt.get(this.blendFunction)}}]),t}(),ea=function(){function e(t,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};n(this,e);var r=Object.assign({attributes:ta.NONE,blendFunction:qt.SCREEN,defines:new Map,uniforms:new Map,vertexShader:null},o);this.name=t,this.attributes=r.attributes,this.fragmentShader=a,this.vertexShader=r.vertexShader,this.defines=r.defines,this.uniforms=r.uniforms,this.blendMode=new $t(r.blendFunction)}return r(e,[{key:"update",value:function(){}},{key:"setSize",value:function(){}},{key:"initialize",value:function(){}},{key:"dispose",value:function(){for(var e=Object.keys(this),t=0,a;t<e.length;t++)a=e[t],null!==this[a]&&"function"==typeof this[a].dispose&&(this[a].dispose(),this[a]=null)}}]),e}(),ta={CONVOLUTION:2,DEPTH:1,NONE:0},aa=function(e){function t(e){var a;n(this,t),a=u(this,s(t).call(this,"EffectPass")),a.mainCamera=e;for(var o=arguments.length,r=Array(1<o?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return a.effects=r.sort(function(e,t){return t.attributes-e.attributes}),a.quantize=!1,a.uniforms=0,a.varyings=0,a.minTime=1,a.maxTime=1e3,a.setFullscreenMaterial(a.createMaterial()),a}return i(t,e),r(t,[{key:"createMaterial",value:function(){var e=/\bblend\b/g,t=new Map([[Ht.FRAGMENT_HEAD,""],[Ht.FRAGMENT_MAIN_UV,""],[Ht.FRAGMENT_MAIN_IMAGE,""],[Ht.VERTEX_HEAD,""],[Ht.VERTEX_MAIN_SUPPORT,""]]),a=new Map,n=new Map,o=new Map,r=0,i=0,s=0,l=!1,d=!0,c=!1,u=void 0,g;try{for(var m=this.effects[Symbol.iterator](),p,f;!(d=(p=m.next()).done);d=!0)f=p.value,f.blendMode.blendFunction!==qt.SKIP&&(0!=(s&ta.CONVOLUTION)&&0!=(f.attributes&ta.CONVOLUTION)?console.error("Convolution effects cannot be merged",f):(s|=f.attributes,g=J("e"+r++,f,t,a,n,o,s),i+=g.varyings.length,l=l||g.transformedUv))}catch(e){c=!0,u=e}finally{try{d||null==m.return||m.return()}finally{if(c)throw u}}var y=!0,v=!1,A=void 0;try{for(var x=a.values()[Symbol.iterator](),h,C;!(y=(h=x.next()).done);y=!0)C=h.value,t.set(Ht.FRAGMENT_HEAD,t.get(Ht.FRAGMENT_HEAD)+C.getShaderCode().replace(e,"blend"+C.blendFunction)+"\n")}catch(e){v=!0,A=e}finally{try{y||null==x.return||x.return()}finally{if(v)throw A}}return 0!=(s&ta.DEPTH)&&(t.set(Ht.FRAGMENT_MAIN_IMAGE,"float depth = readDepth(UV);\n\n\t"+t.get(Ht.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=!0),l?(t.set(Ht.FRAGMENT_MAIN_UV,"vec2 transformedUv = vUv;\n"+t.get(Ht.FRAGMENT_MAIN_UV)),n.set("UV","transformedUv")):n.set("UV","vUv"),t.forEach(function(e,t,a){return a.set(t,e.trim())}),this.uniforms=o.size,this.varyings=i,new _t(t,n,o,this.mainCamera,this.dithering)}},{key:"recompile",value:function(){var e=this.getFullscreenMaterial(),t=0,a=0,n=null,o=0;if(null!==e){var r=e.uniforms.resolution.value;t=r.x,a=r.y,n=e.uniforms.depthBuffer.value,o=e.depthPacking,e.dispose(),this.uniforms=0,this.varyings=0}e=this.createMaterial(),e.setResolution(t,a),this.setFullscreenMaterial(e),this.setDepthTexture(n,o)}},{key:"getDepthTexture",value:function(){var e=this.getFullscreenMaterial();return null===e?null:e.uniforms.depthBuffer.value}},{key:"setDepthTexture",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.getFullscreenMaterial();a.uniforms.depthBuffer.value=e,a.depthPacking=t,a.needsUpdate=!0,this.needsDepthTexture=null===e}},{key:"render",value:function(e,t,a,n){var o=this.getFullscreenMaterial(),r=o.uniforms.time.value+n,i=!0,s=!1,l=void 0;try{for(var d=this.effects[Symbol.iterator](),c,u;!(i=(c=d.next()).done);i=!0)u=c.value,u.update(e,t,n)}catch(e){s=!0,l=e}finally{try{i||null==d.return||d.return()}finally{if(s)throw l}}o.uniforms.inputBuffer.value=t.texture,o.uniforms.time.value=r<=this.maxTime?r:this.minTime,e.render(this.scene,this.camera,this.renderToScreen?null:a)}},{key:"setSize",value:function(e,t){this.getFullscreenMaterial().setResolution(e,t);var a=!0,n=!1,o=void 0;try{for(var r=this.effects[Symbol.iterator](),i,s;!(a=(i=r.next()).done);a=!0)s=i.value,s.setSize(e,t)}catch(e){n=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(n)throw o}}}},{key:"initialize",value:function(e,t){var a=e.capabilities,n=ze(a.maxFragmentUniforms,a.maxVertexUniforms);this.uniforms>n&&console.warn("The current rendering context doesn't support more than "+n+" uniforms, but "+this.uniforms+" were defined"),n=a.maxVaryings,this.varyings>n&&console.warn("The current rendering context doesn't support more than "+n+" varyings, but "+this.varyings+" were defined");var o=!0,r=!1,i=void 0;try{for(var s=this.effects[Symbol.iterator](),l,d;!(o=(l=s.next()).done);o=!0)d=l.value,d.initialize(e,t)}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}}},{key:"dispose",value:function(){p(s(t.prototype),"dispose",this).call(this);var e=!0,a=!1,n=void 0;try{for(var o=this.effects[Symbol.iterator](),r,i;!(e=(r=o.next()).done);e=!0)i=r.value,i.dispose()}catch(e){a=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(a)throw n}}}},{key:"dithering",get:function(){return this.quantize},set:function(e){if(this.quantize!==e){var t=this.getFullscreenMaterial();null!==t&&(t.dithering=e,t.needsUpdate=!0),this.quantize=e}}}]),t}(Xt),na=function(e){function t(e,a){var o;return n(this,t),o=u(this,s(t).call(this,"MaskPass",e,a)),o.needsSwap=!1,o.inverse=!1,o.clearStencil=!0,o}return i(t,e),r(t,[{key:"render",value:function(e,t,a){var n=e.context,o=e.state,r=this.scene,i=this.camera,s=this.inverse?0:1;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),o.buffers.stencil.setFunc(n.ALWAYS,s,4294967295),o.buffers.stencil.setClear(1-s),this.clearStencil&&(this.renderToScreen?(e.setRenderTarget(null),e.clearStencil()):(e.setRenderTarget(t),e.clearStencil(),e.setRenderTarget(a),e.clearStencil())),this.renderToScreen?e.render(r,i,null):(e.render(r,i,t),e.render(r,i,a)),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setFunc(n.EQUAL,1,4294967295),o.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP)}}]),t}(Xt),oa=function(e){function t(e,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r;return n(this,t),r=u(this,s(t).call(this,"RenderPass",e,a)),r.needsSwap=!1,r.clearPass=new Jt(o),r.overrideMaterial=void 0===o.overrideMaterial?null:o.overrideMaterial,r.clearDepth=void 0!==o.clearDepth&&o.clearDepth,r.clear=void 0===o.clear||o.clear,r}return i(t,e),r(t,[{key:"render",value:function(e,t){var a=this.scene,n=this.renderToScreen?null:t,o=a.overrideMaterial;this.clear?(this.clearPass.renderToScreen=this.renderToScreen,this.clearPass.render(e,t)):this.clearDepth&&(e.setRenderTarget(n),e.clearDepth()),a.overrideMaterial=this.overrideMaterial,e.render(a,this.camera,n),a.overrideMaterial=o}}]),t}(Xt),ra=function(t){function a(t){var o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r;return n(this,a),r=u(this,s(a).call(this,"SavePass")),r.setFullscreenMaterial(new Gt),r.needsSwap=!1,r.renderTarget=t,void 0===t&&(r.renderTarget=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),r.renderTarget.texture.name="SavePass.Target",r.renderTarget.texture.generateMipmaps=!1),r.resize=o,r}return i(a,t),r(a,[{key:"render",value:function(e,t){this.getFullscreenMaterial().uniforms.inputBuffer.value=t.texture,e.render(this.scene,this.camera,this.renderToScreen?null:this.renderTarget)}},{key:"setSize",value:function(e,t){this.resize&&(e=Te(1,e),t=Te(1,t),this.renderTarget.setSize(e,t))}}]),a}(Xt),ia=function(e){function t(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"inputBuffer",o;return n(this,t),o=u(this,s(t).call(this,"ShaderPass")),o.setFullscreenMaterial(e),o.uniform=null,o.setInput(a),o}return i(t,e),r(t,[{key:"setInput",value:function(e){var t=this.getFullscreenMaterial();if(this.uniform=null,null!==t){var a=t.uniforms;void 0!==a[e]&&(this.uniform=a[e])}}},{key:"render",value:function(e,t,a){null!==this.uniform&&(this.uniform.value=t.texture),e.render(this.scene,this.camera,this.renderToScreen?null:a)}}]),t}(Xt),sa=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};n(this,t);var o=Object.assign({depthBuffer:!0,stencilBuffer:!1},a);this.renderer=e,this.inputBuffer=null,this.outputBuffer=null,null!==this.renderer&&(this.renderer.autoClear=!1,this.inputBuffer=this.createBuffer(o.depthBuffer,o.stencilBuffer),this.outputBuffer=this.inputBuffer.clone()),this.copyPass=new ia(new Gt()),this.passes=[]}return r(t,[{key:"replaceRenderer",value:function(e){var t=this.renderer,a,n,o;return null!==t&&t!==e&&(this.renderer=e,this.renderer.autoClear=!1,a=t.domElement.parentNode,n=t.getSize(),o=e.getSize(),null!==a&&(a.removeChild(t.domElement),a.appendChild(e.domElement)),(n.width!==o.width||n.height!==o.height)&&this.setSize()),t}},{key:"getDepthTexture",value:function(e){var t=this.passes,a=null,n=!0,o,r;for(o=0;o<e;++o)r=t[o],r.needsSwap?n=!n:r instanceof oa&&(a=(n?this.inputBuffer:this.outputBuffer).depthTexture);return a}},{key:"createDepthTexture",value:function(){var t=new e.DepthTexture;this.inputBuffer.stencilBuffer&&(t.format=e.DepthStencilFormat,t.type=e.UnsignedInt248Type),this.inputBuffer.depthTexture=t,this.outputBuffer.depthTexture=t.clone()}},{key:"createBuffer",value:function(t,a){var n=this.renderer.getDrawingBufferSize(),o=this.renderer.context.getContextAttributes().alpha,r=new e.WebGLRenderTarget(n.width,n.height,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:o?e.RGBAFormat:e.RGBFormat,depthBuffer:t,stencilBuffer:a});return r.texture.name="EffectComposer.Buffer",r.texture.generateMipmaps=!1,r}},{key:"addPass",value:function(e,t){var a=this.renderer,n=a.getDrawingBufferSize();e.setSize(n.width,n.height),e.initialize(a,a.context.getContextAttributes().alpha),void 0===t?t=this.passes.push(e)-1:this.passes.splice(t,0,e),e.needsDepthTexture&&(null===this.inputBuffer.depthTexture&&this.createDepthTexture(),e.setDepthTexture(this.getDepthTexture(t)))}},{key:"removePass",value:function(e){this.passes.splice(this.passes.indexOf(e),1)}},{key:"render",value:function(e){var t=this.renderer,a=this.copyPass,n=this.inputBuffer,o=this.outputBuffer,r=!1,i=!0,s=!1,l=void 0,d,c,u;try{for(var g=this.passes[Symbol.iterator](),m,p;!(i=(m=g.next()).done);i=!0)p=m.value,p.enabled&&(p.render(t,n,o,e,r),p.needsSwap&&(r&&(a.renderToScreen=p.renderToScreen,d=t.context,c=t.state,c.buffers.stencil.setFunc(d.NOTEQUAL,1,4294967295),a.render(t,n,o,e,r),c.buffers.stencil.setFunc(d.EQUAL,1,4294967295)),u=n,n=o,o=u),p instanceof na?r=!0:p instanceof jt&&(r=!1))}catch(e){s=!0,l=e}finally{try{i||null==g.return||g.return()}finally{if(s)throw l}}}},{key:"setSize",value:function(e,t){var a=this.renderer,n,o;(void 0===e||void 0===t)&&(n=a.getSize(),e=n.width,t=n.height),a.setSize(e,t),o=a.getDrawingBufferSize(),this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);var r=!0,i=!1,s=void 0;try{for(var l=this.passes[Symbol.iterator](),d,c;!(r=(d=l.next()).done);r=!0)c=d.value,c.setSize(o.width,o.height)}catch(e){i=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw s}}}},{key:"reset",value:function(){var e=this.createBuffer(this.inputBuffer.depthBuffer,this.inputBuffer.stencilBuffer);this.dispose(),this.inputBuffer=e,this.outputBuffer=e.clone(),this.copyPass=new ia(new Gt())}},{key:"dispose",value:function(){var e=!0,t=!1,a=void 0;try{for(var n=this.passes[Symbol.iterator](),o,r;!(e=(o=n.next()).done);e=!0)r=o.value,r.dispose()}catch(e){t=!0,a=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}this.passes=[],null!==this.inputBuffer&&(this.inputBuffer.dispose(),this.inputBuffer=null),null!==this.outputBuffer&&(this.outputBuffer.dispose(),this.outputBuffer=null),this.copyPass.dispose()}}]),t}(),la=function(){function e(){n(this,e)}return r(e,[{key:"setSize",value:function(){}}]),e}(),da="uniform sampler2D texture;\r\n\r\n#ifdef ASPECT_CORRECTION\r\n\r\n\tvarying vec2 vUv2;\r\n\r\n#endif\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\t#ifdef ASPECT_CORRECTION\r\n\r\n\t\toutputColor = texture2D(texture, vUv2);\r\n\r\n\t#else\r\n\r\n\t\toutputColor = texture2D(texture, uv);\r\n\r\n\t#endif\r\n\r\n}\r\n",ca=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;n(this,a);var r=Object.assign({blendFunction:qt.SCREEN,resolutionScale:.5,kernelSize:Ot.LARGE,distinction:1},t);return o=u(this,s(a).call(this,"BloomEffect",da,{blendFunction:r.blendFunction,uniforms:new Map([["texture",new e.Uniform(null)]])})),o.renderTarget=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),o.renderTarget.texture.name="Bloom.Target",o.renderTarget.texture.generateMipmaps=!1,o.uniforms.get("texture").value=o.renderTarget.texture,o.resolution=new e.Vector2,o.blurPass=new Wt(r),o.luminancePass=new ia(new Vt(!0)),o.distinction=r.distinction,o.kernelSize=r.kernelSize,o}return i(a,t),r(a,[{key:"getResolutionScale",value:function(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function(e){this.blurPass.setResolutionScale(e),this.setSize(this.resolution.x,this.resolution.y)}},{key:"update",value:function(e,t){var a=this.renderTarget;this.luminancePass.render(e,t,a),this.blurPass.render(e,a,a)}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.blurPass.setSize(e,t),e=this.blurPass.width,t=this.blurPass.height,this.renderTarget.setSize(e,t)}},{key:"initialize",value:function(t,a){this.blurPass.initialize(t,a),a||(this.renderTarget.texture.format=e.RGBFormat)}},{key:"texture",get:function(){return this.renderTarget.texture}},{key:"dithering",get:function(){return this.blurPass.dithering},set:function(e){this.blurPass.dithering=e}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(e){this.blurPass.kernelSize=e}},{key:"distinction",get:function(){return this.luminancePass.getFullscreenMaterial().uniforms.distinction.value},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.luminancePass.getFullscreenMaterial().uniforms.distinction.value=e}}]),a}(ea),ua=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,a);var o=Object.assign({blendFunction:qt.NORMAL,focus:.5,dof:.02,aperture:.015,maxBlur:1},t);return u(this,s(a).call(this,"BokehEffect","uniform float focus;\r\nuniform float dof;\r\nuniform float aperture;\r\nuniform float maxBlur;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, const in float depth, out vec4 outputColor) {\r\n\r\n\tvec2 aspectCorrection = vec2(1.0, aspect);\r\n\r\n\tfloat focusNear = clamp(focus - dof, 0.0, 1.0);\r\n\tfloat focusFar = clamp(focus + dof, 0.0, 1.0);\r\n\r\n\t// Calculate a DoF mask.\r\n\tfloat low = step(depth, focusNear);\r\n\tfloat high = step(focusFar, depth);\r\n\r\n\tfloat factor = (depth - focusNear) * low + (depth - focusFar) * high;\r\n\tvec2 dofBlur = vec2(clamp(factor * aperture, -maxBlur, maxBlur));\r\n\r\n\tvec2 dofblur9 = dofBlur * 0.9;\r\n\tvec2 dofblur7 = dofBlur * 0.7;\r\n\tvec2 dofblur4 = dofBlur * 0.4;\r\n\r\n\tvec4 color = inputColor;\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.15,  0.37) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29,  0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.37,  0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.40,  0.0 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.37, -0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29, -0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.15, -0.37) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.15,  0.37) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29,  0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.37,  0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.37, -0.15) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29, -0.29) * aspectCorrection) * dofBlur);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.15, -0.37) * aspectCorrection) * dofBlur);\r\n\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.15,  0.37) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.37,  0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.37, -0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.15, -0.37) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.15,  0.37) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.37,  0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.37, -0.15) * aspectCorrection) * dofblur9);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.15, -0.37) * aspectCorrection) * dofblur9);\r\n\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29,  0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.40,  0.0 ) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29, -0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29,  0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29, -0.29) * aspectCorrection) * dofblur7);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofblur7);\r\n\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29,  0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.4,   0.0 ) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.29, -0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,  -0.4 ) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29,  0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.4,   0.0 ) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2(-0.29, -0.29) * aspectCorrection) * dofblur4);\r\n\tcolor += texture2D(inputBuffer, uv + (vec2( 0.0,   0.4 ) * aspectCorrection) * dofblur4);\r\n\r\n\toutputColor = color / 41.0;\r\n\r\n}\r\n",{attributes:ta.CONVOLUTION|ta.DEPTH,blendFunction:o.blendFunction,uniforms:new Map([["focus",new e.Uniform(o.focus)],["dof",new e.Uniform(o.dof)],["aperture",new e.Uniform(o.aperture)],["maxBlur",new e.Uniform(o.maxBlur)]])}))}return i(a,t),a}(ea),ga=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,a);var o=Object.assign({blendFunction:qt.NORMAL,brightness:0,contrast:0},t);return u(this,s(a).call(this,"BrightnessContrastEffect","uniform float brightness;\r\nuniform float contrast;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec3 color = inputColor.rgb + vec3(brightness - 0.5);\r\n\r\n\tif(contrast > 0.0) {\r\n\r\n\t\tcolor /= vec3(1.0 - contrast);\r\n\r\n\t} else {\r\n\r\n\t\tcolor *= vec3(1.0 + contrast);\r\n\r\n\t}\r\n\r\n\toutputColor = vec4(min(color + vec3(0.5), 1.0), inputColor.a);\r\n\r\n}\r\n",{blendFunction:o.blendFunction,uniforms:new Map([["brightness",new e.Uniform(o.brightness)],["contrast",new e.Uniform(o.contrast)]])}))}return i(a,t),a}(ea),ma=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:qt.NORMAL;return n(this,t),u(this,s(t).call(this,"ColorAverageEffect","void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tfloat sum = inputColor.r + inputColor.g + inputColor.b;\r\n\r\n\toutputColor = vec4(vec3(sum / 3.0), inputColor.a);\r\n\r\n}\r\n",{blendFunction:e}))}return i(t,e),t}(ea),pa=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,a);var o=Object.assign({blendFunction:qt.NORMAL,offset:new e.Vector2(.001,5e-4)},t);return u(this,s(a).call(this,"ChromaticAberrationEffect","varying vec2 vUvR;\r\nvarying vec2 vUvB;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec4 color = inputColor;\r\n\r\n\tcolor.r = texture2D(inputBuffer, vUvR).r;\r\n\tcolor.b = texture2D(inputBuffer, vUvB).b;\r\n\r\n\toutputColor = color;\r\n\r\n}\r\n",{attributes:ta.CONVOLUTION,blendFunction:o.blendFunction,uniforms:new Map([["offset",new e.Uniform(o.offset)]]),vertexShader:"uniform vec2 offset;\r\n\r\nvarying vec2 vUvR;\r\nvarying vec2 vUvB;\r\n\r\nvoid mainSupport() {\r\n\r\n\tvec2 aspectCorrection = vec2(aspect, 1.0);\r\n\r\n\tvUvR = uv + offset * aspectCorrection;\r\n\tvUvB = uv - offset * aspectCorrection;\r\n\r\n}\r\n"}))}return i(a,t),r(a,[{key:"offset",get:function(){return this.uniforms.get("offset").value},set:function(e){this.uniforms.get("offset").value=e}}]),a}(ea),fa=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a;n(this,t);var o=Object.assign({blendFunction:qt.NORMAL,inverted:!1},e);return a=u(this,s(t).call(this,"DepthEffect","void mainImage(const in vec4 inputColor, const in vec2 uv, const in float depth, out vec4 outputColor) {\r\n\r\n\t#ifdef INVERTED\r\n\r\n\t\tvec3 color = vec3(1.0 - depth);\r\n\r\n\t#else\r\n\r\n\t\tvec3 color = vec3(depth);\r\n\r\n\t#endif\r\n\r\n\toutputColor = vec4(color, inputColor.a);\r\n\r\n}\r\n",{attributes:ta.DEPTH,blendFunction:o.blendFunction})),a.inverted=o.inverted,a}return i(t,e),r(t,[{key:"inverted",get:function(){return this.defines.has("INVERTED")},set:function(e){e?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED")}}]),t}(ea),ya=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;n(this,a);var r=Object.assign({blendFunction:qt.NORMAL,angle:.5*De,scale:1},t);return o=u(this,s(a).call(this,"DotScreenEffect","uniform vec2 angle;\r\nuniform float scale;\r\n\r\nfloat pattern(const in vec2 uv) {\r\n\r\n\tvec2 point = scale * vec2(\r\n\t\tdot(angle.yx, vec2(uv.x, -uv.y)),\r\n\t\tdot(angle, uv)\r\n\t);\r\n\r\n\treturn (sin(point.x) * sin(point.y)) * 4.0;\r\n\r\n}\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec3 color = vec3(inputColor.rgb * 10.0 - 5.0 + pattern(uv * resolution));\r\n\toutputColor = vec4(color, inputColor.a);\r\n\r\n}\r\n",{blendFunction:r.blendFunction,uniforms:new Map([["angle",new e.Uniform(new e.Vector2())],["scale",new e.Uniform(r.scale)]])})),o.setAngle(r.angle),o}return i(a,t),r(a,[{key:"setAngle",value:function(e){this.uniforms.get("angle").value.set(Be(e),Se(e))}}]),a}(ea),va=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,a);var o=Object.assign({blendFunction:qt.NORMAL,gamma:2},t);return u(this,s(a).call(this,"GammaCorrectionEffect","uniform float gamma;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\toutputColor = LinearToGamma(max(inputColor, 0.0), gamma);\r\n\r\n}\r\n",{blendFunction:o.blendFunction,uniforms:new Map([["gamma",new e.Uniform(o.gamma)]])}))}return i(a,t),a}(ea),Aa="Glitch.Generated",xa=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;n(this,a);var r=Object.assign({blendFunction:qt.NORMAL,chromaticAberrationOffset:null,delay:new e.Vector2(1.5,3.5),duration:new e.Vector2(.6,1),columns:.05,perturbationMap:null,dtSize:64},t);return o=u(this,s(a).call(this,"GlitchEffect","uniform sampler2D perturbationMap;\r\n\r\nuniform bool active;\r\nuniform float columns;\r\nuniform float random;\r\nuniform vec2 seed;\r\nuniform vec2 distortion;\r\n\r\nvoid mainUv(inout vec2 uv) {\r\n\r\n\tif(active) {\r\n\r\n\t\tvec4 normal = texture2D(perturbationMap, uv * random * random);\r\n\r\n\t\tif(uv.y < distortion.x + columns && uv.y > distortion.x - columns * random) {\r\n\r\n\t\t\tfloat sx = clamp(ceil(seed.x), 0.0, 1.0);\r\n\t\t\tuv.y = sx * (1.0 - (uv.y + distortion.y)) + (1.0 - sx) * distortion.y;\r\n\r\n\t\t}\r\n\r\n\t\tif(uv.x < distortion.y + columns && uv.x > distortion.y - columns * random) {\r\n\r\n\t\t\tfloat sy = clamp(ceil(seed.y), 0.0, 1.0);\r\n\t\t\tuv.x = sy * distortion.x + (1.0 - sy) * (1.0 - (uv.x + distortion.x));\r\n\r\n\t\t}\r\n\r\n\t\tuv.x += normal.x * seed.x * (random * 0.2);\r\n\t\tuv.y += normal.y * seed.y * (random * 0.2);\r\n\r\n\t}\r\n\r\n}\r\n",{blendFunction:r.blendFunction,uniforms:new Map([["perturbationMap",new e.Uniform(null)],["columns",new e.Uniform(r.columns)],["active",new e.Uniform(!1)],["random",new e.Uniform(.02)],["seed",new e.Uniform(new e.Vector2())],["distortion",new e.Uniform(new e.Vector2())]])})),o.perturbationMap=null,o.setPerturbationMap(null===r.perturbationMap?o.generatePerturbationMap(r.dtSize):r.perturbationMap),o.perturbationMap.generateMipmaps=!1,o.delay=r.delay,o.duration=r.duration,o.breakPoint=new e.Vector2(Z(o.delay.x,o.delay.y),Z(o.duration.x,o.duration.y)),o.time=0,o.seed=o.uniforms.get("seed").value,o.distortion=o.uniforms.get("distortion").value,o.mode=ha.SPORADIC,o.chromaticAberrationOffset=r.chromaticAberrationOffset,o}return i(a,t),r(a,[{key:"getPerturbationMap",value:function(){return this.perturbationMap}},{key:"setPerturbationMap",value:function(e){null!==this.perturbationMap&&this.perturbationMap.name===Aa&&this.perturbationMap.dispose(),this.perturbationMap=e,this.uniforms.get("perturbationMap").value=e}},{key:"generatePerturbationMap",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:64,a=t*t,n=new Float32Array(3*a),o,r;for(o=0;o<a;++o)r=Math.random(),n[3*o]=r,n[3*o+1]=r,n[3*o+2]=r;var s=new e.DataTexture(n,t,t,e.RGBFormat,e.FloatType);return s.name=Aa,s.needsUpdate=!0,s}},{key:"update",value:function(e,t,n){var o=this.mode,i=this.breakPoint,s=this.chromaticAberrationOffset,l=this.time,d=!1,c=0,u=0,g;o!==ha.DISABLED&&(l+=n,g=l>i.x,c=Math.random(),this.uniforms.get("random").value=c,g&&.85<c||o===ha.CONSTANT_WILD?(d=!0,c/=30,u=Z(-De,Math.PI),this.seed.set(Z(-1,1),Z(-1,1)),this.distortion.set(Z(0,1),Z(0,1))):(g||o===ha.CONSTANT_MILD)&&(d=!0,c/=90,u=Z(-De,Math.PI),this.seed.set(Z(-.3,.3),Z(-.3,.3)),this.distortion.set(Z(0,1),Z(0,1))),l>=i.x+i.y&&(i.set(Z(this.delay.x,this.delay.y),Z(this.duration.x,this.duration.y)),l=0),this.time=l),null!==s&&(d?s.set(Se(u),Be(u)).multiplyScalar(c):s.set(0,0)),this.uniforms.get("active").value=d}},{key:"active",get:function(){return this.uniforms.get("active").value}}]),a}(ea),ha={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3},Ca=new e.Vector3,v=function(t){function a(t,o,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},l;n(this,a);var d=Object.assign({blendFunction:qt.SCREEN,resolutionScale:.5,samples:60,blur:!0,kernelSize:Ot.SMALL},i);return l=u(this,s(a).call(this,"GodRaysEffect",da,{blendFunction:d.blendFunction,uniforms:new Map([["texture",new e.Uniform(null)]])})),l.scene=t,l.camera=o,l.lightSource=r,l.lightScene=new e.Scene,l.screenPosition=new e.Vector2,l.resolution=new e.Vector2,l.renderTargetX=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),l.renderTargetX.texture.name="GodRays.TargetX",l.renderTargetX.texture.generateMipmaps=!1,l.uniforms.get("texture").value=l.renderTargetX.texture,l.renderTargetY=l.renderTargetX.clone(),l.renderTargetY.texture.name="GodRays.TargetY",l.renderTargetMask=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1}),l.renderTargetMask.texture.name="GodRays.Mask",l.renderTargetMask.texture.generateMipmaps=!1,l.renderPassLight=new oa(l.lightScene,o,{clearColor:new e.Color(0)}),l.renderPassMask=new oa(t,o,{overrideMaterial:new e.MeshBasicMaterial({color:0})}),l.renderPassMask.clear=!1,l.blurPass=new Wt(d),l.godRaysPass=new ia(new Qt(l.screenPosition,d)),l.blur=d.blur,l.kernelSize=d.kernelSize,l.samples=d.samples,l}return i(a,t),r(a,[{key:"getResolutionScale",value:function(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function(e){this.blurPass.setResolutionScale(e),this.setSize(this.resolution.x,this.resolution.y)}},{key:"update",value:function(e,t){var a=this.scene,n=this.lightSource,o=this.renderTargetMask,r=this.renderTargetY,i,s;Ca.copy(n.position).project(this.camera),this.screenPosition.set(Te(0,ze(1,.5*(Ca.x+1))),Te(0,ze(1,.5*(Ca.y+1)))),s=n.parent,i=a.background,a.background=null,this.lightScene.add(n),this.renderPassLight.render(e,o),this.renderPassMask.render(e,o),null!==s&&s.add(n),a.background=i,t=o,this.blur&&(this.blurPass.render(e,t,r),t=r),this.godRaysPass.render(e,t,this.renderTargetX)}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.renderPassLight.setSize(e,t),this.renderPassMask.setSize(e,t),this.blurPass.setSize(e,t),this.godRaysPass.setSize(e,t),e=this.blurPass.width,t=this.blurPass.height,this.renderTargetMask.setSize(e,t),this.renderTargetX.setSize(e,t),this.renderTargetY.setSize(e,t)}},{key:"initialize",value:function(t,a){this.renderPassLight.initialize(t,a),this.renderPassMask.initialize(t,a),this.blurPass.initialize(t,a),this.godRaysPass.initialize(t,a),a||(this.renderTargetMask.texture.format=e.RGBFormat,this.renderTargetX.texture.format=e.RGBFormat,this.renderTargetY.texture.format=e.RGBFormat)}},{key:"texture",get:function(){return this.renderTargetX.texture}},{key:"godRaysMaterial",get:function(){return this.godRaysPass.getFullscreenMaterial()}},{key:"dithering",get:function(){return this.godRaysMaterial.dithering},set:function(e){var t=this.godRaysMaterial;t.dithering=e,t.needsUpdate=!0}},{key:"blur",get:function(){return this.blurPass.enabled},set:function(e){this.blurPass.enabled=e}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(e){this.blurPass.kernelSize=e}},{key:"samples",get:function(){return this.godRaysMaterial.samples},set:function(e){this.godRaysMaterial.samples=e}}]),a}(ea),ba=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;n(this,a);var r=Object.assign({blendFunction:qt.OVERLAY,scale:1,lineWidth:0},t);return o=u(this,s(a).call(this,"GridEffect","uniform vec2 scale;\r\nuniform float lineWidth;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tfloat grid = 0.5 - max(abs(mod(uv.x * scale.x, 1.0) - 0.5), abs(mod(uv.y * scale.y, 1.0) - 0.5));\r\n\toutputColor = vec4(vec3(smoothstep(0.0, lineWidth, grid)), inputColor.a);\r\n\r\n}\r\n",{blendFunction:r.blendFunction,uniforms:new Map([["scale",new e.Uniform(new e.Vector2())],["lineWidth",new e.Uniform(r.lineWidth)]])})),o.resolution=new e.Vector2,o.scale=Te(r.scale,1e-6),o.lineWidth=Te(r.lineWidth,0),o}return i(a,t),r(a,[{key:"getScale",value:function(){return this.scale}},{key:"setScale",value:function(e){this.scale=e,this.setSize(this.resolution.x,this.resolution.y)}},{key:"getLineWidth",value:function(){return this.lineWidth}},{key:"setLineWidth",value:function(e){this.lineWidth=e,this.setSize(this.resolution.x,this.resolution.y)}},{key:"setSize",value:function(e,t){this.resolution.set(e,t);var a=this.scale*(.125*t);this.uniforms.get("scale").value.set(e/t*a,a),this.uniforms.get("lineWidth").value=a/t+this.lineWidth}}]),a}(ea),ka=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;n(this,a);var r=Object.assign({blendFunction:qt.NORMAL,hue:0,saturation:0},t);return o=u(this,s(a).call(this,"HueSaturationEffect","uniform vec3 hue;\r\nuniform float saturation;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\t// Hue.\r\n\tvec3 color = vec3(\r\n\t\tdot(inputColor.rgb, hue.xyz),\r\n\t\tdot(inputColor.rgb, hue.zxy),\r\n\t\tdot(inputColor.rgb, hue.yzx)\r\n\t);\r\n\r\n\t// Saturation.\r\n\tfloat average = (color.r + color.g + color.b) / 3.0;\r\n\tvec3 diff = average - color;\r\n\r\n\tif(saturation > 0.0) {\r\n\r\n\t\tcolor += diff * (1.0 - 1.0 / (1.001 - saturation));\r\n\r\n\t} else {\r\n\r\n\t\tcolor += diff * -saturation;\r\n\r\n\t}\r\n\r\n\toutputColor = vec4(min(color, 1.0), inputColor.a);\r\n\r\n}\r\n",{blendFunction:r.blendFunction,uniforms:new Map([["hue",new e.Uniform(new e.Vector3())],["saturation",new e.Uniform(r.saturation)]])})),o.setHue(r.hue),o}return i(a,t),r(a,[{key:"setHue",value:function(e){var t=Be(e),a=Se(e);this.uniforms.get("hue").value.set(2*a,-1.7320508075688772*t-a,1.7320508075688772*t-a).addScalar(1).divideScalar(3)}}]),a}(ea),Ea=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a;n(this,t);var o=Object.assign({blendFunction:qt.SCREEN,premultiply:!1},e);return a=u(this,s(t).call(this,"NoiseEffect","void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec3 noise = vec3(rand(uv * time));\r\n\r\n\t#ifdef PREMULTIPLY\r\n\r\n\t\toutputColor = vec4(inputColor.rgb * noise, inputColor.a);\r\n\r\n\t#else\r\n\r\n\t\toutputColor = vec4(noise, inputColor.a);\r\n\r\n\t#endif\r\n\r\n}\r\n",{blendFunction:o.blendFunction})),a.premultiply=o.premultiply,a}return i(t,e),r(t,[{key:"premultiply",get:function(){return this.defines.has("PREMULTIPLY")},set:function(e){e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY")}}]),t}(ea),Sa=function(t){function a(t,o){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i;n(this,a);var l=Object.assign({blendFunction:qt.SCREEN,patternTexture:null,edgeStrength:1,pulseSpeed:0,visibleEdgeColor:16777215,hiddenEdgeColor:2230538,blur:!1,xRay:!0},r);return i=u(this,s(a).call(this,"OutlineEffect","uniform sampler2D edgeTexture;\r\nuniform sampler2D maskTexture;\r\n\r\nuniform vec3 visibleEdgeColor;\r\nuniform vec3 hiddenEdgeColor;\r\nuniform float pulse;\r\nuniform float edgeStrength;\r\n\r\n#ifdef USE_PATTERN\r\n\r\n\tuniform sampler2D patternTexture;\r\n\tvarying vec2 vUvPattern;\r\n\r\n#endif\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec2 edge = texture2D(edgeTexture, uv).rg;\r\n\tvec2 mask = texture2D(maskTexture, uv).rg;\r\n\r\n\t#ifndef X_RAY\r\n\r\n\t\tedge.y = 0.0;\r\n\r\n\t#endif\r\n\r\n\tedge *= (edgeStrength * mask.x * pulse);\r\n\tvec3 color = edge.x * visibleEdgeColor + edge.y * hiddenEdgeColor;\r\n\r\n\tfloat visibilityFactor = 0.0;\r\n\r\n\t#ifdef USE_PATTERN\r\n\r\n\t\tvec4 patternColor = texture2D(patternTexture, vUvPattern);\r\n\r\n\t\t#ifdef X_RAY\r\n\r\n\t\t\tfloat hiddenFactor = 0.5;\r\n\r\n\t\t#else\r\n\r\n\t\t\tfloat hiddenFactor = 0.0;\r\n\r\n\t\t#endif\r\n\r\n\t\tvisibilityFactor = (1.0 - mask.y > 0.0) ? 1.0 : hiddenFactor;\r\n\t\tvisibilityFactor *= (1.0 - mask.x) * patternColor.a;\r\n\t\tcolor += visibilityFactor * patternColor.rgb;\r\n\r\n\t#endif\r\n\r\n\toutputColor = vec4(color, max(max(edge.x, edge.y), visibilityFactor));\r\n\r\n}\r\n",{blendFunction:l.blendFunction,uniforms:new Map([["maskTexture",new e.Uniform(null)],["edgeTexture",new e.Uniform(null)],["edgeStrength",new e.Uniform(l.edgeStrength)],["visibleEdgeColor",new e.Uniform(new e.Color(l.visibleEdgeColor))],["hiddenEdgeColor",new e.Uniform(new e.Color(l.hiddenEdgeColor))],["pulse",new e.Uniform(1)]])})),i.setPatternTexture(l.patternTexture),i.xRay=l.xRay,i.mainScene=t,i.mainCamera=o,i.renderTargetDepth=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter}),i.renderTargetDepth.texture.name="Outline.Depth",i.renderTargetDepth.texture.generateMipmaps=!1,i.renderTargetMask=i.renderTargetDepth.clone(),i.renderTargetMask.texture.format=e.RGBFormat,i.renderTargetMask.texture.name="Outline.Mask",i.uniforms.get("maskTexture").value=i.renderTargetMask.texture,i.renderTargetEdges=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,stencilBuffer:!1,depthBuffer:!1,format:e.RGBFormat}),i.renderTargetEdges.texture.name="Outline.Edges",i.renderTargetEdges.texture.generateMipmaps=!1,i.renderTargetBlurredEdges=i.renderTargetEdges.clone(),i.renderTargetBlurredEdges.texture.name="Outline.BlurredEdges",i.clearPass=new Jt({clearColor:new e.Color(16777215),clearAlpha:1}),i.renderPassDepth=new oa(i.mainScene,i.mainCamera,{overrideMaterial:new e.MeshDepthMaterial({depthPacking:e.RGBADepthPacking,morphTargets:!0,skinning:!0}),clearColor:new e.Color(16777215),clearAlpha:1}),i.renderPassMask=new oa(i.mainScene,i.mainCamera,{overrideMaterial:new Ut(i.renderTargetDepth.texture,i.mainCamera),clearColor:new e.Color(16777215),clearAlpha:1}),i.blurPass=new Wt(l),i.kernelSize=l.kernelSize,i.blur=l.blur,i.resolution=new e.Vector2,i.outlineEdgesPass=new ia(new Nt(l)),i.outlineEdgesPass.getFullscreenMaterial().uniforms.maskTexture.value=i.renderTargetMask.texture,i.selection=[],i.time=0,i.pulseSpeed=l.pulseSpeed,i.selectionLayer=10,i.clear=!1,i}return i(a,t),r(a,[{key:"setPatternTexture",value:function(t){null===t?(this.defines.delete("USE_PATTERN"),this.uniforms.delete("patternScale"),this.uniforms.delete("patternTexture"),this.vertexShader=null):(this.defines.set("USE_PATTERN","1"),this.uniforms.set("patternScale",new e.Uniform(1)),this.uniforms.set("patternTexture",new e.Uniform(t)),this.vertexShader="uniform float patternScale;\r\n\r\nvarying vec2 vUvPattern;\r\n\r\nvoid mainSupport() {\r\n\r\n\tvUvPattern = uv * vec2(aspect, 1.0) * patternScale;\r\n\r\n}\r\n")}},{key:"getResolutionScale",value:function(){return this.blurPass.getResolutionScale()}},{key:"setResolutionScale",value:function(e){this.blurPass.setResolutionScale(e),this.setSize(this.resolution.x,this.resolution.y)}},{key:"setSelection",value:function(e){var t=e.slice(0),a=this.selectionLayer,n,o;for(this.clearSelection(),n=0,o=t.length;n<o;++n)t[n].layers.enable(a);return this.selection=t,this}},{key:"clearSelection",value:function(){var e=this.selection,t=this.selectionLayer,a,n;for(a=0,n=e.length;a<n;++a)e[a].layers.disable(t);return this.selection=[],this.time=0,this.clear=!0,this}},{key:"selectObject",value:function(e){return e.layers.enable(this.selectionLayer),this.selection.push(e),this}},{key:"deselectObject",value:function(e){var t=this.selection,a=t.indexOf(e);return 0<=a&&(t[a].layers.disable(this.selectionLayer),t.splice(a,1),0===t.length&&(this.time=0,this.clear=!0)),this}},{key:"setSelectionVisible",value:function(e){var t=this.selection,a,n;for(a=0,n=t.length;a<n;++a)e?t[a].layers.enable(0):t[a].layers.disable(0)}},{key:"update",value:function(e,t,a){var n=this.mainScene,o=this.mainCamera,r=this.uniforms.get("pulse"),i=n.background,s=o.layers.mask;0<this.selection.length?(n.background=null,r.value=1,0<this.pulseSpeed&&(r.value=.625+.375*Se(10*(this.time*this.pulseSpeed)),this.time+=a),this.setSelectionVisible(!1),this.renderPassDepth.render(e,this.renderTargetDepth),this.setSelectionVisible(!0),o.layers.mask=1<<this.selectionLayer,this.renderPassMask.render(e,this.renderTargetMask),o.layers.mask=s,n.background=i,this.outlineEdgesPass.render(e,null,this.renderTargetEdges),this.blur&&this.blurPass.render(e,this.renderTargetEdges,this.renderTargetBlurredEdges)):this.clear&&(this.clearPass.render(e,this.renderTargetMask),this.clearPass.render(e,this.renderTargetEdges),this.clear=!1)}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.renderTargetDepth.setSize(e,t),this.renderTargetMask.setSize(e,t),this.renderPassDepth.setSize(e,t),this.renderPassMask.setSize(e,t),this.blurPass.setSize(e,t),e=this.blurPass.width,t=this.blurPass.height,this.renderTargetEdges.setSize(e,t),this.renderTargetBlurredEdges.setSize(e,t),this.outlineEdgesPass.getFullscreenMaterial().setTexelSize(1/e,1/t)}},{key:"initialize",value:function(e,t){this.renderPassDepth.initialize(e,t),this.renderPassMask.initialize(e,t),this.blurPass.initialize(e,t)}},{key:"dithering",get:function(){return this.blurPass.dithering},set:function(e){this.blurPass.dithering=e}},{key:"kernelSize",get:function(){return this.blurPass.kernelSize},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ot.VERY_SMALL;this.blurPass.kernelSize=e}},{key:"blur",get:function(){return this.blurPass.enabled},set:function(e){this.blurPass.enabled=e,this.uniforms.get("edgeTexture").value=e?this.renderTargetBlurredEdges.texture:this.renderTargetEdges.texture}},{key:"xRay",get:function(){return this.defines.has("X_RAY")},set:function(e){e?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY")}}]),a}(ea),Ba=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:30,o;return n(this,a),o=u(this,s(a).call(this,"PixelationEffect","uniform bool active;\r\nuniform vec2 d;\r\n\r\nvoid mainUv(inout vec2 uv) {\r\n\r\n\tif(active) {\r\n\r\n\t\tuv = vec2(\r\n\t\t\td.x * (floor(uv.x / d.x) + 0.5),\r\n\t\t\td.y * (floor(uv.y / d.y) + 0.5)\r\n\t\t);\r\n\r\n\t}\r\n\r\n}\r\n",{uniforms:new Map([["active",new e.Uniform(!1)],["d",new e.Uniform(new e.Vector2())]])})),o.resolution=new e.Vector2,o.granularity=t,o}return i(a,t),r(a,[{key:"getGranularity",value:function(){return this.granularity}},{key:"setGranularity",value:function(e){e=Le(e),0<e%2&&(e+=1);var t=this.uniforms;t.get("active").value=0<e,t.get("d").value.set(e,e).divide(this.resolution),this.granularity=e}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.setGranularity(this.granularity)}}]),a}(ea),Da=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;n(this,a);var r=Object.assign({blendFunction:qt.NORMAL,focus:.5,focalLength:24,luminanceThreshold:.5,luminanceGain:2,bias:.5,fringe:.7,maxBlur:1,rings:3,samples:2,showFocus:!1,manualDoF:!1,pentagon:!1},t);return o=u(this,s(a).call(this,"RealisticBokehEffect","uniform float focus;\r\nuniform float focalLength;\r\nuniform float maxBlur;\r\nuniform float luminanceThreshold;\r\nuniform float luminanceGain;\r\nuniform float bias;\r\nuniform float fringe;\r\n\r\n#ifdef MANUAL_DOF\r\n\r\n\tuniform vec4 dof;\r\n\r\n#endif\r\n\r\n#ifdef PENTAGON\r\n\r\n\tfloat pentagon(const in vec2 coords) {\r\n\r\n\t\tconst vec4 HS0 = vec4( 1.0,          0.0,         0.0, 1.0);\r\n\t\tconst vec4 HS1 = vec4( 0.309016994,  0.951056516, 0.0, 1.0);\r\n\t\tconst vec4 HS2 = vec4(-0.809016994,  0.587785252, 0.0, 1.0);\r\n\t\tconst vec4 HS3 = vec4(-0.809016994, -0.587785252, 0.0, 1.0);\r\n\t\tconst vec4 HS4 = vec4( 0.309016994, -0.951056516, 0.0, 1.0);\r\n\t\tconst vec4 HS5 = vec4( 0.0,          0.0,         1.0, 1.0);\r\n\r\n\t\tconst vec4 ONE = vec4(1.0);\r\n\r\n\t\tconst float P_FEATHER = 0.4;\r\n\t\tconst float N_FEATHER = -P_FEATHER;\r\n\r\n\t\tfloat inOrOut = -4.0;\r\n\r\n\t\tvec4 P = vec4(coords, vec2(RINGS_FLOAT - 1.3));\r\n\r\n\t\tvec4 dist = vec4(\r\n\t\t\tdot(P, HS0),\r\n\t\t\tdot(P, HS1),\r\n\t\t\tdot(P, HS2),\r\n\t\t\tdot(P, HS3)\r\n\t\t);\r\n\r\n\t\tdist = smoothstep(N_FEATHER, P_FEATHER, dist);\r\n\r\n\t\tinOrOut += dot(dist, ONE);\r\n\r\n\t\tdist.x = dot(P, HS4);\r\n\t\tdist.y = HS5.w - abs(P.z);\r\n\r\n\t\tdist = smoothstep(N_FEATHER, P_FEATHER, dist);\r\n\t\tinOrOut += dist.x;\r\n\r\n\t\treturn clamp(inOrOut, 0.0, 1.0);\r\n\r\n\t}\r\n\r\n#endif\r\n\r\nvec3 processTexel(const in vec2 coords, const in float blur) {\r\n\r\n\tvec3 c = vec3(\r\n\t\ttexture2D(inputBuffer, coords + vec2(0.0, 1.0) * texelSize * fringe * blur).r,\r\n\t\ttexture2D(inputBuffer, coords + vec2(-0.866, -0.5) * texelSize * fringe * blur).g,\r\n\t\ttexture2D(inputBuffer, coords + vec2(0.866, -0.5) * texelSize * fringe * blur).b\r\n\t);\r\n\r\n\t// Calculate the luminance of the constructed color.\r\n\tfloat luminance = linearToRelativeLuminance(c);\r\n\tfloat threshold = max((luminance - luminanceThreshold) * luminanceGain, 0.0);\r\n\r\n\treturn c + mix(vec3(0.0), c, threshold * blur);\r\n\r\n}\r\n\r\nfloat gather(const in float i, const in float j, const in float ringSamples,\r\n\tconst in vec2 uv, const in vec2 blurFactor, const in float blur, inout vec3 color) {\r\n\r\n\tfloat step = PI2 / ringSamples;\r\n\tvec2 wh = vec2(cos(j * step) * i, sin(j * step) * i);\r\n\r\n\t#ifdef PENTAGON\r\n\r\n\t\tfloat p = pentagon(wh);\r\n\r\n\t#else\r\n\r\n\t\tfloat p = 1.0;\r\n\r\n\t#endif\r\n\r\n\tcolor += processTexel(wh * blurFactor + uv, blur) * mix(1.0, i / RINGS_FLOAT, bias) * p;\r\n\r\n\treturn mix(1.0, i / RINGS_FLOAT, bias) * p;\r\n\r\n}\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, const in float depth, out vec4 outputColor) {\r\n\r\n\t// Translate depth into world space units.\r\n\tfloat linearDepth = (-cameraFar * cameraNear / (depth * (cameraFar - cameraNear) - cameraFar));\r\n\r\n\t#ifdef MANUAL_DOF\r\n\r\n\t\tfloat focalPlane = linearDepth - focus;\r\n\t\tfloat farDoF = (focalPlane - dof.z) / dof.w;\r\n\t\tfloat nearDoF = (-focalPlane - dof.x) / dof.y;\r\n\r\n\t\tfloat blur = (focalPlane > 0.0) ? farDoF : nearDoF;\r\n\r\n\t#else\r\n\r\n\t\tconst float CIRCLE_OF_CONFUSION = 0.03; // 35mm film = 0.03mm CoC.\r\n\r\n\t\tfloat focalPlaneMM = focus * 1000.0;\r\n\t\tfloat depthMM = linearDepth * 1000.0;\r\n\r\n\t\tfloat focalPlane = (depthMM * focalLength) / (depthMM - focalLength);\r\n\t\tfloat farDoF = (focalPlaneMM * focalLength) / (focalPlaneMM - focalLength);\r\n\t\tfloat nearDoF = (focalPlaneMM - focalLength) / (focalPlaneMM * focus * CIRCLE_OF_CONFUSION);\r\n\r\n\t\tfloat blur = abs(focalPlane - farDoF) * nearDoF;\r\n\r\n\t#endif\r\n\r\n\tblur = clamp(blur, 0.0, 1.0);\r\n\r\n\tvec2 blurFactor = vec2(\r\n\t\ttexelSize.x * blur * maxBlur,\r\n\t\ttexelSize.y * blur * maxBlur\r\n\t);\r\n\r\n\tconst int MAX_RING_SAMPLES = RINGS_INT * SAMPLES_INT;\r\n\r\n\tvec3 color = inputColor.rgb;\r\n\r\n\tif(blur >= 0.05) {\r\n\r\n\t\tfloat s = 1.0;\r\n\t\tint ringSamples;\r\n\r\n\t\tfor(int i = 1; i <= RINGS_INT; i++) {\r\n\r\n\t\t\tringSamples = i * SAMPLES_INT;\r\n\r\n\t\t\tfor(int j = 0; j < MAX_RING_SAMPLES; j++) {\r\n\r\n\t\t\t\tif(j >= ringSamples) {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ts += gather(float(i), float(j), float(ringSamples), uv, blurFactor, blur, color);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcolor /= s;\r\n\r\n\t}\r\n\r\n\t#ifdef SHOW_FOCUS\r\n\r\n\t\tfloat edge = 0.002 * linearDepth;\r\n\t\tfloat m = clamp(smoothstep(0.0, edge, blur), 0.0, 1.0);\r\n\t\tfloat e = clamp(smoothstep(1.0 - edge, 1.0, blur), 0.0, 1.0);\r\n\r\n\t\tcolor = mix(color, vec3(1.0, 0.5, 0.0), (1.0 - m) * 0.6);\r\n\t\tcolor = mix(color, vec3(0.0, 0.5, 1.0), ((1.0 - e) - (1.0 - m)) * 0.2);\r\n\r\n\t#endif\r\n\r\n\toutputColor = vec4(color, inputColor.a);\r\n\r\n}\r\n",{attributes:ta.CONVOLUTION|ta.DEPTH,blendFunction:r.blendFunction,uniforms:new Map([["focus",new e.Uniform(r.focus)],["focalLength",new e.Uniform(r.focalLength)],["luminanceThreshold",new e.Uniform(r.luminanceThreshold)],["luminanceGain",new e.Uniform(r.luminanceGain)],["bias",new e.Uniform(r.bias)],["fringe",new e.Uniform(r.fringe)],["maxBlur",new e.Uniform(r.maxBlur)]])})),o.rings=r.rings,o.samples=r.samples,o.showFocus=r.showFocus,o.manualDoF=r.manualDoF,o.pentagon=r.pentagon,o}return i(a,t),r(a,[{key:"rings",get:function(){return we(this.defines.get("RINGS_INT"))},set:function(e){e=Le(e),this.defines.set("RINGS_INT",e.toFixed(0)),this.defines.set("RINGS_FLOAT",e.toFixed(1))}},{key:"samples",get:function(){return we(this.defines.get("SAMPLES_INT"))},set:function(e){e=Le(e),this.defines.set("SAMPLES_INT",e.toFixed(0)),this.defines.set("SAMPLES_FLOAT",e.toFixed(1))}},{key:"showFocus",get:function(){return this.defines.has("SHOW_FOCUS")},set:function(e){e?this.defines.set("SHOW_FOCUS","1"):this.defines.delete("SHOW_FOCUS")}},{key:"manualDoF",get:function(){return this.defines.has("MANUAL_DOF")},set:function(t){t?(this.defines.set("MANUAL_DOF","1"),this.uniforms.set("dof",new e.Uniform(new e.Vector4(.2,1,.2,2)))):(this.defines.delete("MANUAL_DOF"),this.uniforms.delete("dof"))}},{key:"pentagon",get:function(){return this.defines.has("PENTAGON")},set:function(e){e?this.defines.set("PENTAGON","1"):this.defines.delete("PENTAGON")}}]),a}(ea),wa=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;n(this,a);var r=Object.assign({blendFunction:qt.OVERLAY,density:1.25},t);return o=u(this,s(a).call(this,"ScanlineEffect","uniform float count;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec2 sl = vec2(sin(uv.y * count), cos(uv.y * count));\r\n\tvec3 scanlines = vec3(sl.x, sl.y, sl.x);\r\n\r\n\toutputColor = vec4(scanlines, inputColor.a);\r\n\r\n}\r\n",{blendFunction:r.blendFunction,uniforms:new Map([["count",new e.Uniform(0)]])})),o.resolution=new e.Vector2,o.density=r.density,o}return i(a,t),r(a,[{key:"getDensity",value:function(){return this.density}},{key:"setDensity",value:function(e){this.density=e,this.setSize(this.resolution.x,this.resolution.y)}},{key:"setSize",value:function(e,t){this.resolution.set(e,t),this.uniforms.get("count").value=Fe(t*this.density)}}]),a}(ea),Pa=new e.Vector3,Ma=new e.Vector3,Ta=function(t){function a(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new e.Vector3,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i;n(this,a);var l=Object.assign({speed:2,maxRadius:1,waveSize:.2,amplitude:.05},r);return i=u(this,s(a).call(this,"ShockWaveEffect","uniform bool active;\r\nuniform vec2 center;\r\nuniform float waveSize;\r\nuniform float radius;\r\nuniform float maxRadius;\r\nuniform float amplitude;\r\n\r\nvarying float vSize;\r\n\r\nvoid mainUv(inout vec2 uv) {\r\n\r\n\tif(active) {\r\n\r\n\t\tvec2 aspectCorrection = vec2(aspect, 1.0);\r\n\t\tvec2 difference = uv * aspectCorrection - center * aspectCorrection;\r\n\t\tfloat distance = sqrt(dot(difference, difference)) * vSize;\r\n\r\n\t\tif(distance > radius) {\r\n\r\n\t\t\tif(distance < radius + waveSize) {\r\n\r\n\t\t\t\tfloat angle = (distance - radius) * PI2 / waveSize;\r\n\t\t\t\tfloat cosSin = (1.0 - cos(angle)) * 0.5;\r\n\r\n\t\t\t\tfloat extent = maxRadius + waveSize;\r\n\t\t\t\tfloat decay = max(extent - distance * distance, 0.0) / extent;\r\n\r\n\t\t\t\tuv -= ((cosSin * amplitude * difference) / distance) * decay;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n",{uniforms:new Map([["active",new e.Uniform(!1)],["center",new e.Uniform(new e.Vector2(.5,.5))],["cameraDistance",new e.Uniform(1)],["size",new e.Uniform(1)],["radius",new e.Uniform(-l.waveSize)],["maxRadius",new e.Uniform(l.maxRadius)],["waveSize",new e.Uniform(l.waveSize)],["amplitude",new e.Uniform(l.amplitude)]]),vertexShader:"uniform float size;\r\nuniform float cameraDistance;\r\n\r\nvarying float vSize;\r\n\r\nvoid mainSupport() {\r\n\r\n\tvSize = (0.1 * cameraDistance) / size;\r\n\r\n}\r\n"})),i.camera=t,i.epicenter=o,i.screenPosition=i.uniforms.get("center").value,i.speed=l.speed,i.time=0,i.active=!1,i}return i(a,t),r(a,[{key:"explode",value:function(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}},{key:"update",value:function(e,t,a){var n=this.epicenter,o=this.camera,r=this.uniforms,i;if(this.active){var s=r.get("waveSize").value;o.getWorldDirection(Pa),Ma.copy(o.position).sub(n),Pa.angleTo(Ma)>.5*De&&(r.get("cameraDistance").value=o.position.distanceTo(n),Pa.copy(n).project(o),this.screenPosition.set(.5*(Pa.x+1),.5*(Pa.y+1))),this.time+=a*this.speed,i=this.time-s,r.get("radius").value=i,i>=2*(r.get("maxRadius").value+s)&&(this.active=!1,r.get("active").value=!1)}}}]),a}(ea),za=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,a);var o=Object.assign({blendFunction:qt.NORMAL,intensity:1},t);return u(this,s(a).call(this,"SepiaEffect","uniform float intensity;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tvec3 color = vec3(\r\n\t\tdot(inputColor.rgb, vec3(1.0 - 0.607 * intensity, 0.769 * intensity, 0.189 * intensity)),\r\n\t\tdot(inputColor.rgb, vec3(0.349 * intensity, 1.0 - 0.314 * intensity, 0.168 * intensity)),\r\n\t\tdot(inputColor.rgb, vec3(0.272 * intensity, 0.534 * intensity, 1.0 - 0.869 * intensity))\r\n\t);\r\n\r\n\toutputColor = vec4(color, inputColor.a);\r\n\r\n}\r\n",{blendFunction:o.blendFunction,uniforms:new Map([["intensity",new e.Uniform(o.intensity)]])}))}return i(a,t),a}(ea),La=function(t){function a(t,o){var r;return n(this,a),r=u(this,s(a).call(this,"SMAAEffect","uniform sampler2D weightMap;\r\nvarying vec4 vOffset;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\t// Fetch the blending weights for the current pixel.\r\n\tvec4 a;\r\n\ta.xz = texture2D(weightMap, uv).xz;\r\n\ta.y = texture2D(weightMap, vOffset.zw).g;\r\n\ta.w = texture2D(weightMap, vOffset.xy).a;\r\n\r\n\tvec4 color = inputColor;\r\n\r\n\t// Ignore tiny blending weights.\r\n\tif(dot(a, vec4(1.0)) >= 1e-5) {\r\n\r\n\t\t/* Up to four lines can be crossing a pixel (one through each edge).\r\n\t\t * The line with the maximum weight for each direction is favoured.\r\n\t\t */\r\n\r\n\t\tvec2 offset = vec2(\r\n\t\t\ta.a > a.b ? a.a : -a.b,\t// Left vs. right.\r\n\t\t\ta.g > a.r ? -a.g : a.r\t// Top vs. bottom (changed signs).\r\n\t\t);\r\n\r\n\t\t// Go in the direction with the maximum weight (horizontal vs. vertical).\r\n\t\tif(abs(offset.x) > abs(offset.y)) {\r\n\r\n\t\t\toffset.y = 0.0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\toffset.x = 0.0;\r\n\r\n\t\t}\r\n\r\n\t\t// Fetch the opposite color and lerp by hand.\r\n\t\tvec4 oppositeColor = texture2D(inputBuffer, uv + sign(offset) * texelSize);\r\n\t\tfloat s = abs(offset.x) > abs(offset.y) ? abs(offset.x) : abs(offset.y);\r\n\r\n\t\t// Gamma correction.\r\n\t\tcolor.rgb = pow(abs(color.rgb), vec3(2.2));\r\n\t\toppositeColor.rgb = pow(abs(oppositeColor.rgb), vec3(2.2));\r\n\t\tcolor = mix(color, oppositeColor, s);\r\n\t\tcolor.rgb = pow(abs(color.rgb), vec3(1.0 / 2.2));\r\n\r\n\t}\r\n\r\n\toutputColor = color;\r\n\r\n}\r\n",{attributes:ta.CONVOLUTION,blendFunction:qt.NORMAL,uniforms:new Map([["weightMap",new e.Uniform(null)]]),vertexShader:"varying vec4 vOffset;\r\n\r\nvoid mainSupport() {\r\n\r\n\tvOffset = uv.xyxy + texelSize.xyxy * vec4(1.0, 0.0, 0.0, -1.0); // Changed sign in W component.\r\n\r\n}\r\n"})),r.renderTargetColorEdges=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearFilter,format:e.RGBFormat,stencilBuffer:!1,depthBuffer:!1}),r.renderTargetColorEdges.texture.name="SMAA.ColorEdges",r.renderTargetColorEdges.texture.generateMipmaps=!1,r.renderTargetWeights=r.renderTargetColorEdges.clone(),r.renderTargetWeights.texture.name="SMAA.Weights",r.renderTargetWeights.texture.format=e.RGBAFormat,r.uniforms.get("weightMap").value=r.renderTargetWeights.texture,r.clearPass=new Jt({clearColor:new e.Color(0),clearAlpha:1}),r.colorEdgesPass=new ia(new Ft()),r.weightsPass=new ia(new Yt()),r.weightsPass.getFullscreenMaterial().uniforms.searchTexture.value=function(){var a=new e.Texture(t);return a.name="SMAA.Search",a.magFilter=e.NearestFilter,a.minFilter=e.NearestFilter,a.format=e.RGBAFormat,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!1,a}(),r.weightsPass.getFullscreenMaterial().uniforms.areaTexture.value=function(){var t=new e.Texture(o);return t.name="SMAA.Area",t.minFilter=e.LinearFilter,t.format=e.RGBAFormat,t.generateMipmaps=!1,t.needsUpdate=!0,t.flipY=!1,t}(),r}return i(a,t),r(a,[{key:"setEdgeDetectionThreshold",value:function(e){this.colorEdgesPass.getFullscreenMaterial().setEdgeDetectionThreshold(e)}},{key:"setOrthogonalSearchSteps",value:function(e){this.weightsPass.getFullscreenMaterial().setOrthogonalSearchSteps(e)}},{key:"update",value:function(e,t){this.clearPass.render(e,this.renderTargetColorEdges),this.colorEdgesPass.render(e,t,this.renderTargetColorEdges),this.weightsPass.render(e,this.renderTargetColorEdges,this.renderTargetWeights)}},{key:"setSize",value:function(e,t){this.renderTargetColorEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t),this.colorEdgesPass.getFullscreenMaterial().uniforms.texelSize.value.copy(this.weightsPass.getFullscreenMaterial().uniforms.texelSize.value.set(1/e,1/t))}}],[{key:"searchImageDataURL",get:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII"}},{key:"areaImageDataURL",get:function(){return"data:image/png;base64,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"}}]),a}(ea),Fa=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;n(this,a);var r=Object.assign({blendFunction:qt.NORMAL,texture:null,aspectCorrection:!1},t);return o=u(this,s(a).call(this,"TextureEffect",da,{blendFunction:r.blendFunction,uniforms:new Map([["texture",new e.Uniform(r.texture)]])})),o.aspectCorrection=r.aspectCorrection,o}return i(a,t),r(a,[{key:"aspectCorrection",get:function(){return this.defines.has("ASPECT_CORRECTION")},set:function(t){t?(this.defines.set("ASPECT_CORRECTION","1"),this.uniforms.set("scale",new e.Uniform(1)),this.vertexShader="uniform float scale;\r\n\r\nvarying vec2 vUv2;\r\n\r\nvoid mainSupport() {\r\n\r\n\tvUv2 = uv * vec2(aspect, 1.0) * scale;\r\n\r\n}\r\n"):(this.defines.delete("ASPECT_CORRECTION"),this.uniforms.delete("scale"),this.vertexShader=null)}}]),a}(ea),Ia=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;n(this,a);var r=Object.assign({blendFunction:qt.NORMAL,adaptive:!0,resolution:256,distinction:1,middleGrey:.6,maxLuminance:16,averageLuminance:1,adaptationRate:2},t);return o=u(this,s(a).call(this,"ToneMappingEffect","uniform sampler2D luminanceMap;\r\nuniform float middleGrey;\r\nuniform float maxLuminance;\r\nuniform float averageLuminance;\r\n\r\nvec3 toneMap(vec3 c) {\r\n\r\n\t#ifdef ADAPTED_LUMINANCE\r\n\r\n\t\t// Get the calculated average luminance by sampling the center.\r\n\t\tfloat lumAvg = texture2D(luminanceMap, vec2(0.5)).r;\r\n\r\n\t#else\r\n\r\n\t\tfloat lumAvg = averageLuminance;\r\n\r\n\t#endif\r\n\r\n\t// Calculate the luminance of the current pixel.\r\n\tfloat lumPixel = linearToRelativeLuminance(c);\r\n\r\n\t// Apply the modified operator (Reinhard Eq. 4).\r\n\tfloat lumScaled = (lumPixel * middleGrey) / lumAvg;\r\n\r\n\tfloat lumCompressed = (lumScaled * (1.0 + (lumScaled / (maxLuminance * maxLuminance)))) / (1.0 + lumScaled);\r\n\r\n\treturn lumCompressed * c;\r\n\r\n}\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\toutputColor = vec4(toneMap(inputColor.rgb), inputColor.a);\r\n\r\n}\r\n",{blendFunction:r.blendFunction,uniforms:new Map([["luminanceMap",new e.Uniform(null)],["middleGrey",new e.Uniform(r.middleGrey)],["maxLuminance",new e.Uniform(r.maxLuminance)],["averageLuminance",new e.Uniform(r.averageLuminance)]])})),o.renderTargetLuminance=new e.WebGLRenderTarget(1,1,{minFilter:e.LinearMipMapLinearFilter,magFilter:e.LinearFilter,format:e.RGBFormat,stencilBuffer:!1,depthBuffer:!1}),o.renderTargetLuminance.texture.name="ToneMapping.Luminance",o.renderTargetAdapted=o.renderTargetLuminance.clone(),o.renderTargetAdapted.texture.name="ToneMapping.AdaptedLuminance",o.renderTargetAdapted.texture.generateMipmaps=!1,o.renderTargetAdapted.texture.minFilter=e.LinearFilter,o.renderTargetPrevious=o.renderTargetAdapted.clone(),o.renderTargetPrevious.texture.name="ToneMapping.PreviousLuminance",o.savePass=new ra(o.renderTargetPrevious,!1),o.luminancePass=new ia(new Vt()),o.adaptiveLuminancePass=new ia(new Lt()),o.adaptationRate=r.adaptationRate,o.distinction=r.distinction,o.resolution=r.resolution,o.adaptive=r.adaptive,o}return i(a,t),r(a,[{key:"update",value:function(e,t,a){if(this.adaptive){this.luminancePass.render(e,t,this.renderTargetLuminance);var n=this.adaptiveLuminancePass.getFullscreenMaterial().uniforms;n.previousLuminanceBuffer.value=this.renderTargetPrevious.texture,n.currentLuminanceBuffer.value=this.renderTargetLuminance.texture,n.delta.value=a,this.adaptiveLuminancePass.render(e,null,this.renderTargetAdapted),this.savePass.render(e,this.renderTargetAdapted)}}},{key:"setSize",value:function(e,t){this.savePass.setSize(e,t)}},{key:"initialize",value:function(t){var a=new Jt({clearColor:new e.Color(8388607)});a.render(t,this.renderTargetPrevious),a.dispose()}},{key:"resolution",get:function(){return this.renderTargetLuminance.width},set:function(e){var t=Te(0,ke(Ee(e)));e=Pe(2,t),this.renderTargetLuminance.setSize(e,e),this.renderTargetPrevious.setSize(e,e),this.renderTargetAdapted.setSize(e,e),this.adaptiveLuminancePass.getFullscreenMaterial().defines.MIP_LEVEL_1X1=t.toFixed(1)}},{key:"adaptive",get:function(){return this.defines.has("ADAPTED_LUMINANCE")},set:function(e){e?(this.defines.set("ADAPTED_LUMINANCE","1"),this.uniforms.get("luminanceMap").value=this.renderTargetAdapted.texture):(this.defines.delete("ADAPTED_LUMINANCE"),this.uniforms.get("luminanceMap").value=null)}},{key:"adaptationRate",get:function(){return this.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value},set:function(e){this.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value=e}},{key:"distinction",get:function(){return this.luminancePass.getFullscreenMaterial().uniforms.distinction.value},set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.luminancePass.getFullscreenMaterial().uniforms.distinction.value=e}}]),a}(ea),Ra=function(t){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o;n(this,a);var r=Object.assign({blendFunction:qt.NORMAL,eskil:!1,offset:.5,darkness:.5},t);return o=u(this,s(a).call(this,"VignetteEffect","uniform float offset;\r\nuniform float darkness;\r\n\r\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\r\n\r\n\tconst vec2 center = vec2(0.5);\r\n\tvec3 color = inputColor.rgb;\r\n\r\n\t#ifdef ESKIL\r\n\r\n\t\tvec2 coord = (uv - center) * vec2(offset);\r\n\t\tcolor = mix(color, vec3(1.0 - darkness), dot(coord, coord));\r\n\r\n\t#else\r\n\r\n\t\tfloat d = distance(uv, center);\r\n\t\tcolor *= smoothstep(0.8, offset * 0.799, d * (darkness + offset));\r\n\r\n\t#endif\r\n\r\n\toutputColor = vec4(color, inputColor.a);\r\n\r\n}\r\n",{blendFunction:r.blendFunction,uniforms:new Map([["offset",new e.Uniform(r.offset)],["darkness",new e.Uniform(r.darkness)]])})),o.eskil=r.eskil,o}return i(a,t),r(a,[{key:"eskil",get:function(){return this.defines.has("ESKIL")},set:function(e){e?this.defines.set("ESKIL","1"):this.defines.delete("ESKIL")}}]),a}(ea),Oa=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:4;n(this,e),this.width=t,this.height=a,this.data=o,this.channels=r}return r(e,[{key:"toCanvas",value:function(){return"undefined"==typeof document?null:$(this.width,this.height,this.data,this.channels)}}]),e}(),Ga=new e.Box2,Ua=new e.Box2,_a=16,Ha=20,Qa=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),Va=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],Na=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],Ya=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])],Xa=function(){function t(){n(this,t)}return r(t,null,[{key:"generate",value:function(){var t=10*_a,a=5*Qa.length*_a,n=new Uint8ClampedArray(2*(t*a)),o=new Oa(t,a,n,2),r=226,s=Ha,d=[],c=[],u=new e.Vector2,g,m;for(g=0;16>g;++g)d.push(new Oa(r,r,new Uint8ClampedArray(2*(r*r)),2)),c.push(new Oa(s,s,new Uint8ClampedArray(2*(s*s)),2));for(g=0,m=Qa.length;g<m;++g)de(d,Qa[g],!0),u.set(0,5*_a*g),ce(u,d,Na,_a,!0,o);for(g=0,m=Va.length;g<m;++g)de(c,Va[g],!1),u.set(5*_a,4*Ha*g),ce(u,c,Ya,Ha,!1,o);return o}}]),t}(),Wa=new Map([[ge([0,0,0,0]),[0,0,0,0]],[ge([0,0,0,1]),[0,0,0,1]],[ge([0,0,1,0]),[0,0,1,0]],[ge([0,0,1,1]),[0,0,1,1]],[ge([0,1,0,0]),[0,1,0,0]],[ge([0,1,0,1]),[0,1,0,1]],[ge([0,1,1,0]),[0,1,1,0]],[ge([0,1,1,1]),[0,1,1,1]],[ge([1,0,0,0]),[1,0,0,0]],[ge([1,0,0,1]),[1,0,0,1]],[ge([1,0,1,0]),[1,0,1,0]],[ge([1,0,1,1]),[1,0,1,1]],[ge([1,1,0,0]),[1,1,0,0]],[ge([1,1,0,1]),[1,1,0,1]],[ge([1,1,1,0]),[1,1,1,0]],[ge([1,1,1,1]),[1,1,1,1]]]),ja=function(){function e(){n(this,e)}return r(e,null,[{key:"generate",value:function(){var e=33,a=64,n=16,o=new Uint8ClampedArray(66*e),r=new Uint8ClampedArray(a*n),l,d,c,u,g,m,p;for(d=0;d<e;++d)for(l=0;66>l;++l)c=.03125*l,u=.03125*d,Wa.has(c)&&Wa.has(u)&&(m=Wa.get(c),p=Wa.get(u),o[66*d+l]=127*me(m,p),o[66*d+l+33]=127*pe(m,p));for(g=0,d=e-n;d<e;++d)for(l=0;l<a;++l,++g)r[g]=o[66*d+l];return new Oa(a,n,r,1)}}]),e}(),Ka={MOVE_FORWARD:0,MOVE_LEFT:1,MOVE_BACKWARD:2,MOVE_RIGHT:3,MOVE_DOWN:4,MOVE_UP:5,ZOOM_OUT:6,ZOOM_IN:7},Ja=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,e),this.x=t,this.y=a,this.z=o}return r(e,[{key:"set",value:function(e,t,a){return this.x=e,this.y=t,this.z=a,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"setFromSpherical",value:function(e){this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,a){var n=Be(t)*e;return this.x=n*Be(a),this.y=Se(t)*e,this.z=n*Se(a),this}},{key:"setFromCylindrical",value:function(e){this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,a){return this.x=e*Be(t),this.y=a,this.z=e*Se(t),this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=a,this.z=n,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.x/=e,this.y/=e,this.z/=e,this}},{key:"crossVectors",value:function(e,t){var a=e.x,n=e.y,o=e.z,r=t.x,i=t.y,s=t.z;return this.x=n*s-o*i,this.y=o*r-a*s,this.z=a*i-n*r,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"transformDirection",value:function(t){var a=this.x,n=this.y,o=this.z,r=t.elements;return this.x=r[0]*a+r[4]*n+r[8]*o,this.y=r[1]*a+r[5]*n+r[9]*o,this.z=r[2]*a+r[6]*n+r[10]*o,this.normalize()}},{key:"applyMatrix3",value:function(t){var a=this.x,n=this.y,o=this.z,r=t.elements;return this.x=r[0]*a+r[3]*n+r[6]*o,this.y=r[1]*a+r[4]*n+r[7]*o,this.z=r[2]*a+r[5]*n+r[8]*o,this}},{key:"applyMatrix4",value:function(t){var a=this.x,n=this.y,o=this.z,r=t.elements;return this.x=r[0]*a+r[4]*n+r[8]*o+r[12],this.y=r[1]*a+r[5]*n+r[9]*o+r[13],this.z=r[2]*a+r[6]*n+r[10]*o+r[14],this}},{key:"applyQuaternion",value:function(e){var t=this.x,a=this.y,n=this.z,o=e.x,r=e.y,i=e.z,s=e.w,l=s*t+r*n-i*a,d=s*a+i*t-o*n,c=s*n+o*a-r*t,u=-o*t-r*a-i*n;return this.x=l*s+u*-o+d*-i-c*-r,this.y=d*s+u*-r+c*-o-l*-i,this.z=c*s+u*-i+l*-r-d*-o,this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"reflect",value:function(e){var t=e.x,a=e.y,n=e.z;return this.sub(e.multiplyScalar(2*this.dot(e))),e.set(t,a,n),this}},{key:"angleTo",value:function(e){var t=this.dot(e)/be(this.lengthSquared()*e.lengthSquared());return he(ze(Te(t,-1),1))}},{key:"manhattanLength",value:function(){return Me(this.x)+Me(this.y)+Me(this.z)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return be(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanDistanceTo",value:function(e){return Me(this.x-e.x)+Me(this.y-e.y)+Me(this.z-e.z)}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,a=this.y-e.y,n=this.z-e.z;return t*t+a*a+n*n}},{key:"distanceTo",value:function(e){return be(this.distanceToSquared(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"min",value:function(e){return this.x=ze(this.x,e.x),this.y=ze(this.y,e.y),this.z=ze(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Te(this.x,e.x),this.y=Te(this.y,e.y),this.z=Te(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Te(e.x,ze(t.x,this.x)),this.y=Te(e.y,ze(t.y,this.y)),this.z=Te(e.z,ze(t.z,this.z)),this}},{key:"floor",value:function(){return this.x=Le(this.x),this.y=Le(this.y),this.z=Le(this.z),this}},{key:"ceil",value:function(){return this.x=ke(this.x),this.y=ke(this.y),this.z=ke(this.z),this}},{key:"round",value:function(){return this.x=Fe(this.x),this.y=Fe(this.y),this.z=Fe(this.z),this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}}]),e}(),qa=new Ja,Za=[new Ja,new Ja,new Ja,new Ja,new Ja,new Ja,new Ja,new Ja],$a=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja(1/0,1/0,1/0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ja(-Infinity,-Infinity,-Infinity);n(this,e),this.min=t,this.max=a}return r(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-Infinity,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"setFromSphere",value:function(e){return this.set(e.center,e.center),this.expandByScalar(e.radius),this}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"setFromPoints",value:function(e){var t,a;for(this.min.set(0,0,0),this.max.set(0,0,0),(t=0,a=e.length);t<a;++t)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var a=qa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}},{key:"clampPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ja;return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=qa.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"applyMatrix4",value:function(e){var t=this.min,a=this.max;return this.isEmpty()||(Za[0].set(t.x,t.y,t.z).applyMatrix4(e),Za[1].set(t.x,t.y,a.z).applyMatrix4(e),Za[2].set(t.x,a.y,t.z).applyMatrix4(e),Za[3].set(t.x,a.y,a.z).applyMatrix4(e),Za[4].set(a.x,t.y,t.z).applyMatrix4(e),Za[5].set(a.x,t.y,a.z).applyMatrix4(e),Za[6].set(a.x,a.y,t.z).applyMatrix4(e),Za[7].set(a.x,a.y,a.z).applyMatrix4(e),this.setFromPoints(Za)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"containsPoint",value:function(e){var t=this.min,a=this.max;return e.x>=t.x&&e.y>=t.y&&e.z>=t.z&&e.x<=a.x&&e.y<=a.y&&e.z<=a.z}},{key:"containsBox",value:function(e){var t=this.min,a=this.max,n=e.min,o=e.max;return t.x<=n.x&&o.x<=a.x&&t.y<=n.y&&o.y<=a.y&&t.z<=n.z&&o.z<=a.z}},{key:"intersectsBox",value:function(e){var t=this.min,a=this.max,n=e.min,o=e.max;return o.x>=t.x&&o.y>=t.y&&o.z>=t.z&&n.x<=a.x&&n.y<=a.y&&n.z<=a.z}},{key:"intersectsSphere",value:function(e){var t=this.clampPoint(e.center,qa);return t.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,a;return 0<e.normal.x?(t=e.normal.x*this.min.x,a=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,a=e.normal.x*this.min.x),0<e.normal.y?(t+=e.normal.y*this.min.y,a+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,a+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,a+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,a+=e.normal.z*this.min.z),t<=-e.constant&&a>=-e.constant}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),en=new $a,tn=new Ja,an=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.center=t,this.radius=a}return r(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"setFromPoints",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:en.setFromPoints(e).getCenter(this.center),a=0,n,o;for(n=0,o=e.length;n<o;++n)a=Te(a,t.distanceToSquared(e[n]));return this.radius=be(a),this}},{key:"setFromBox",value:function(e){return e.getCenter(this.center),this.radius=.5*e.getSize(tn).length(),this}},{key:"isEmpty",value:function(){return 0>=this.radius}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"clampPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ja,a=this.center.distanceToSquared(e);return t.copy(e),a>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Me(e.distanceToPoint(this.center))<=this.radius}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}]),e}(),nn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.x=t,this.y=a}return r(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.x/=e,this.y/=e,this}},{key:"applyMatrix3",value:function(t){var a=this.x,n=this.y,o=t.elements;return this.x=o[0]*a+o[3]*n+o[6],this.y=o[1]*a+o[4]*n+o[7],this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"manhattanLength",value:function(){return Me(this.x)+Me(this.y)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return be(this.x*this.x+this.y*this.y)}},{key:"manhattanDistanceTo",value:function(e){return Me(this.x-e.x)+Me(this.y-e.y)}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,a=this.y-e.y;return t*t+a*a}},{key:"distanceTo",value:function(e){return be(this.distanceToSquared(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"min",value:function(e){return this.x=ze(this.x,e.x),this.y=ze(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Te(this.x,e.x),this.y=Te(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Te(e.x,ze(t.x,this.x)),this.y=Te(e.y,ze(t.y,this.y)),this}},{key:"floor",value:function(){return this.x=Le(this.x),this.y=Le(this.y),this}},{key:"ceil",value:function(){return this.x=ke(this.x),this.y=ke(this.y),this}},{key:"round",value:function(){return this.x=Fe(this.x),this.y=Fe(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"angle",value:function e(){var e=xe(this.y,this.x);return 0>e&&(e+=2*De),e}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:"rotateAround",value:function(e,t){var a=Se(t),n=Be(t),o=this.x-e.x,r=this.y-e.y;return this.x=o*a-r*n+e.x,this.y=o*n+r*a+e.y,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"width",get:function(){return this.x},set:function(e){return this.x=e}},{key:"height",get:function(){return this.y},set:function(e){return this.y=e}}]),e}(),on=new nn,rn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new nn(1/0,1/0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new nn(-Infinity,-Infinity);n(this,e),this.min=t,this.max=a}return r(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-Infinity,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new nn;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new nn;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"getBoundingSphere",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new an;return this.getCenter(e.center),e.radius=.5*this.getSize(on).length(),e}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"setFromPoints",value:function(e){var t,a;for(this.min.set(0,0),this.max.set(0,0),(t=0,a=e.length);t<a;++t)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var a=on.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}},{key:"clampPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new nn;return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){var t=on.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"containsPoint",value:function(e){var t=this.min,a=this.max;return e.x>=t.x&&e.y>=t.y&&e.x<=a.x&&e.y<=a.y}},{key:"containsBox",value:function(e){var t=this.min,a=this.max,n=e.min,o=e.max;return t.x<=n.x&&o.x<=a.x&&t.y<=n.y&&o.y<=a.y}},{key:"intersectsBox",value:function(e){var t=this.min,a=this.max,n=e.min,o=e.max;return o.x>=t.x&&o.y>=t.y&&n.x<=a.x&&n.y<=a.y}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),sn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,e),this.radius=t,this.theta=a,this.y=o}return r(e,[{key:"set",value:function(e,t,a){return this.radius=e,this.theta=t,this.y=a,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,a){return this.radius=be(e*e+a*a),this.theta=xe(e,a),this.y=t,this}}]),e}(),ln=function(){function e(){n(this,e),this.elements=new Float32Array([1,0,0,0,1,0,0,0,1])}return r(e,[{key:"set",value:function(e,t,a,n,o,r,i,s,l){var d=this.elements;return d[0]=e,d[3]=t,d[6]=a,d[1]=n,d[4]=o,d[7]=r,d[2]=i,d[5]=s,d[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=e.elements,a=this.elements;return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],this}},{key:"clone",value:function(){return new this.constructor().fromArray(this.elements)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n;for(n=0;9>n;++n)a[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n;for(n=0;9>n;++n)e[n+t]=a[n];return e}},{key:"multiplyMatrices",value:function(e,t){var a=e.elements,n=t.elements,o=this.elements,r=a[0],i=a[3],s=a[6],l=a[1],d=a[4],c=a[7],u=a[2],g=a[5],m=a[8],p=n[0],f=n[3],y=n[6],v=n[1],A=n[4],x=n[7],h=n[2],C=n[5],b=n[8];return o[0]=r*p+i*v+s*h,o[3]=r*f+i*A+s*C,o[6]=r*y+i*x+s*b,o[1]=l*p+d*v+c*h,o[4]=l*f+d*A+c*C,o[7]=l*y+d*x+c*b,o[2]=u*p+g*v+m*h,o[5]=u*f+g*A+m*C,o[8]=u*y+g*x+m*b,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var t=this.elements,n=t[0],a=t[1],o=t[2],r=t[3],s=t[4],e=t[5],l=t[6],d=t[7],c=t[8];return n*s*c-n*e*d-a*r*c+a*e*l+o*r*d-o*s*l}},{key:"getInverse",value:function(e){var t=e.elements,a=this.elements,n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],l=t[5],d=t[6],c=t[7],u=t[8],g=u*s-l*c,m=l*d-u*i,p=c*i-s*d,f=n*g+o*m+r*p,y;return 0===f?(console.error("Can't invert matrix, determinant is zero",e),this.identity()):(y=1/f,a[0]=g*y,a[1]=(r*c-u*o)*y,a[2]=(l*o-r*s)*y,a[3]=m*y,a[4]=(u*n-r*d)*y,a[5]=(r*i-l*n)*y,a[6]=p*y,a[7]=(o*d-c*n)*y,a[8]=(s*n-o*i)*y),this}},{key:"transpose",value:function(){var e=this.elements,a;return a=e[1],e[1]=e[3],e[3]=a,a=e[2],e[2]=e[6],e[6]=a,a=e[5],e[5]=e[7],e[7]=a,this}},{key:"scale",value:function(e,t){var a=this.elements;return a[0]*=e,a[3]*=e,a[6]*=e,a[1]*=t,a[4]*=t,a[7]*=t,this}},{key:"rotate",value:function(e){var t=Se(e),a=Be(e),n=this.elements,o=n[0],r=n[3],i=n[6],s=n[1],l=n[4],d=n[7];return n[0]=t*o+a*s,n[3]=t*r+a*l,n[6]=t*i+a*d,n[1]=-a*o+t*s,n[4]=-a*r+t*l,n[7]=-a*i+t*d,this}},{key:"translate",value:function(e,t){var a=this.elements;return a[0]+=e*a[2],a[3]+=e*a[5],a[6]+=e*a[8],a[1]+=t*a[2],a[4]+=t*a[5],a[7]+=t*a[8],this}},{key:"equals",value:function(e){var t=this.elements,a=e.elements,n=!0,o;for(o=0;n&&9>o;++o)t[o]!==a[o]&&(n=!1);return n}}]),e}(),dn={XYZ:"XYZ",YZX:"YZX",ZXY:"ZXY",XZY:"XZY",YXZ:"YXZ",ZYX:"ZYX"},cn=new Ja,un=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;n(this,e),this.x=t,this.y=a,this.z=o,this.w=r}var a=Number.EPSILON;return r(e,[{key:"set",value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.w=n,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"setFromEuler",value:function(e){var t=e.x,a=e.y,n=e.z,o=Se,r=Be,i=o(t/2),s=o(a/2),l=o(n/2),d=r(t/2),c=r(a/2),u=r(n/2);switch(e.order){case dn.XYZ:this.x=d*s*l+i*c*u,this.y=i*c*l-d*s*u,this.z=i*s*u+d*c*l,this.w=i*s*l-d*c*u;break;case dn.YXZ:this.x=d*s*l+i*c*u,this.y=i*c*l-d*s*u,this.z=i*s*u-d*c*l,this.w=i*s*l+d*c*u;break;case dn.ZXY:this.x=d*s*l-i*c*u,this.y=i*c*l+d*s*u,this.z=i*s*u+d*c*l,this.w=i*s*l-d*c*u;break;case dn.ZYX:this.x=d*s*l-i*c*u,this.y=i*c*l+d*s*u,this.z=i*s*u-d*c*l,this.w=i*s*l+d*c*u;break;case dn.YZX:this.x=d*s*l+i*c*u,this.y=i*c*l+d*s*u,this.z=i*s*u-d*c*l,this.w=i*s*l-d*c*u;break;case dn.XZY:this.x=d*s*l-i*c*u,this.y=i*c*l-d*s*u,this.z=i*s*u+d*c*l,this.w=i*s*l+d*c*u;}return this}},{key:"setFromAxisAngle",value:function(e,t){var a=t/2,n=Be(a);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Se(a),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,a=t[0],n=t[4],o=t[8],r=t[1],i=t[5],l=t[9],d=t[2],c=t[6],u=t[10],g=a+i+u,m;return 0<g?(m=.5/be(g+1),this.w=.25/m,this.x=(c-l)*m,this.y=(o-d)*m,this.z=(r-n)*m):a>i&&a>u?(m=2*be(1+a-i-u),this.w=(c-l)/m,this.x=.25*m,this.y=(n+r)/m,this.z=(o+d)/m):i>u?(m=2*be(1+i-a-u),this.w=(o-d)/m,this.x=(n+r)/m,this.y=.25*m,this.z=(l+c)/m):(m=2*be(1+u-a-i),this.w=(r-n)/m,this.x=(o+d)/m,this.y=(l+c)/m,this.z=.25*m),this}},{key:"setFromUnitVectors",value:function(e,t){var a=e.dot(t)+1;return 1e-6>a?(a=0,Me(e.x)>Me(e.z)?cn.set(-e.y,e.x,0):cn.set(0,-e.z,e.y)):cn.crossVectors(e,t),this.x=cn.x,this.y=cn.y,this.z=cn.z,this.w=a,this.normalize()}},{key:"angleTo",value:function(e){return 2*he(Me(ze(Te(this.dot(e),-1),1)))}},{key:"rotateTowards",value:function(e,t){var a=this.angleTo(e);return 0!==a&&this.slerp(e,ze(1,t/a)),this}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return be(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"normalize",value:function(){var e=this.length(),t;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/e,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"multiplyQuaternions",value:function(e,t){var a=e.x,n=e.y,o=e.z,r=e.w,i=t.x,s=t.y,l=t.z,d=t.w;return this.x=a*d+r*i+n*l-o*s,this.y=n*d+r*s+o*i-a*l,this.z=o*d+r*l+a*s-n*i,this.w=r*d-a*i-n*s-o*l,this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"slerp",value:function(e,n){var t=this.x,o=this.y,r=this.z,i=this.w,l,d,c,u,g,m,p;return 1===n?this.copy(e):0<n&&(l=i*e.w+t*e.x+o*e.y+r*e.z,0>l?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,l=-l):this.copy(e),1<=l?(this.w=i,this.x=t,this.y=o,this.z=r):(d=1-l*l,g=1-n,d<=a?(this.w=g*i+n*this.w,this.x=g*t+n*this.x,this.y=g*o+n*this.y,this.z=g*r+n*this.z,this.normalize()):(c=be(d),u=xe(c,l),m=Be(g*u)/c,p=Be(n*u)/c,this.w=i*m+this.w*p,this.x=t*m+this.x*p,this.y=o*m+this.y*p,this.z=r*m+this.z*p))),this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}}],[{key:"slerp",value:function(e,a,n,o){return n.copy(e).slerp(a,o)}},{key:"slerpFlat",value:function(e,n,o,r,i,l,d){var c=i[l],u=i[l+1],g=i[l+2],m=i[l+3],p=o[r],y=o[r+1],v=o[r+2],A=o[r+3],x,h,C,b,k,E,S,B;(A!==m||p!==c||y!==u||v!==g)&&(x=1-d,b=p*c+y*u+v*g+A*m,E=0<=b?1:-1,k=1-b*b,k>a&&(C=be(k),S=xe(C,b*E),x=Be(x*S)/C,d=Be(d*S)/C),B=d*E,p=p*x+c*B,y=y*x+u*B,v=v*x+g*B,A=A*x+m*B,x===1-d&&(h=1/be(p*p+y*y+v*v+A*A),p*=h,y*=h,v*=h,A*=h)),e[n]=p,e[n+1]=y,e[n+2]=v,e[n+3]=A}}]),e}(),gn=new ln,m=new un,q=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,e),this.x=t,this.y=a,this.z=o,this.order=e.defaultOrder}return r(e,[{key:"set",value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.order=n,this}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.order=t.order,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.order)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.order=e[t+3],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.order,e}},{key:"toVector3",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja;return e.set(this.x,this.y,this.z)}},{key:"setFromRotationMatrix",value:function(e){var t=Math.asin,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.order,n=e.elements,o=n[0],r=n[4],i=n[8],s=n[1],l=n[5],d=n[9],c=n[2],u=n[6],g=n[10],m=1-1e-5;switch(a){case dn.XYZ:{this.y=t(fe(i,-1,1)),Me(i)<m?(this.x=xe(-d,g),this.z=xe(-r,o)):(this.x=xe(u,l),this.z=0);break}case dn.YXZ:{this.x=t(-fe(d,-1,1)),Me(d)<m?(this.y=xe(i,g),this.z=xe(s,l)):(this.y=xe(-c,o),this.z=0);break}case dn.ZXY:{this.x=t(fe(u,-1,1)),Me(u)<m?(this.y=xe(-c,g),this.z=xe(-r,l)):(this.y=0,this.z=xe(s,o));break}case dn.ZYX:{this.y=t(-fe(c,-1,1)),Me(c)<m?(this.x=xe(u,g),this.z=xe(s,o)):(this.x=0,this.z=xe(-r,l));break}case dn.YZX:{this.z=t(fe(s,-1,1)),Me(s)<m?(this.x=xe(-d,l),this.y=xe(-c,o)):(this.x=0,this.y=xe(i,g));break}case dn.XZY:{this.z=t(-fe(r,-1,1)),Me(r)<m?(this.x=xe(u,l),this.y=xe(i,o)):(this.x=xe(-d,g),this.y=0);break}}return this.order=a,this}},{key:"setFromQuaternion",value:function(e,t){return gn.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gn,t)}},{key:"setFromVector3",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return m.setFromEuler(this),this.setFromQuaternion(m,e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.order===this.order}}],[{key:"defaultOrder",get:function(){return dn.XYZ}}]),e}(),mn=new Ja,a=new Ja,b=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja(1,0,0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.normal=t,this.constant=a}return r(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,a,n){return this.normal.set(e,t,a),this.constant=n,this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var o=mn.subVectors(n,t).cross(a.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,mn),this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.normal.negate(),this.constant=-this.constant,this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"intersectLine",value:function(e,a){var n=e.delta(mn),o=this.normal.dot(n);if(0===o)0===this.distanceToPoint(e.start)&&a.copy(e.start);else{var r=-(e.start.dot(this.normal)+this.constant)/o;0<=r&&1>=r&&a.copy(n).multiplyScalar(r).add(e.start)}return a}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),a=this.distanceToPoint(e.end);return 0>t&&0<a||0>a&&0<t}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}]),e}(),pn=new Ja,fn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new b,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new b,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new b,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new b,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:new b,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:new b;n(this,e),this.planes=[t,a,o,r,i,s]}return r(e,[{key:"set",value:function(e,t,a,n,o,r){var i=this.planes;return i[0].copy(e),i[1].copy(t),i[2].copy(a),i[3].copy(n),i[4].copy(o),i[5].copy(r),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){var t=this.planes,a;for(a=0;6>a;++a)t[a].copy(e.planes[a]);return this}},{key:"setFromMatrix",value:function(e){var t=this.planes,a=e.elements,n=a[0],o=a[1],r=a[2],i=a[3],s=a[4],l=a[5],d=a[6],c=a[7],u=a[8],g=a[9],m=a[10],p=a[11],f=a[12],y=a[13],v=a[14],A=a[15];return t[0].setComponents(i-n,c-s,p-u,A-f).normalize(),t[1].setComponents(i+n,c+s,p+u,A+f).normalize(),t[2].setComponents(i+o,c+l,p+g,A+y).normalize(),t[3].setComponents(i-o,c-l,p-g,A-y).normalize(),t[4].setComponents(i-r,c-d,p-m,A-v).normalize(),t[5].setComponents(i+r,c+d,p+m,A+v).normalize(),this}},{key:"intersectsSphere",value:function(e){var t=this.planes,a=e.center,n=-e.radius,o=!0,r,s;for(r=0;6>r;++r)if(s=t[r].distanceToPoint(a),s<n){o=!1;break}return o}},{key:"intersectsBox",value:function(e){var t=this.planes,a=e.min,n=e.max,o,r;for(o=0;6>o;++o)if(r=t[o],pn.x=0<r.normal.x?n.x:a.x,pn.y=0<r.normal.y?n.y:a.y,pn.z=0<r.normal.z?n.z:a.z,0>r.distanceToPoint(pn))return!1;return!0}},{key:"containsPoint",value:function(e){var t=this.planes,a=!0,n;for(n=0;6>n;++n)if(0>t[n].distanceToPoint(e)){a=!1;break}return a}}]),e}(),yn=new Ja,vn=new Ja,An=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ja;n(this,e),this.start=t,this.end=a}return r(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"getCenter",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja;return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja;return e.subVectors(this.end,this.start)}},{key:"lengthSquared",value:function(){return this.start.distanceToSquared(this.end)}},{key:"length",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,a){yn.subVectors(e,this.start),vn.subVectors(this.end,this.start);var n=vn.dot(vn),o=vn.dot(yn),r=a?ze(Te(o/n,0),1):o/n;return r}},{key:"closestPointToPoint",value:function(e){var a=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new Ja,o=this.closestPointToPointParameter(e,a);return this.delta(n).multiplyScalar(o).add(this.start)}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}]),e}(),xn=new Ja,hn=new Ja,Cn=new Ja,c=function(){function e(){n(this,e),this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return r(e,[{key:"set",value:function(e,t,a,n,o,r,i,s,l,d,c,u,g,m,p,f){var y=this.elements;return y[0]=e,y[4]=t,y[8]=a,y[12]=n,y[1]=o,y[5]=r,y[9]=i,y[13]=s,y[2]=l,y[6]=d,y[10]=c,y[14]=u,y[3]=g,y[7]=m,y[11]=p,y[15]=f,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"copy",value:function(e){var t=e.elements,a=this.elements;return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],this}},{key:"clone",value:function(){return new this.constructor().fromArray(this.elements)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n;for(n=0;16>n;++n)a[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n;for(n=0;16>n;++n)e[n+t]=a[n];return e}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return be(Te(t,a,n))}},{key:"copyPosition",value:function(e){var t=this.elements,a=e.elements;return t[12]=a[12],t[13]=a[13],t[14]=a[14],this}},{key:"setPosition",value:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this}},{key:"extractBasis",value:function(e,t,a){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,a){return this.set(e.x,t.x,a.x,0,e.y,t.y,a.y,0,e.z,t.z,a.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,a=e.elements,n=1/xn.setFromMatrixColumn(e,0).length(),o=1/xn.setFromMatrixColumn(e,1).length(),r=1/xn.setFromMatrixColumn(e,2).length();return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=0,t[4]=a[4]*o,t[5]=a[5]*o,t[6]=a[6]*o,t[7]=0,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){var n=this.elements,o=t.x,r=t.y,i=t.z,s=Se(o),a=Be(o),l=Se(r),c=Be(r),d=Se(i),e=Be(i),u,g,m,p,f,y,v,A,x,h,C,b;switch(t.order){case dn.XYZ:{u=s*d,g=s*e,m=a*d,p=a*e,n[0]=l*d,n[4]=-l*e,n[8]=c,n[1]=g+m*c,n[5]=u-p*c,n[9]=-a*l,n[2]=p-u*c,n[6]=m+g*c,n[10]=s*l;break}case dn.YXZ:{f=l*d,y=l*e,v=c*d,A=c*e,n[0]=f+A*a,n[4]=v*a-y,n[8]=s*c,n[1]=s*e,n[5]=s*d,n[9]=-a,n[2]=y*a-v,n[6]=A+f*a,n[10]=s*l;break}case dn.ZXY:{f=l*d,y=l*e,v=c*d,A=c*e,n[0]=f-A*a,n[4]=-s*e,n[8]=v+y*a,n[1]=y+v*a,n[5]=s*d,n[9]=A-f*a,n[2]=-s*c,n[6]=a,n[10]=s*l;break}case dn.ZYX:{u=s*d,g=s*e,m=a*d,p=a*e,n[0]=l*d,n[4]=m*c-g,n[8]=u*c+p,n[1]=l*e,n[5]=p*c+u,n[9]=g*c-m,n[2]=-c,n[6]=a*l,n[10]=s*l;break}case dn.YZX:{x=s*l,h=s*c,C=a*l,b=a*c,n[0]=l*d,n[4]=b-x*e,n[8]=C*e+h,n[1]=e,n[5]=s*d,n[9]=-a*d,n[2]=-c*d,n[6]=h*e+C,n[10]=x-b*e;break}case dn.XZY:{x=s*l,h=s*c,C=a*l,b=a*c,n[0]=l*d,n[4]=-e,n[8]=c*d,n[1]=x*e+b,n[5]=s*d,n[9]=h*e-C,n[2]=C*e-h,n[6]=a*d,n[10]=b*e+x;break}}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(xn.set(0,0,0),e,hn.set(1,1,1))}},{key:"lookAt",value:function(e,t,a){var n=this.elements,o=xn,r=hn,i=Cn;return i.subVectors(e,t),0===i.lengthSquared()&&(i.z=1),i.normalize(),o.crossVectors(a,i),0===o.lengthSquared()&&(1===Me(a.z)?i.x+=1e-4:i.z+=1e-4,i.normalize(),o.crossVectors(a,i)),o.normalize(),r.crossVectors(i,o),n[0]=o.x,n[4]=r.x,n[8]=i.x,n[1]=o.y,n[5]=r.y,n[9]=i.y,n[2]=o.z,n[6]=r.z,n[10]=i.z,this}},{key:"multiplyMatrices",value:function(e,t){var a=this.elements,n=e.elements,o=t.elements,r=n[0],i=n[4],s=n[8],l=n[12],d=n[1],c=n[5],u=n[9],g=n[13],m=n[2],p=n[6],f=n[10],y=n[14],v=n[3],A=n[7],x=n[11],h=n[15],C=o[0],b=o[4],k=o[8],E=o[12],S=o[1],B=o[5],D=o[9],w=o[13],P=o[2],M=o[6],T=o[10],z=o[14],L=o[3],F=o[7],I=o[11],R=o[15];return a[0]=r*C+i*S+s*P+l*L,a[4]=r*b+i*B+s*M+l*F,a[8]=r*k+i*D+s*T+l*I,a[12]=r*E+i*w+s*z+l*R,a[1]=d*C+c*S+u*P+g*L,a[5]=d*b+c*B+u*M+g*F,a[9]=d*k+c*D+u*T+g*I,a[13]=d*E+c*w+u*z+g*R,a[2]=m*C+p*S+f*P+y*L,a[6]=m*b+p*B+f*M+y*F,a[10]=m*k+p*D+f*T+y*I,a[14]=m*E+p*w+f*z+y*R,a[3]=v*C+A*S+x*P+h*L,a[7]=v*b+A*B+x*M+h*F,a[11]=v*k+A*D+x*T+h*I,a[15]=v*E+A*w+x*z+h*R,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],a=e[4],n=e[8],o=e[12],r=e[1],i=e[5],s=e[9],l=e[13],d=e[2],c=e[6],u=e[10],g=e[14],m=e[3],p=e[7],f=e[11],y=e[15],v=t*i,A=t*s,x=t*l,h=a*r,C=a*s,b=a*l,k=n*r,E=n*i,S=n*l,B=o*r,D=o*i,w=o*s;return m*(w*c-S*c-D*u+b*u+E*g-C*g)+p*(A*g-x*u+B*u-k*g+S*d-w*d)+f*(x*c-v*g-B*c+h*g+D*d-b*d)+y*(-E*d-A*c+v*u+k*c-h*u+C*d)}},{key:"getInverse",value:function(e){var t=this.elements,a=e.elements,n=a[0],o=a[1],r=a[2],i=a[3],s=a[4],l=a[5],d=a[6],c=a[7],u=a[8],g=a[9],m=a[10],p=a[11],f=a[12],y=a[13],v=a[14],A=a[15],x=g*v*c-y*m*c+y*d*p-l*v*p-g*d*A+l*m*A,h=f*m*c-u*v*c-f*d*p+s*v*p+u*d*A-s*m*A,C=u*y*c-f*g*c+f*l*p-s*y*p-u*l*A+s*g*A,b=f*g*d-u*y*d-f*l*m+s*y*m+u*l*v-s*g*v,k=n*x+o*h+r*C+i*b,E;return 0===k?(console.error("Can't invert matrix, determinant is zero",e),this.identity()):(E=1/k,t[0]=x*E,t[1]=(y*m*i-g*v*i-y*r*p+o*v*p+g*r*A-o*m*A)*E,t[2]=(l*v*i-y*d*i+y*r*c-o*v*c-l*r*A+o*d*A)*E,t[3]=(g*d*i-l*m*i-g*r*c+o*m*c+l*r*p-o*d*p)*E,t[4]=h*E,t[5]=(u*v*i-f*m*i+f*r*p-n*v*p-u*r*A+n*m*A)*E,t[6]=(f*d*i-s*v*i-f*r*c+n*v*c+s*r*A-n*d*A)*E,t[7]=(s*m*i-u*d*i+u*r*c-n*m*c-s*r*p+n*d*p)*E,t[8]=C*E,t[9]=(f*g*i-u*y*i-f*o*p+n*y*p+u*o*A-n*g*A)*E,t[10]=(s*y*i-f*l*i+f*o*c-n*y*c-s*o*A+n*l*A)*E,t[11]=(u*l*i-s*g*i-u*o*c+n*g*c+s*o*p-n*l*p)*E,t[12]=b*E,t[13]=(u*y*r-f*g*r+f*o*m-n*y*m-u*o*v+n*g*v)*E,t[14]=(f*l*r-s*y*r-f*o*d+n*y*d+s*o*v-n*l*v)*E,t[15]=(s*g*r-u*l*r+u*o*d-n*g*d-s*o*m+n*l*m)*E),this}},{key:"transpose",value:function(){var e=this.elements,a;return a=e[1],e[1]=e[4],e[4]=a,a=e[2],e[2]=e[8],e[8]=a,a=e[6],e[6]=e[9],e[9]=a,a=e[3],e[3]=e[12],e[12]=a,a=e[7],e[7]=e[13],e[13]=a,a=e[11],e[11]=e[14],e[14]=a,this}},{key:"scale",value:function(e,t,a){var n=this.elements;return n[0]*=e,n[4]*=t,n[8]*=a,n[1]*=e,n[5]*=t,n[9]*=a,n[2]*=e,n[6]*=t,n[10]*=a,n[3]*=e,n[7]*=t,n[11]*=a,this}},{key:"makeScale",value:function(e,t,a){return this.set(e,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1),this}},{key:"makeTranslation",value:function(e,t,a){return this.set(1,0,0,e,0,1,0,t,0,0,1,a,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Se(e),a=Be(e);return this.set(1,0,0,0,0,t,-a,0,0,a,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Se(e),a=Be(e);return this.set(t,0,a,0,0,1,0,0,-a,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Se(e),a=Be(e);return this.set(t,-a,0,0,a,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,a){var n=Se(a),o=Be(a),r=1-n,t=e.x,i=e.y,s=e.z,l=r*t,d=r*i;return this.set(l*t+n,l*i-o*s,l*s+o*i,0,l*i+o*s,d*i+n,d*s-o*t,0,l*s-o*i,d*s+o*t,r*s*s+n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,a){return this.set(1,t,a,0,e,1,a,0,e,t,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,a){var n=this.elements,o=t.x,r=t.y,i=t.z,s=t.w,l=o+o,d=r+r,c=i+i,u=o*l,g=o*d,m=o*c,p=r*d,f=r*c,y=i*c,v=s*l,A=s*d,x=s*c,h=a.x,C=a.y,b=a.z;return n[0]=(1-(p+y))*h,n[1]=(g+x)*h,n[2]=(m-A)*h,n[3]=0,n[4]=(g-x)*C,n[5]=(1-(u+y))*C,n[6]=(f+v)*C,n[7]=0,n[8]=(m+A)*b,n[9]=(f-v)*b,n[10]=(1-(u+p))*b,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}},{key:"decompose",value:function(e,t,a){var n=this.elements,o=n[0],r=n[1],i=n[2],s=n[4],l=n[5],d=n[6],c=n[8],u=n[9],g=n[10],m=this.determinant(),p=xn.set(o,r,i).length()*(0>m?-1:1),f=xn.set(s,l,d).length(),y=xn.set(c,u,g).length(),v=1/p,A=1/f,x=1/y;return e.x=n[12],e.y=n[13],e.z=n[14],n[0]*=v,n[1]*=v,n[2]*=v,n[4]*=A,n[5]*=A,n[6]*=A,n[8]*=x,n[9]*=x,n[10]*=x,t.setFromRotationMatrix(this),n[0]=o,n[1]=r,n[2]=i,n[4]=s,n[5]=l,n[6]=d,n[8]=c,n[9]=u,n[10]=g,a.x=p,a.y=f,a.z=y,this}},{key:"makePerspective",value:function(e,t,a,n,o,r){var i=this.elements;return i[0]=2*o/(t-e),i[4]=0,i[8]=(t+e)/(t-e),i[12]=0,i[1]=0,i[5]=2*o/(a-n),i[9]=(a+n)/(a-n),i[13]=0,i[2]=0,i[6]=0,i[10]=-(r+o)/(r-o),i[14]=-2*r*o/(r-o),i[3]=0,i[7]=0,i[11]=-1,i[15]=0,this}},{key:"makeOrthographic",value:function(e,t,a,n,o,r){var i=this.elements,s=1/(t-e),l=1/(a-n),d=1/(r-o);return i[0]=2*s,i[4]=0,i[8]=0,i[12]=-((t+e)*s),i[1]=0,i[5]=2*l,i[9]=0,i[13]=-((a+n)*l),i[2]=0,i[6]=0,i[10]=-2*d,i[14]=-((r+o)*d),i[3]=0,i[7]=0,i[11]=0,i[15]=1,this}},{key:"equals",value:function(e){var t=this.elements,a=e.elements,n=!0,o;for(o=0;n&&16>o;++o)t[o]!==a[o]&&(n=!1);return n}}]),e}(),bn=[new Ja,new Ja,new Ja,new Ja],kn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ja;n(this,e),this.origin=t,this.direction=a}return r(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"at",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ja;return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,bn[0])),this}},{key:"closestPointToPoint",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ja,a=t.subVectors(e,this.origin).dot(this.direction);return 0<=a?t.copy(this.direction).multiplyScalar(a).add(this.origin):t.copy(this.origin)}},{key:"distanceSquaredToPoint",value:function(e){var t=bn[0].subVectors(e,this.origin).dot(this.direction);return 0>t?this.origin.distanceToSquared(e):bn[0].copy(this.direction).multiplyScalar(t).add(this.origin).distanceToSquared(e)}},{key:"distanceToPoint",value:function(e){return be(this.distanceSquaredToPoint(e))}},{key:"distanceToPlane",value:function(e){var a=e.normal.dot(this.direction),n=0===a?0===e.distanceToPoint(this.origin)?0:-1:-(this.origin.dot(e.normal)+e.constant)/a;return 0<=n?n:null}},{key:"distanceSquaredToSegment",value:function(e,t,a,n){var o=bn[0].copy(e).add(t).multiplyScalar(.5),r=bn[1].copy(t).sub(e).normalize(),i=bn[2].copy(this.origin).sub(o),s=.5*e.distanceTo(t),l=-this.direction.dot(r),d=i.dot(this.direction),u=-i.dot(r),g=i.lengthSq(),c=Me(1-l*l),m,p,f,y,v;return 0<c?(m=l*u-d,p=l*d-u,f=s*c,0<=m?p>=-f?p<=f?(y=1/c,m*=y,p*=y,v=m*(m+l*p+2*d)+p*(l*m+p+2*u)+g):(p=s,m=Te(0,-(l*p+d)),v=-m*m+p*(p+2*u)+g):(p=-s,m=Te(0,-(l*p+d)),v=-m*m+p*(p+2*u)+g):p<=-f?(m=Te(0,-(-l*s+d)),p=0<m?-s:ze(Te(-s,-u),s),v=-m*m+p*(p+2*u)+g):p<=f?(m=0,p=ze(Te(-s,-u),s),v=p*(p+2*u)+g):(m=Te(0,-(l*s+d)),p=0<m?s:ze(Te(-s,-u),s),v=-m*m+p*(p+2*u)+g)):(p=0<l?-s:s,m=Te(0,-(l*p+d)),v=-m*m+p*(p+2*u)+g),void 0!==a&&a.copy(this.direction).multiplyScalar(m).add(this.origin),void 0!==n&&n.copy(r).multiplyScalar(p).add(o),v}},{key:"intersectSphere",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ja,a=bn[0].subVectors(e.center,this.origin),n=a.dot(this.direction),o=a.dot(a)-n*n,r=e.radius*e.radius,i=null,s,l,d;return o<=r&&(s=be(r-o),l=n-s,d=n+s,(0<=l||0<=d)&&(i=0>l?this.at(d,t):this.at(l,t))),i}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"intersectPlane",value:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ja,n=this.distanceToPlane(e);return null===n?null:this.at(n,a)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t}},{key:"intersectBox",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Ja,a=this.origin,n=this.direction,o=e.min,r=e.max,i=1/n.x,s=1/n.y,l=1/n.z,d=null,c,u,g,m,p,f;return 0<=i?(c=(o.x-a.x)*i,u=(r.x-a.x)*i):(c=(r.x-a.x)*i,u=(o.x-a.x)*i),0<=s?(g=(o.y-a.y)*s,m=(r.y-a.y)*s):(g=(r.y-a.y)*s,m=(o.y-a.y)*s),c<=m&&g<=u&&((g>c||c!==c)&&(c=g),(m<u||u!==u)&&(u=m),0<=l?(p=(o.z-a.z)*l,f=(r.z-a.z)*l):(p=(r.z-a.z)*l,f=(o.z-a.z)*l),c<=f&&p<=u&&((p>c||c!==c)&&(c=p),(f<u||u!==u)&&(u=f),0<=u&&(d=this.at(0<=c?c:u,t)))),d}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,bn[0])}},{key:"intersectTriangle",value:function(e,t,a,n,o){var r=this.direction,i=bn[0],s=bn[1],l=bn[2],d=bn[3],c=null,u,g,m,p,f;return s.subVectors(t,e),l.subVectors(a,e),d.crossVectors(s,l),u=r.dot(d),0===u||n&&0<u||(0<u?g=1:(g=-1,u=-u),i.subVectors(this.origin,e),m=g*r.dot(l.crossVectors(i,l)),0<=m&&(p=g*r.dot(s.cross(i)),0<=p&&m+p<=u&&(f=-g*i.dot(d),0<=f&&(c=this.at(f/u,o))))),c}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}]),e}(),En=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n(this,e),this.radius=t,this.phi=a,this.theta=o}return r(e,[{key:"set",value:function(e,t,a){return this.radius=e,this.phi=t,this.theta=a,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"makeSafe",value:function(){return this.phi=Te(1e-6,ze(De-1e-6,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,a){return this.radius=be(e*e+t*t+a*a),0===this.radius?(this.theta=0,this.phi=0):(this.theta=xe(e,a),this.phi=he(ze(Te(t/this.radius,-1),1))),this}}]),e}(),Sn=function(){function e(){n(this,e),this.elements=new Float32Array([1,0,0,1,0,1])}return r(e,[{key:"set",value:function(t,a,n,o,r,i){var s=this.elements;return s[0]=t,s[1]=a,s[3]=o,s[2]=n,s[4]=r,s[5]=i,this}},{key:"identity",value:function(){return this.set(1,0,0,1,0,1),this}},{key:"copy",value:function(e){var t=e.elements;return this.set(t[0],t[1],t[2],t[3],t[4],t[5]),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"toMatrix3",value:function(e){var t=e.elements;e.set(t[0],t[1],t[2],t[1],t[3],t[4],t[2],t[4],t[5])}},{key:"add",value:function(e){var t=this.elements,a=e.elements;return t[0]+=a[0],t[1]+=a[1],t[3]+=a[3],t[2]+=a[2],t[4]+=a[4],t[5]+=a[5],this}},{key:"norm",value:function(){var t=this.elements,e=t[1]*t[1],a=t[2]*t[2],n=t[4]*t[4];return be(t[0]*t[0]+e+a+e+t[3]*t[3]+n+a+n+t[5]*t[5])}},{key:"off",value:function(){var t=this.elements;return be(2*(t[1]*t[1]+t[2]*t[2]+t[4]*t[4]))}},{key:"applyToVector3",value:function(t){var a=t.x,n=t.y,o=t.z,r=this.elements;return t.x=r[0]*a+r[1]*n+r[2]*o,t.y=r[1]*a+r[3]*n+r[4]*o,t.z=r[2]*a+r[4]*n+r[5]*o,t}},{key:"equals",value:function(e){var t=this.elements,a=e.elements,n=!0,o;for(o=0;n&&6>o;++o)t[o]!==a[o]&&(n=!1);return n}}],[{key:"calculateIndex",value:function(e,t){return 3-(3-e)*(2-e)/2+t}}]),e}(),Bn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;n(this,e),this.x=t,this.y=a,this.z=o,this.w=r}return r(e,[{key:"set",value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.w=n,this}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"fromArray",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*he(e.w);var t=be(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t=.01,a=.1,n=e.elements,o=n[0],r=n[4],i=n[8],l=n[1],d=n[5],c=n[9],u=n[2],g=n[6],m=n[10],p,f,v,A,h,C,b,k,E,S,B;return Me(r-l)<t&&Me(i-u)<t&&Me(c-g)<t?Me(r+l)<a&&Me(i+u)<a&&Me(c+g)<a&&Me(o+d+m-3)<a?this.set(1,0,0,0):(p=De,h=(o+1)/2,C=(d+1)/2,b=(m+1)/2,k=(r+l)/4,E=(i+u)/4,S=(c+g)/4,h>C&&h>b?h<t?(f=0,v=.707106781,A=.707106781):(f=be(h),v=k/f,A=E/f):C>b?C<t?(f=.707106781,v=0,A=.707106781):(v=be(C),f=k/v,A=S/v):b<t?(f=.707106781,v=.707106781,A=0):(A=be(b),f=E/A,v=S/A),this.set(f,v,A,p)):(B=be((g-c)*(g-c)+(i-u)*(i-u)+(l-r)*(l-r)),.001>Me(B)&&(B=1),this.x=(g-c)/B,this.y=(i-u)/B,this.z=(l-r)/B,this.w=he((o+d+m-1)/2)),this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this.w=e.w*t.w,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}},{key:"divideScalar",value:function(e){return this.x/=e,this.y/=e,this.z/=e,this.w/=e,this}},{key:"applyMatrix4",value:function(t){var a=this.x,n=this.y,o=this.z,r=this.w,i=t.elements;return this.x=i[0]*a+i[4]*n+i[8]*o+i[12]*r,this.y=i[1]*a+i[5]*n+i[9]*o+i[13]*r,this.z=i[2]*a+i[6]*n+i[10]*o+i[14]*r,this.w=i[3]*a+i[7]*n+i[11]*o+i[15]*r,this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"manhattanLength",value:function(){return Me(this.x)+Me(this.y)+Me(this.z)+Me(this.w)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return be(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanDistanceTo",value:function(e){return Me(this.x-e.x)+Me(this.y-e.y)+Me(this.z-e.z)+Me(this.w-e.w)}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,a=this.y-e.y,n=this.z-e.z,o=this.w-e.w;return t*t+a*a+n*n+o*o}},{key:"distanceTo",value:function(e){return be(this.distanceToSquared(e))}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"min",value:function(e){return this.x=ze(this.x,e.x),this.y=ze(this.y,e.y),this.z=ze(this.z,e.z),this.w=ze(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Te(this.x,e.x),this.y=Te(this.y,e.y),this.z=Te(this.z,e.z),this.w=Te(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Te(e.x,ze(t.x,this.x)),this.y=Te(e.y,ze(t.y,this.y)),this.z=Te(e.z,ze(t.z,this.z)),this.w=Te(e.w,ze(t.w,this.w)),this}},{key:"floor",value:function(){return this.x=Le(this.x),this.y=Le(this.y),this.z=Le(this.z),this.w=Le(this.w),this}},{key:"ceil",value:function(){return this.x=ke(this.x),this.y=ke(this.y),this.z=ke(this.z),this.w=ke(this.w),this}},{key:"round",value:function(){return this.x=Fe(this.x),this.y=Fe(this.y),this.z=Fe(this.z),this.w=Fe(this.w),this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}}]),e}(),Dn={MAIN:0,AUXILIARY:1,SECONDARY:2},wn=new Ja,Pn=new c,Mn=function(){function e(t,a,o,r){n(this,e),this.position=t,this.quaternion=a,this.target=o,this.settings=r,this.spherical=new En}return r(e,[{key:"setPosition",value:function(e){return this.position=e,this}},{key:"setQuaternion",value:function(e){return this.quaternion=e,this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"updateQuaternion",value:function(){var e=this.settings,t=e.rotation;return e.general.orbit?Pn.lookAt(wn.subVectors(this.position,this.target),t.pivotOffset,t.up):Pn.lookAt(wn.set(0,0,0),this.target.setFromSpherical(this.spherical),t.up),this.quaternion.setFromRotationMatrix(Pn),this}},{key:"adjustSpherical",value:function(e,t){var a=this.settings,n=a.general.orbit,o=a.rotation,r=this.spherical;return r.theta=o.invertX?r.theta+e:r.theta-e,r.phi=(n||o.invertY)&&!(n&&o.invertY)?r.phi-t:r.phi+t,r.theta=ze(Te(r.theta,o.minAzimuthalAngle),o.maxAzimuthalAngle),r.phi=ze(Te(r.phi,o.minPolarAngle),o.maxPolarAngle),r.theta%=2*De,r.makeSafe(),n&&this.position.setFromSpherical(r).add(this.target),this}},{key:"zoom",value:function e(t){var a=this.settings,n=a.general,o=a.sensitivity,e=a.zoom,r=this.spherical,i,s,l;return n.orbit&&e.enabled&&(i=t*o.zoom,e.invert&&(i=-i),s=Te(e.minDistance,1e-6),l=ze(e.maxDistance,1/0),r.radius=ze(Te(r.radius+i,s),l),this.position.setFromSpherical(r).add(this.target)),this}},{key:"update",value:function(){}},{key:"lookAt",value:function(e){var t=this.spherical,a=this.position,n=this.target;return n.copy(e),this.settings.general.orbit?wn.subVectors(a,n):wn.subVectors(n,a).normalize(),t.setFromVector3(wn),t.radius=Te(t.radius,1e-6),this.updateQuaternion(),this}},{key:"getViewDirection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja;return e.setFromSpherical(this.spherical).normalize(),this.settings.general.orbit&&e.negate(),e}}]),e}(),Tn=function(){function e(){n(this,e),this.left=!1,this.right=!1,this.forward=!1,this.backward=!1,this.up=!1,this.down=!1}return r(e,[{key:"reset",value:function(){return this.left=!1,this.right=!1,this.forward=!1,this.backward=!1,this.up=!1,this.down=!1,this}}]),e}(),zn=new Ja(1,0,0),x=new Ja(0,1,0),y=new Ja(0,0,1),z=new Ja,Ln=function(){function e(t,a,o,r){n(this,e),this.position=t,this.quaternion=a,this.target=o,this.settings=r,this.movementState=new Tn}return r(e,[{key:"setPosition",value:function(e){return this.position=e,this}},{key:"setQuaternion",value:function(e){return this.quaternion=e,this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"translateOnAxis",value:function(e,t){z.copy(e).applyQuaternion(this.quaternion).multiplyScalar(t),this.position.add(z),this.settings.general.orbit&&this.target.add(z)}},{key:"translate",value:function(e){var t=this.settings.sensitivity,a=this.movementState,n=e*t.translation;a.backward?this.translateOnAxis(y,n):a.forward&&this.translateOnAxis(y,-n),a.right?this.translateOnAxis(zn,n):a.left&&this.translateOnAxis(zn,-n),a.up?this.translateOnAxis(x,n):a.down&&this.translateOnAxis(x,-n)}},{key:"update",value:function(e){this.settings.translation.enabled&&this.translate(e)}},{key:"moveTo",value:function(e){return this.settings.general.orbit?this.target.copy(e):this.position.copy(e),this}}]),e}(),Fn=new Proxy({BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,META_LEFT:91,META_RIGHT:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUAL_SIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222},{get:function(e,t){return t in e?e[t]:1===t.length?t.toUpperCase().charCodeAt(0):void 0}}),In=function(){function e(){n(this,e),this.orbit=!0}return r(e,[{key:"copy",value:function(e){return this.orbit=e.orbit,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Rn=function(){function e(){n(this,e),this.defaultActions=new Map,this.actions=new Map}return r(e,[{key:"reset",value:function(){return this.actions=new Map(this.defaultActions),this}},{key:"setDefault",value:function(e){return this.defaultActions=e,this.reset()}},{key:"copy",value:function(e){return this.defaultActions=new Map(e.defaultActions),this.actions=new Map(e.actions),this}},{key:"clearDefault",value:function(){return this.defaultActions.clear(),this}},{key:"clear",value:function(){return this.actions.clear(),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"has",value:function(e){return this.actions.has(e)}},{key:"get",value:function(e){return this.actions.get(e)}},{key:"set",value:function(e,t){return this.actions.set(e,t),this}},{key:"delete",value:function(e){return this.actions.delete(e)}},{key:"toJSON",value:function(){return{defaultActions:f(this.defaultActions),actions:f(this.actions)}}}]),e}(),On=function(){function e(){n(this,e),this.hold=!1,this.lock=!0}return r(e,[{key:"copy",value:function(e){return this.hold=e.hold,this.lock=e.lock,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Gn=function(){function e(){n(this,e),this.up=new Ja,this.up.copy(x),this.pivotOffset=new Ja,this.minAzimuthalAngle=-Infinity,this.maxAzimuthalAngle=1/0,this.minPolarAngle=0,this.maxPolarAngle=De,this.invertX=!1,this.invertY=!1}return r(e,[{key:"copy",value:function(e){return this.up.copy(e.up),this.pivotOffset.copy(e.pivotOffset),this.minAzimuthalAngle=null===e.minAzimuthalAngle?-Infinity:e.minAzimuthalAngle,this.maxAzimuthalAngle=null===e.maxAzimuthalAngle?1/0:e.maxAzimuthalAngle,this.minPolarAngle=e.minPolarAngle,this.maxPolarAngle=e.maxPolarAngle,this.invertX=e.invertX,this.invertY=e.invertY,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Un=function(){function e(){n(this,e),this.rotation=.0025,this.translation=1,this.zoom=.1}return r(e,[{key:"copy",value:function(e){return this.rotation=e.rotation,this.translation=e.translation,this.zoom=e.zoom,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),_n=function(){function e(){n(this,e),this.enabled=!0}return r(e,[{key:"copy",value:function(e){return this.enabled=e.enabled,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Hn=function(){function e(){n(this,e),this.enabled=!0,this.invert=!1,this.minDistance=1e-6,this.maxDistance=1/0}return r(e,[{key:"copy",value:function(e){return this.enabled=e.enabled,this.invert=e.invert,this.minDistance=e.minDistance,this.maxDistance=e.maxDistance,this}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),e}(),Qn=function(){function e(){n(this,e),this.general=new In,this.keyBindings=new Rn,this.keyBindings.setDefault(new Map([[Fn.W,Ka.MOVE_FORWARD],[Fn.UP,Ka.MOVE_FORWARD],[Fn.A,Ka.MOVE_LEFT],[Fn.LEFT,Ka.MOVE_LEFT],[Fn.S,Ka.MOVE_BACKWARD],[Fn.DOWN,Ka.MOVE_BACKWARD],[Fn.D,Ka.MOVE_RIGHT],[Fn.RIGHT,Ka.MOVE_RIGHT],[Fn.X,Ka.MOVE_DOWN],[Fn.SPACE,Ka.MOVE_UP],[Fn.PAGE_DOWN,Ka.ZOOM_OUT],[Fn.PAGE_UP,Ka.ZOOM_IN]])),this.pointer=new On,this.rotation=new Gn,this.sensitivity=new Un,this.translation=new _n,this.zoom=new Hn}return r(e,[{key:"copy",value:function(e){return this.general.copy(e.general),this.keyBindings.copy(e.keyBindings),this.pointer.copy(e.pointer),this.rotation.copy(e.rotation),this.sensitivity.copy(e.sensitivity),this.translation.copy(e.translation),this.zoom.copy(e.zoom),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"toDataURL",value:function(){return URL.createObjectURL(new Blob([JSON.stringify(this)],{type:"text/json"}))}}]),e}(),Vn=function(){function e(){n(this,e)}return r(e,[{key:"execute",value:function(){throw new Error("Strategy#execute method not implemented!")}}]),e}(),Nn=function(e){function t(e,a){var o;return n(this,t),o=u(this,s(t).call(this)),o.movementState=e,o.direction=a,o}return i(t,e),r(t,[{key:"execute",value:function(e){var t=this.movementState;switch(this.direction){case Yn.FORWARD:t.forward=e;break;case Yn.LEFT:t.left=e;break;case Yn.BACKWARD:t.backward=e;break;case Yn.RIGHT:t.right=e;break;case Yn.DOWN:t.down=e;break;case Yn.UP:t.up=e;}}}]),t}(Vn),Yn={FORWARD:0,LEFT:1,BACKWARD:2,RIGHT:3,DOWN:4,UP:5},Xn=function(e){function t(e,a){var o;return n(this,t),o=u(this,s(t).call(this)),o.rotationManager=e,o.zoomIn=a,o}return i(t,e),r(t,[{key:"execute",value:function(e){e&&this.rotationManager.zoom(this.zoomIn?-1:1)}}]),t}(Vn),Wn=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document.body;n(this,e),this.dom=o,this.position=t,this.quaternion=a,this.target=new Ja,this.settings=new Qn,this.rotationManager=new Mn(t,a,this.target,this.settings),this.translationManager=new Ln(t,a,this.target,this.settings),this.strategies=function(e,t){var a=t.movementState;return new Map([[Ka.MOVE_FORWARD,new Nn(a,Yn.FORWARD)],[Ka.MOVE_LEFT,new Nn(a,Yn.LEFT)],[Ka.MOVE_BACKWARD,new Nn(a,Yn.BACKWARD)],[Ka.MOVE_RIGHT,new Nn(a,Yn.RIGHT)],[Ka.MOVE_DOWN,new Nn(a,Yn.DOWN)],[Ka.MOVE_UP,new Nn(a,Yn.UP)],[Ka.ZOOM_OUT,new Xn(e,!1)],[Ka.ZOOM_IN,new Xn(e,!0)]])}(this.rotationManager,this.translationManager),this.lastScreenPosition=new nn,this.dragging=!1,this.enabled=!1,null!==t&&null!==a&&(this.lookAt(this.target),null!==o&&this.setEnabled())}return r(e,[{key:"getDom",value:function(){return this.dom}},{key:"getPosition",value:function(){return this.position}},{key:"getQuaternion",value:function(){return this.quaternion}},{key:"getTarget",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja;return e.copy(this.target),this.settings.general.orbit||e.add(this.position),e}},{key:"getViewDirection",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ja;return this.rotationManager.getViewDirection(e)}},{key:"setDom",value:function(e){var t=this.enabled;return null!==e&&(t&&this.setEnabled(!1),this.dom=e,this.setEnabled(t)),this}},{key:"setPosition",value:function(e){return this.position=e,this.rotationManager.setPosition(e),this.translationManager.setPosition(e),this.lookAt(this.target)}},{key:"setQuaternion",value:function(e){return this.quaternion=e,this.rotationManager.setQuaternion(e),this.translationManager.setQuaternion(e),this.lookAt(this.target)}},{key:"setTarget",value:function(e){return this.target=e,this.rotationManager.setTarget(e),this.translationManager.setTarget(e),this.lookAt(this.target)}},{key:"setOrbitEnabled",value:function(e){var t=this.settings.general;return t.orbit!==e&&(this.getTarget(this.target),t.orbit=e,this.lookAt(this.target)),this}},{key:"copy",value:function(e){return this.dom=e.getDom(),this.position=e.getPosition(),this.quaternion=e.getQuaternion(),this.target=e.getTarget(),this.settings.copy(e.settings),this.rotationManager.setPosition(this.position).setQuaternion(this.quaternion).setTarget(this.target),this.translationManager.setPosition(this.position).setQuaternion(this.quaternion).setTarget(this.target),this.lookAt(this.target)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"handlePointerMoveEvent",value:function(e){var t=this.settings,a=t.pointer,n=t.sensitivity,o=this.rotationManager,r=this.lastScreenPosition,i,s;document.pointerLockElement===this.dom?(!a.hold||this.dragging)&&o.adjustSpherical(e.movementX*n.rotation,e.movementY*n.rotation).updateQuaternion():(i=e.screenX-r.x,s=e.screenY-r.y,r.set(e.screenX,e.screenY),o.adjustSpherical(i*n.rotation,s*n.rotation).updateQuaternion())}},{key:"handleTouchMoveEvent",value:function(e){var t=this.settings.sensitivity,a=this.rotationManager,n=this.lastScreenPosition,o=e.touches[0],r=o.screenX-n.x,i=o.screenY-n.y;n.set(o.screenX,o.screenY),e.preventDefault(),a.adjustSpherical(r*t.rotation,i*t.rotation).updateQuaternion()}},{key:"handleMainPointerButton",value:function(e,t){this.dragging=t,this.settings.pointer.lock?this.setPointerLocked():t?(this.lastScreenPosition.set(e.screenX,e.screenY),this.dom.addEventListener("mousemove",this)):this.dom.removeEventListener("mousemove",this)}},{key:"handleAuxiliaryPointerButton",value:function(){}},{key:"handleSecondaryPointerButton",value:function(){}},{key:"handlePointerButtonEvent",value:function(e,t){switch(e.preventDefault(),e.button){case Dn.MAIN:this.handleMainPointerButton(e,t);break;case Dn.AUXILIARY:this.handleAuxiliaryPointerButton(e,t);break;case Dn.SECONDARY:this.handleSecondaryPointerButton(e,t);}}},{key:"handleTouchEvent",value:function(e,t){var a=e.touches[0];e.preventDefault(),t?(this.lastScreenPosition.set(a.screenX,a.screenY),this.dom.addEventListener("touchmove",this)):this.dom.removeEventListener("touchmove",this)}},{key:"handleKeyboardEvent",value:function(e,t){var a=this.settings.keyBindings;a.has(e.keyCode)&&(e.preventDefault(),this.strategies.get(a.get(e.keyCode)).execute(t))}},{key:"handleWheelEvent",value:function(e){this.rotationManager.zoom(Ce(e.deltaY))}},{key:"handlePointerLockEvent",value:function(){document.pointerLockElement===this.dom?this.dom.addEventListener("mousemove",this):this.dom.removeEventListener("mousemove",this)}},{key:"handleEvent",value:function(e){switch(e.type){case"mousemove":this.handlePointerMoveEvent(e);break;case"touchmove":this.handleTouchMoveEvent(e);break;case"mousedown":this.handlePointerButtonEvent(e,!0);break;case"mouseup":this.handlePointerButtonEvent(e,!1);break;case"touchstart":this.handleTouchEvent(e,!0);break;case"touchend":this.handleTouchEvent(e,!1);break;case"keydown":this.handleKeyboardEvent(e,!0);break;case"keyup":this.handleKeyboardEvent(e,!1);break;case"wheel":this.handleWheelEvent(e);break;case"pointerlockchange":this.handlePointerLockEvent();}}},{key:"update",value:function(e){this.rotationManager.update(e),this.translationManager.update(e)}},{key:"moveTo",value:function(e){return this.rotationManager.moveTo(e),this}},{key:"lookAt",value:function(e){return this.rotationManager.lookAt(e),this}},{key:"setPointerLocked",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];e?document.pointerLockElement!==this.dom&&void 0!==this.dom.requestPointerLock&&this.dom.requestPointerLock():void 0!==document.exitPointerLock&&document.exitPointerLock()}},{key:"setEnabled",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.dom;return this.translationManager.movementState.reset(),e&&!this.enabled?(document.addEventListener("pointerlockchange",this),document.body.addEventListener("keyup",this),document.body.addEventListener("keydown",this),t.addEventListener("mousedown",this),t.addEventListener("mouseup",this),t.addEventListener("touchstart",this),t.addEventListener("touchend",this),t.addEventListener("wheel",this)):!e&&this.enabled&&(document.removeEventListener("pointerlockchange",this),document.body.removeEventListener("keyup",this),document.body.removeEventListener("keydown",this),t.removeEventListener("mousedown",this),t.removeEventListener("mouseup",this),t.removeEventListener("touchstart",this),t.removeEventListener("touchend",this),t.removeEventListener("wheel",this),t.removeEventListener("mousemove",this),t.removeEventListener("touchmove",this)),this.setPointerLocked(!1),this.enabled=e,this}},{key:"dispose",value:function(){this.setEnabled(!1)}}]),e}(),jn=function(e){function t(e,a){var o;return n(this,t),o=u(this,s(t).call(this,e)),o.composer=a,o.renderPass=new oa(o.scene,null),o.renderPass.renderToScreen=!0,o}return i(t,e),r(t,[{key:"render",value:function(e){this.composer.render(e)}},{key:"reset",value:function(){p(s(t.prototype),"reset",this).call(this);var e=new oa(this.scene,null);return e.enabled=this.renderPass.enabled,e.renderToScreen=!0,this.renderPass=e,this}}]),t}(Ie),Kn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"bloom",e)),t.effect=null,t.pass=null,t.object=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/space2/",r=".jpg",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){if(0===t.size){a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)});var r=new Image;r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL}else e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.01,2e3);r.position.set(-10,6,15),r.lookAt(t.position),this.camera=r;var s=new Wn(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,p;for(m=0;100>m;++m)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),p=new e.Mesh(u,g),p.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),p.position.multiplyScalar(4*Math.random()),p.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),p.scale.multiplyScalar(.5*Math.random()),c.add(p);this.object=c,t.add(c),p=new e.Mesh(new e.BoxBufferGeometry(.25,8.25,.25),new e.MeshLambertMaterial({color:723723})),c=new e.Object3D;var f,y,v;f=c.clone();var A=p.clone();A.position.set(-4,0,4),f.add(A),A=p.clone(),A.position.set(4,0,4),f.add(A),A=p.clone(),A.position.set(-4,0,-4),f.add(A),A=p.clone(),A.position.set(4,0,-4),f.add(A),y=f.clone(),y.rotation.set(De/2,0,0),v=f.clone(),v.rotation.set(0,0,De/2),c.add(f),c.add(y),c.add(v),t.add(c);var x=new La(a.get("smaa-search"),a.get("smaa-area"));x.setEdgeDetectionThreshold(.065);var h=new ca({blendFunction:qt.SCREEN,resolutionScale:.5,distinction:4});h.blendMode.opacity.value=2.1,this.effect=h;var C=new aa(r,x,h);this.pass=C,this.renderPass.renderToScreen=!1,C.renderToScreen=!0,n.addPass(C)}},{key:"render",value:function(e){var t=this.object,n=2*De;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),p(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.pass,a=this.effect,n=a.blendMode,o={resolution:a.getResolutionScale(),"kernel size":a.kernelSize,opacity:n.opacity.value,"blend mode":n.blendFunction};e.add(o,"resolution").min(.01).max(1).step(.01).onChange(function(){a.setResolutionScale(o.resolution)}),e.add(o,"kernel size",Ot).onChange(function(){a.kernelSize=we(o["kernel size"])});var r=e.addFolder("Luminance");r.add(a,"distinction").min(1).max(10).step(.1),r.open(),e.add(o,"opacity").min(0).max(4).step(.01).onChange(function(){n.opacity.value=o.opacity}),e.add(o,"blend mode",qt).onChange(function(){n.blendFunction=we(o["blend mode"]),t.recompile()}),e.add(a,"dithering")}}]),a}(jn),Jn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"bokeh",e)),t.effect=null,t.bokehPass=null,t.depthPass=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/space3/",r=".jpg",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){if(0===t.size){a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)});var r=new Image;r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL}else e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,50);r.position.set(12.5,-.3,1.7),this.camera=r;var i=new Wn(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.rotation=425e-6,i.settings.sensitivity.zoom=.15,i.settings.zoom.minDistance=11.5,i.settings.zoom.maxDistance=40,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var s=new e.AmbientLight(4210752),l=new e.DirectionalLight(16759722);l.position.set(-1,1,1),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.CylinderBufferGeometry(1,1,20,6),c=new e.MeshPhongMaterial({color:16755370,flatShading:!0,envMap:a.get("sky")}),u=new e.Mesh(d,c);u.rotation.set(0,0,De/2),t.add(u);var g=new La(a.get("smaa-search"),a.get("smaa-area"));g.setEdgeDetectionThreshold(.06);var m=new ua({focus:.32,dof:.02,aperture:.015,maxBlur:.0125}),p=new aa(r,g),f=new aa(r,m,new Ra()),y=new aa(r,new fa());this.renderPass.renderToScreen=!1,p.renderToScreen=!0,y.enabled=!1,this.effect=m,this.bokehPass=f,this.depthPass=y,n.addPass(f),n.addPass(y),n.addPass(p)}},{key:"registerOptions",value:function(e){var t=this.bokehPass,a=this.depthPass,n=this.effect,o=n.uniforms,r=n.blendMode,i={focus:o.get("focus").value,dof:o.get("dof").value,aperture:o.get("aperture").value,blur:o.get("maxBlur").value,"show depth":a.enabled,opacity:r.opacity.value,"blend mode":r.blendFunction};e.add(i,"focus").min(0).max(1).step(.001).onChange(function(){o.get("focus").value=i.focus}),e.add(i,"dof").min(0).max(1).step(.001).onChange(function(){o.get("dof").value=i.dof}),e.add(i,"aperture").min(0).max(.05).step(1e-4).onChange(function(){o.get("aperture").value=i.aperture}),e.add(i,"blur").min(0).max(.1).step(.001).onChange(function(){o.get("maxBlur").value=i.blur}),e.add(i,"opacity").min(0).max(1).step(.01).onChange(function(){r.opacity.value=i.opacity}),e.add(i,"blend mode",qt).onChange(function(){r.blendFunction=we(i["blend mode"]),t.recompile()}),e.add(i,"show depth").onChange(function(){t.enabled=!i["show depth"],a.enabled=i["show depth"]})}}]),a}(jn),qn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"color-correction",e)),t.brightnessContrastEffect=null,t.gammaCorrectionEffect=null,t.hueSaturationEffect=null,t.pass=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/sunset/",r=".png",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){var r;0===t.size?(a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)}),r=new Image,r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-.75,-.1,-1),r.lookAt(t.position),this.camera=r;var i=new Wn(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.background=a.get("sky");var s=new La(a.get("smaa-search"),a.get("smaa-area")),l=new ga,d=new va({blendFunction:qt.NORMAL,gamma:.65}),c=new ka(qt.NORMAL),u=new aa(r,s,l,d,c);this.renderPass.renderToScreen=!1,u.renderToScreen=!0,u.dithering=!0,this.brightnessContrastEffect=l,this.gammaCorrectionEffect=d,this.hueSaturationEffect=c,this.pass=u,n.addPass(u)}},{key:"registerOptions",value:function(e){var t=this.pass,a=this.brightnessContrastEffect,n=this.gammaCorrectionEffect,o=this.hueSaturationEffect,r={brightnessContrast:{brightness:a.uniforms.get("brightness").value,contrast:a.uniforms.get("contrast").value,opacity:a.blendMode.opacity.value,"blend mode":a.blendMode.blendFunction},gammaCorrection:{gamma:n.uniforms.get("gamma").value,opacity:n.blendMode.opacity.value,"blend mode":n.blendMode.blendFunction},hueSaturation:{hue:0,saturation:o.uniforms.get("saturation").value,opacity:o.blendMode.opacity.value,"blend mode":o.blendMode.blendFunction}},i=e.addFolder("Brightness & Contrast");i.add(r.brightnessContrast,"brightness").min(-1).max(1).step(.001).onChange(function(){a.uniforms.get("brightness").value=r.brightnessContrast.brightness}),i.add(r.brightnessContrast,"contrast").min(-1).max(1).step(.001).onChange(function(){a.uniforms.get("contrast").value=r.brightnessContrast.contrast}),i.add(r.brightnessContrast,"opacity").min(0).max(1).step(.01).onChange(function(){a.blendMode.opacity.value=r.brightnessContrast.opacity}),i.add(r.brightnessContrast,"blend mode",qt).onChange(function(){a.blendMode.blendFunction=we(r.brightnessContrast["blend mode"]),t.recompile()}),i.open(),i=e.addFolder("Gamma Correction"),i.add(r.gammaCorrection,"gamma").min(.01).max(1.5).step(.001).onChange(function(){n.uniforms.get("gamma").value=r.gammaCorrection.gamma}),i.add(r.gammaCorrection,"opacity").min(0).max(1).step(.01).onChange(function(){n.blendMode.opacity.value=r.gammaCorrection.opacity}),i.add(r.gammaCorrection,"blend mode",qt).onChange(function(){n.blendMode.blendFunction=we(r.gammaCorrection["blend mode"]),t.recompile()}),i.open(),i=e.addFolder("Hue & Saturation"),i.add(r.hueSaturation,"hue").min(-De).max(Math.PI).step(.001).onChange(function(){o.setHue(r.hueSaturation.hue)}),i.add(r.hueSaturation,"saturation").min(-1).max(1).step(.001).onChange(function(){o.uniforms.get("saturation").value=r.hueSaturation.saturation}),i.add(r.hueSaturation,"opacity").min(0).max(1).step(.01).onChange(function(){o.blendMode.opacity.value=r.hueSaturation.opacity}),i.add(r.hueSaturation,"blend mode",qt).onChange(function(){o.blendMode.blendFunction=we(r.hueSaturation["blend mode"]),t.recompile()}),i.open(),e.add(t,"dithering")}}]),a}(jn),Zn=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"realistic-bokeh",e)),t.effect=null,t.pass=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/space3/",r=".jpg",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){if(0===t.size){a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)});var r=new Image;r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL}else e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,50);r.position.set(12.5,-.3,1.7),this.camera=r;var i=new Wn(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.rotation=425e-6,i.settings.sensitivity.zoom=.15,i.settings.zoom.minDistance=11.5,i.settings.zoom.maxDistance=40,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var s=new e.AmbientLight(4210752),l=new e.DirectionalLight(16759722);l.position.set(-1,1,1),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.CylinderBufferGeometry(1,1,20,6),c=new e.MeshPhongMaterial({color:16755370,flatShading:!0,envMap:a.get("sky")}),u=new e.Mesh(d,c);u.rotation.set(0,0,De/2),t.add(u);var g=new La(a.get("smaa-search"),a.get("smaa-area"));g.setEdgeDetectionThreshold(.06);var m=new Da({focus:1.55,focalLength:r.getFocalLength(),luminanceThreshold:.325,luminanceGain:2,bias:-.35,fringe:.7,maxBlur:2.5,rings:5,samples:5,showFocus:!1,manualDoF:!1,pentagon:!0}),p=new aa(r,g),f=new aa(r,m,new Ra());this.renderPass.renderToScreen=!1,p.renderToScreen=!0,this.effect=m,this.pass=f,n.addPass(f),n.addPass(p)}},{key:"registerOptions",value:function(e){var t=this.pass,a=this.effect,n=a.uniforms,o=a.blendMode,r={focus:n.get("focus").value,"focal length":n.get("focalLength").value,threshold:n.get("luminanceThreshold").value,gain:n.get("luminanceGain").value,bias:n.get("bias").value,fringe:n.get("fringe").value,max:n.get("maxBlur").value,"near start":.2,"near dist":1,"far start":.2,"far dist":2,opacity:o.opacity.value,"blend mode":o.blendFunction};e.add(r,"focus").min(this.camera.near).max(20).step(.01).onChange(function(){n.get("focus").value=r.focus}),e.add(r,"focal length").min(.1).max(35).step(.01).onChange(function(){n.get("focalLength").value=r["focal length"]}),e.add(a,"showFocus").onChange(function(){return t.recompile()});var i=e.addFolder("Depth of Field");i.add(a,"manualDoF").onChange(function(){return t.recompile()}),i.add(r,"near start").min(0).max(1).step(.001).onChange(function(){n.has("dof")&&(n.get("dof").value.x=r["near start"])}),i.add(r,"near dist").min(0).max(2).step(.001).onChange(function(){n.has("dof")&&(n.get("dof").value.y=r["near dist"])}),i.add(r,"far start").min(0).max(1).step(.001).onChange(function(){n.has("dof")&&(n.get("dof").value.z=r["far start"])}),i.add(r,"far dist").min(0).max(3).step(.001).onChange(function(){n.has("dof")&&(n.get("dof").value.w=r["far dist"])}),i=e.addFolder("Blur"),i.add(r,"max").min(0).max(5).step(.001).onChange(function(){n.get("maxBlur").value=r.max}),i.add(r,"bias").min(-1).max(1).step(.001).onChange(function(){n.get("bias").value=r.bias}),i.add(r,"fringe").min(0).max(5).step(.001).onChange(function(){n.get("fringe").value=r.fringe}),i.add(a,"rings").min(1).max(8).step(1).onChange(function(){return t.recompile()}),i.add(a,"samples").min(1).max(8).step(1).onChange(function(){return t.recompile()}),i.add(a,"pentagon").onChange(function(){return t.recompile()}),i=e.addFolder("Luminance"),i.add(r,"threshold").min(0).max(1).step(.01).onChange(function(){n.get("luminanceThreshold").value=r.threshold}),i.add(r,"gain").min(0).max(4).step(.01).onChange(function(){n.get("luminanceGain").value=r.gain}),e.add(r,"opacity").min(0).max(1).step(.01).onChange(function(){o.opacity.value=r.opacity}),e.add(r,"blend mode",qt).onChange(function(){o.blendFunction=we(r["blend mode"]),t.recompile()}),e.add(t,"dithering")}}]),a}(jn),$n=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"blur",e)),t.blurPass=null,t.texturePass=null,t.effect=null,t.object=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/sunset/",r=".png",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){if(0===t.size){a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)});var r=new Image;r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL}else e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-15,0,-15),r.lookAt(t.position),this.camera=r;var s=new Wn(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(1440,200,2e3),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,p;for(m=0;100>m;++m)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),p=new e.Mesh(u,g),p.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),p.position.multiplyScalar(10*Math.random()),p.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),p.scale.multiplyScalar(Math.random()),c.add(p);this.object=c,t.add(c);var f=new ra,y=new Wt,v=new La(a.get("smaa-search"),a.get("smaa-area")),A=new Fa({texture:f.renderTarget.texture}),x=new aa(r,v),h=new aa(r,A);A.blendMode.opacity.value=0,this.renderPass.renderToScreen=!1,h.renderToScreen=!0,this.blurPass=y,this.texturePass=h,this.effect=A,n.addPass(x),n.addPass(f),n.addPass(y),n.addPass(h)}},{key:"render",value:function(e){var t=this.object,n=2*De;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),p(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.effect,a=this.texturePass,n=this.blurPass,o=t.blendMode,r={enabled:n.enabled,resolution:n.getResolutionScale(),"kernel size":n.kernelSize,opacity:1-o.opacity.value,"blend mode":o.blendFunction};e.add(r,"resolution").min(.01).max(1).step(.01).onChange(function(){n.setResolutionScale(r.resolution)}),e.add(r,"kernel size",Ot).onChange(function(){n.kernelSize=we(r["kernel size"])}),e.add(n,"dithering"),e.add(n,"enabled"),e.add(r,"opacity").min(0).max(1).step(.01).onChange(function(){o.opacity.value=1-r.opacity}),e.add(r,"blend mode",qt).onChange(function(){o.blendFunction=we(r["blend mode"]),a.recompile()})}}]),a}(jn),eo=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"dot-screen",e)),t.dotScreenEffect=null,t.colorAverageEffect=null,t.pass=null,t.object=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/space3/",r=".jpg",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){if(0===t.size){a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)});var r=new Image;r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL}else e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(10,1,10),r.lookAt(t.position),this.camera=r;var s=new Wn(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,p;for(p=0;100>p;++p)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var f=new La(a.get("smaa-search"),a.get("smaa-area")),y=new ma,v=new ya({blendFunction:qt.OVERLAY,scale:1,angle:.58*De});v.blendMode.opacity.value=.21;var A=new aa(r,f,v,y);this.dotScreenEffect=v,this.colorAverageEffect=y,this.pass=A,this.renderPass.renderToScreen=!1,A.renderToScreen=!0,n.addPass(A)}},{key:"render",value:function(e){var t=this.object,n=2*De;t.rotation.x+=5e-4,t.rotation.y+=.001,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),p(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.pass,a=this.dotScreenEffect,n=this.colorAverageEffect,o={angle:.58*De,scale:a.uniforms.get("scale").value,opacity:a.blendMode.opacity.value,"blend mode":a.blendMode.blendFunction,colorAverage:{opacity:n.blendMode.opacity.value,"blend mode":n.blendMode.blendFunction}};e.add(o,"angle").min(0).max(Math.PI).step(.001).onChange(function(){a.setAngle(o.angle)}),e.add(o,"scale").min(0).max(1).step(.01).onChange(function(){a.uniforms.get("scale").value=o.scale}),e.add(o,"opacity").min(0).max(1).step(.01).onChange(function(){a.blendMode.opacity.value=o.opacity}),e.add(o,"blend mode",qt).onChange(function(){a.blendMode.blendFunction=we(o["blend mode"]),t.recompile()});var r=e.addFolder("Color Average");r.add(o.colorAverage,"opacity").min(0).max(1).step(.01).onChange(function(){n.blendMode.opacity.value=o.colorAverage.opacity}),r.add(o.colorAverage,"blend mode",qt).onChange(function(){n.blendMode.blendFunction=we(o.colorAverage["blend mode"]),t.recompile()})}}]),a}(jn),to=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"glitch",e)),t.effect=null,t.pass=null,t.object=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.TextureLoader(a),o=new e.CubeTextureLoader(a),r="textures/skies/space4/",i=".jpg",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(r,i){if(0===t.size){a.onError=i,a.onProgress=function(e,t,a){t===a&&r()},o.load(s,function(e){t.set("sky",e)}),n.load("textures/perturb.jpg",function(a){a.magFilter=a.minFilter=e.NearestFilter,t.set("perturbation-map",a)});var l=new Image;l.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),l.src=La.searchImageDataURL,l=new Image,l.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),l.src=La.areaImageDataURL}else r()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(6,1,6),r.lookAt(t.position),this.camera=r;var s=new Wn(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,p;for(p=0;100>p;++p)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var f=new La(a.get("smaa-search"),a.get("smaa-area"));f.setEdgeDetectionThreshold(.08);var y=new pa,v=new xa({perturbationMap:a.get("perturbation-map"),chromaticAberrationOffset:y.offset}),A=new Ea({blendFunction:qt.COLOR_DODGE});A.blendMode.opacity.value=.15;var x=new aa(r,f),h=new aa(r,v,A),C=new aa(r,y);this.renderPass.renderToScreen=!1,C.renderToScreen=!0,this.effect=v,n.addPass(x),n.addPass(h),n.addPass(C)}},{key:"render",value:function(e){var t=this.object,n=2*De;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),p(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.effect,a=t.getPerturbationMap(),n=t.uniforms,o=t.delay,r=t.duration,i={"glitch mode":t.mode,"custom pattern":!0,"min delay":o.x,"max delay":o.y,"min duration":r.x,"max duration":r.y,columns:n.get("columns").value};e.add(i,"glitch mode",ha).onChange(function(){t.mode=we(i["glitch mode"])}),e.add(i,"custom pattern").onChange(function(){i["custom pattern"]?t.setPerturbationMap(a):t.setPerturbationMap(t.generatePerturbationMap(64))}),e.add(i,"min delay").min(0).max(2).step(.001).onChange(function(){o.x=i["min delay"]}),e.add(i,"max delay").min(2).max(4).step(.001).onChange(function(){o.y=i["max delay"]}),e.add(i,"min duration").min(0).max(.6).step(.001).onChange(function(){r.x=i["min duration"]}),e.add(i,"max duration").min(.6).max(1.8).step(.001).onChange(function(){r.y=i["max duration"]}),e.add(i,"columns").min(0).max(.5).step(.001).onChange(function(){n.get("columns").value=i.columns})}}]),a}(jn),ao=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"grid",e)),t.effect=null,t.pass=null,t.object=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/space/",r=".jpg",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){var r;0===t.size?(a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)}),r=new Image,r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(10,1,10),r.lookAt(t.position),this.camera=r;var s=new Wn(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,p;for(p=0;100>p;++p)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var f=new La(a.get("smaa-search"),a.get("smaa-area")),y=new ba({scale:2,lineWidth:.1}),v=new aa(r,f,y);this.renderPass.renderToScreen=!1,v.renderToScreen=!0,this.effect=y,this.pass=v,n.addPass(v)}},{key:"render",value:function(e){var t=this.object,n=2*De;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),p(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.pass,a=this.effect,n=a.blendMode,o={scale:a.getScale(),"line width":a.getLineWidth(),opacity:n.opacity.value,"blend mode":n.blendFunction};e.add(o,"scale").min(.01).max(3).step(.01).onChange(function(){a.setScale(o.scale)}),e.add(o,"line width").min(0).max(1).step(.01).onChange(function(){a.setLineWidth(o["line width"])}),e.add(o,"opacity").min(0).max(1).step(.01).onChange(function(){n.opacity.value=o.opacity}),e.add(o,"blend mode",qt).onChange(function(){n.blendFunction=we(o["blend mode"]),t.recompile()}),e.add(t,"dithering")}}]),a}(jn),no=new e.Vector2,oo=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"outline",e)),t.raycaster=null,t.selectedObject=null,t.effect=null,t.pass=null,t}return i(a,t),r(a,[{key:"raycast",value:function(e){var t=this.raycaster,a,n;no.x=2*(e.clientX/window.innerWidth)-1,no.y=2*-(e.clientY/window.innerHeight)+1,t.setFromCamera(no,this.camera),a=t.intersectObjects(this.scene.children),null!==this.selectedObject&&(this.selectedObject=null),0<a.length&&(n=a[0],void 0===n.object?console.warn("Encountered an undefined object",a):this.selectedObject=n.object)}},{key:"handleSelection",value:function(){var e=this.effect,t=e.selection,a=this.selectedObject;null!==a&&(0<=t.indexOf(a)?e.deselectObject(a):e.selectObject(a))}},{key:"handleEvent",value:function(e){switch(e.type){case"mousemove":this.raycast(e);break;case"mousedown":this.handleSelection();}}},{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.TextureLoader(a),o=new e.CubeTextureLoader(a),r="textures/skies/sunset/",i=".png",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(r,i){if(0===t.size){a.onError=i,a.onProgress=function(e,t,a){t===a&&r()},o.load(s,function(e){t.set("sky",e)}),n.load("textures/pattern.png",function(a){a.wrapS=a.wrapT=e.RepeatWrapping,t.set("pattern-color",a)});var l=new Image;l.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),l.src=La.searchImageDataURL,l=new Image,l.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),l.src=La.areaImageDataURL}else r()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-4,1.25,-5),r.lookAt(t.position),this.camera=r;var i=new Wn(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var s=new e.AmbientLight(4210752),l=new e.DirectionalLight(16759722);l.position.set(1440,200,2e3),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.Mesh(new e.SphereBufferGeometry(1,32,32),new e.MeshPhongMaterial({color:16776960}));d.position.set(2,0,-2),t.add(d),d=new e.Mesh(new e.ConeBufferGeometry(1,1,32),new e.MeshPhongMaterial({color:65280})),d.position.set(-2,0,2),t.add(d),d=new e.Mesh(new e.OctahedronBufferGeometry(),new e.MeshPhongMaterial({color:16711935})),d.position.set(2,0,2),t.add(d),d=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshPhongMaterial({color:65535})),d.position.set(-2,0,-2),t.add(d),this.raycaster=new e.Raycaster,o.domElement.addEventListener("mousemove",this),o.domElement.addEventListener("mousedown",this);var c=new La(a.get("smaa-search"),a.get("smaa-area"));c.setEdgeDetectionThreshold(.05);var u=new Sa(t,r,{edgeStrength:2.5,pulseSpeed:0,visibleEdgeColor:16777215,hiddenEdgeColor:2230538,blur:!1,xRay:!0});u.setSelection(t.children),u.deselectObject(d);var g=new aa(r,c),m=new aa(r,u);this.renderPass.renderToScreen=!1,g.renderToScreen=!0,this.effect=u,this.pass=m,n.addPass(m),n.addPass(g)}},{key:"registerOptions",value:function(e){var t=this.assets,a=this.pass,n=this.effect,o=n.uniforms,r=n.blendMode,i={resolution:n.getResolutionScale(),blurriness:0,"use pattern":!1,"pattern scale":60,"pulse speed":n.pulseSpeed,"edge strength":o.get("edgeStrength").value,"visible edge":o.get("visibleEdgeColor").value.getHex(),"hidden edge":o.get("hiddenEdgeColor").value.getHex(),"x-ray":!0,opacity:r.opacity.value,"blend mode":r.blendFunction};e.add(i,"resolution").min(.01).max(1).step(.01).onChange(function(){n.setResolutionScale(i.resolution)}),e.add(n,"dithering"),e.add(i,"blurriness").min(Ot.VERY_SMALL).max(Ot.HUGE+1).step(1).onChange(function(){n.blur=0<i.blurriness,n.kernelSize=i.blurriness-1}),e.add(i,"use pattern").onChange(function(){i["use pattern"]?(n.setPatternTexture(t.get("pattern-color")),o.get("patternScale").value=i["pattern scale"]):n.setPatternTexture(null),a.recompile()}),e.add(i,"pattern scale").min(20).max(100).step(.1).onChange(function(){o.has("patternScale")&&(o.get("patternScale").value=i["pattern scale"])}),e.add(i,"edge strength").min(0).max(10).step(.01).onChange(function(){o.get("edgeStrength").value=i["edge strength"]}),e.add(i,"pulse speed").min(0).max(2).step(.01).onChange(function(){n.pulseSpeed=i["pulse speed"]}),e.addColor(i,"visible edge").onChange(function(){o.get("visibleEdgeColor").value.setHex(i["visible edge"])}),e.addColor(i,"hidden edge").onChange(function(){o.get("hiddenEdgeColor").value.setHex(i["hidden edge"])}),e.add(n,"xRay").onChange(function(){return a.recompile()}),e.add(i,"opacity").min(0).max(1).step(.01).onChange(function(){r.opacity.value=i.opacity}),e.add(i,"blend mode",qt).onChange(function(){r.blendFunction=we(i["blend mode"]),a.recompile()})}},{key:"reset",value:function(){p(s(a.prototype),"reset",this).call(this);var e=this.composer.renderer.domElement;return e.removeEventListener("mousemove",this),e.removeEventListener("mousedown",this),this}}]),a}(jn),ro=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"pixelation",e)),t.effect=null,t.object=null,t.maskPass=null,t.maskObject=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/space/",r=".jpg",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){if(0===t.size){a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)});var r=new Image;r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL}else e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(10,1,10),r.lookAt(t.position),this.camera=r;var s=new Wn(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,p;for(p=0;100>p;++p)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var f=new e.Scene;m=new e.Mesh(new e.BoxBufferGeometry(4,4,4)),this.maskObject=m,f.add(m);var y=new La(a.get("smaa-search"),a.get("smaa-area")),v=new Ba(5),A=new aa(r,v),x=new na(f,r),h=new aa(r,y);this.renderPass.renderToScreen=!1,h.renderToScreen=!0,n.addPass(x),n.addPass(A),n.addPass(new jt),n.addPass(h),this.effect=v,this.maskPass=x}},{key:"render",value:function(e){var t=this.object,n=this.maskObject,o=2*De,r=.001*performance.now();t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=o&&(t.rotation.x-=o),t.rotation.y>=o&&(t.rotation.y-=o),n.position.x=4*Se(r/1.5),n.position.y=4*Be(r),n.rotation.x=r,n.rotation.y=.5*r,p(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.effect,a=this.maskPass,n={"use mask":a.enabled,granularity:t.getGranularity()};e.add(n,"granularity").min(0).max(50).step(.1).onChange(function(){t.setGranularity(n.granularity)}),e.add(n,"use mask").onChange(function(){a.enabled=n["use mask"]})}}]),a}(jn),io=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"god-rays",e)),t.pass=null,t.effect=null,t.sun=null,t.directionalLight=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o=new e.TextureLoader(a),r=new e.ObjectLoader(a),i="textures/skies/starry/",s=".png",l=[i+"px"+s,i+"nx"+s,i+"py"+s,i+"ny"+s,i+"pz"+s,i+"nz"+s];return new Promise(function(i,s){if(0===t.size){a.onError=s,a.onProgress=function(e,t,a){t===a&&i()},n.load(l,function(e){t.set("sky",e)}),r.load("models/waggon.json",function(e){e.rotation.x=.25*De,e.rotation.y=.75*De,t.set("waggon",e)}),o.load("textures/wood.jpg",function(a){a.wrapS=a.wrapT=e.RepeatWrapping,t.set("wood-diffuse",a)}),o.load("textures/sun.png",function(e){t.set("sun-diffuse",e)});var d=new Image;d.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),d.src=La.searchImageDataURL,d=new Image,d.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),d.src=La.areaImageDataURL}else i()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-5,-1,-4),this.camera=r;var i=new e.Vector3(0,.5,0),s=new Wn(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.rotation=.00125,s.settings.sensitivity.zoom=1,s.lookAt(i),this.controls=s,t.background=a.get("sky");var l=new e.AmbientLight(986895),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),this.directionalLight=d,t.add(d),t.add(l);var c=a.get("waggon"),u=new e.MeshPhongMaterial({color:16777215,map:a.get("wood-diffuse")});c.traverse(function(e){e.material=u}),t.add(c);var g=new e.PointsMaterial({map:a.get("sun-diffuse"),size:100,sizeAttenuation:!0,color:16768426,alphaTest:0,transparent:!0,fog:!1}),m=new e.BufferGeometry;m.addAttribute("position",new e.BufferAttribute(new Float32Array(3),3));var p=new e.Points(m,g);p.frustumCulled=!1,p.position.set(75,25,100),this.sun=p,t.add(p);var f=new La(a.get("smaa-search"),a.get("smaa-area"));f.setEdgeDetectionThreshold(.065);var y=new v(t,r,p,{resolutionScale:.6,kernelSize:Ot.SMALL,density:.96,decay:.93,weight:.4,exposure:.6,samples:60,clampMax:1});y.dithering=!0,this.effect=y;var A=new aa(r,f,y);this.pass=A,this.renderPass.renderToScreen=!1,A.renderToScreen=!0,n.addPass(A)}},{key:"registerOptions",value:function(e){var t=this.sun,a=this.directionalLight,n=this.pass,o=this.effect,r=o.godRaysMaterial.uniforms,i=o.blendMode,s={resolution:o.getResolutionScale(),blurriness:o.kernelSize+1,density:r.density.value,decay:r.decay.value,weight:r.weight.value,exposure:r.exposure.value,clampMax:r.clampMax.value,samples:o.samples,color:t.material.color.getHex(),opacity:i.opacity.value,"blend mode":i.blendFunction};e.add(s,"resolution").min(.01).max(1).step(.01).onChange(function(){o.setResolutionScale(s.resolution)}),e.add(o,"dithering"),e.add(s,"blurriness").min(Ot.VERY_SMALL).max(Ot.HUGE+1).step(1).onChange(function(){o.blur=0<s.blurriness,o.kernelSize=s.blurriness-1}),e.add(s,"density").min(0).max(1).step(.01).onChange(function(){r.density.value=s.density}),e.add(s,"decay").min(0).max(1).step(.01).onChange(function(){r.decay.value=s.decay}),e.add(s,"weight").min(0).max(1).step(.01).onChange(function(){r.weight.value=s.weight}),e.add(s,"exposure").min(0).max(1).step(.01).onChange(function(){r.exposure.value=s.exposure}),e.add(s,"clampMax").min(0).max(1).step(.01).onChange(function(){r.clampMax.value=s.clampMax}),e.add(o,"samples").min(15).max(200).step(1),e.addColor(s,"color").onChange(function(){t.material.color.setHex(s.color),a.color.setHex(s.color)}),e.add(s,"opacity").min(0).max(1).step(.01).onChange(function(){i.opacity.value=s.opacity}),e.add(s,"blend mode",qt).onChange(function(){i.blendFunction=we(s["blend mode"]),n.recompile()})}}]),a}(jn),so=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"scanline",e)),t.effect=null,t.pass=null,t.object=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/space/",r=".jpg",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){var r;0===t.size?(a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)}),r=new Image,r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(10,1,10),r.lookAt(t.position),this.camera=r;var s=new Wn(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,p;for(p=0;100>p;++p)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var f=new La(a.get("smaa-search"),a.get("smaa-area")),y=new wa({density:1.5}),v=new aa(r,f,y);this.renderPass.renderToScreen=!1,v.renderToScreen=!0,v.dithering=!0,this.effect=y,this.pass=v,n.addPass(v)}},{key:"render",value:function(e){var t=this.object,n=2*De;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),p(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.pass,a=this.effect,n=a.blendMode,o={density:a.getDensity(),opacity:n.opacity.value,"blend mode":n.blendFunction};e.add(o,"density").min(.001).max(2).step(.001).onChange(function(){a.setDensity(o.density)}),e.add(o,"opacity").min(0).max(1).step(.01).onChange(function(){n.opacity.value=o.opacity}),e.add(o,"blend mode",qt).onChange(function(){n.blendFunction=we(o["blend mode"]),t.recompile()}),e.add(t,"dithering")}}]),a}(jn),lo=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"sepia",e)),t.effect=null,t.pass=null,t.object=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/space/",r=".jpg",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){var r;0===t.size?(a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)}),r=new Image,r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(10,1,10),r.lookAt(t.position),this.camera=r;var s=new Wn(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,p;for(p=0;100>p;++p)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var f=new La(a.get("smaa-search"),a.get("smaa-area")),y=new za,v=new aa(r,f,y);this.renderPass.renderToScreen=!1,v.renderToScreen=!0,v.dithering=!0,this.effect=y,this.pass=v,n.addPass(v)}},{key:"render",value:function(e){var t=this.object,n=2*De;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),p(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.pass,a=this.effect,n=a.blendMode,o={intensity:a.uniforms.get("intensity").value,opacity:n.opacity.value,"blend mode":n.blendFunction};e.add(o,"intensity").min(0).max(4).step(.01).onChange(function(){a.uniforms.get("intensity").value=o.intensity}),e.add(o,"opacity").min(0).max(1).step(.01).onChange(function(){n.opacity.value=o.opacity}),e.add(o,"blend mode",qt).onChange(function(){n.blendFunction=we(o["blend mode"]),t.recompile()}),e.add(t,"dithering")}}]),a}(jn),co=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"shock-wave",e)),t.effect=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/space3/",r=".jpg",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){if(0===t.size){a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)});var r=new Image;r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL}else e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(5,1,5),r.lookAt(t.position),this.camera=r;var i=new Wn(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var s=new e.AmbientLight(6710886),l=new e.DirectionalLight(16759722);l.position.set(-1,1,1),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.SphereBufferGeometry(1,64,64),c=new e.MeshBasicMaterial({color:16776960,envMap:a.get("sky")}),u=new e.Mesh(d,c);t.add(u);var g=new La(a.get("smaa-search"),a.get("smaa-area")),m=new Ta(r,u.position,{speed:1.25,maxRadius:.5,waveSize:.2,amplitude:.05}),p=new aa(r,m),f=new aa(r,g);this.renderPass.renderToScreen=!1,f.renderToScreen=!0,this.effect=m,n.addPass(p),n.addPass(f)}},{key:"registerOptions",value:function(e){var t=this.effect,a=t.uniforms,n={size:a.get("size").value,extent:a.get("maxRadius").value,waveSize:a.get("waveSize").value,amplitude:a.get("amplitude").value};e.add(t,"speed").min(0).max(10).step(.001),e.add(n,"size").min(.01).max(2).step(.001).onChange(function(){a.get("size").value=n.size}),e.add(n,"extent").min(0).max(10).step(.001).onChange(function(){a.get("maxRadius").value=n.extent}),e.add(n,"waveSize").min(0).max(2).step(.001).onChange(function(){a.get("waveSize").value=n.waveSize}),e.add(n,"amplitude").min(0).max(.25).step(.001).onChange(function(){a.get("amplitude").value=n.amplitude}),e.add(t,"explode")}}]),a}(jn),uo=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"smaa",e)),t.originalRenderer=null,t.rendererAA=null,t.controls2=null,t.smaaEffect=null,t.pass=null,t.textureEffect=null,t.objectA=null,t.objectB=null,t.objectC=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.TextureLoader(a),o=new e.CubeTextureLoader(a),r="textures/skies/sunset/",i=".png",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(r,i){var l;0===t.size?(a.onError=i,a.onProgress=function(e,t,a){t===a&&r()},o.load(s,function(e){t.set("sky",e)}),n.load("textures/crate.jpg",function(a){a.wrapS=a.wrapT=e.RepeatWrapping,t.set("crate-color",a)}),l=new Image,l.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),l.src=La.searchImageDataURL,l=new Image,l.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),l.src=La.areaImageDataURL):r()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-3,0,-3),r.lookAt(t.position),this.camera=r,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color);var i=function(t,a,n){var o=new e.WebGLRenderer({logarithmicDepthBuffer:!0,antialias:!0});return o.setSize(t.width,t.height),o.setClearColor(a),o.setPixelRatio(n),o}(o.getSize(),o.getClearColor(),o.getPixelRatio());this.originalRenderer=n.renderer,this.rendererAA=i;var s=new Wn(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s;var l=s.clone();l.setDom(i.domElement),l.setEnabled(!1),this.controls2=l,t.background=a.get("sky");var d=new e.AmbientLight(6710886),c=new e.DirectionalLight(16759722);c.position.set(1440,200,2e3),c.target.position.copy(t.position),t.add(c),t.add(d);var u=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshBasicMaterial({color:0,wireframe:!0}));u.position.set(1.25,0,-1.25),this.objectA=u,t.add(u),u=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshPhongMaterial({map:a.get("crate-color")})),u.position.set(-1.25,0,1.25),this.objectB=u,t.add(u),u=new e.Mesh(new e.BoxBufferGeometry(.25,8.25,.25),new e.MeshPhongMaterial({color:855309}));var g=new e.Object3D,m,p,f;m=g.clone();var y=u.clone();y.position.set(-4,0,4),m.add(y),y=u.clone(),y.position.set(4,0,4),m.add(y),y=u.clone(),y.position.set(-4,0,-4),m.add(y),y=u.clone(),y.position.set(4,0,-4),m.add(y),p=m.clone(),p.rotation.set(De/2,0,0),f=m.clone(),f.rotation.set(0,0,De/2),g.add(m),g.add(p),g.add(f),g.scale.set(.1,.1,.1),this.objectC=g,t.add(g);var v=new La(a.get("smaa-search"),a.get("smaa-area")),A=new Fa({blendFunction:qt.SKIP,texture:v.renderTargetColorEdges.texture}),x=new aa(r,v,A);this.renderPass.renderToScreen=!1,x.renderToScreen=!0,this.smaaEffect=v,this.textureEffect=A,this.pass=x,n.addPass(x)}},{key:"render",value:function(e){var t=this.objectA,n=this.objectB,o=this.objectC,r=2*De;t.rotation.x+=5e-4,t.rotation.y+=.001,n.rotation.copy(t.rotation),o.rotation.copy(t.rotation),t.rotation.x>=r&&(t.rotation.x-=r),t.rotation.y>=r&&(t.rotation.y-=r),p(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){function t(e){var t=o.renderer.getSize();e&&o.renderer!==c?(c.setSize(t.width,t.height),o.replaceRenderer(c),u.setEnabled(!1),g.setEnabled(!0).lookAt(u.getTarget())):(d.setSize(t.width,t.height),o.replaceRenderer(d),u.setEnabled(!0).lookAt(g.getTarget()),g.setEnabled(!1))}var a=Number.parseFloat,n=this.pass,o=this.composer,r=this.renderPass,i=this.smaaEffect,s=this.textureEffect,l=i.blendMode,d=this.originalRenderer,c=this.rendererAA,u=this.controls,g=this.controls2,m={DISABLED:0,BROWSER:1,SMAA_EDGES:2,SMAA:3},p={"AA mode":m.SMAA,sensitivity:a(i.colorEdgesPass.getFullscreenMaterial().defines.EDGE_THRESHOLD),"search steps":a(i.weightsPass.getFullscreenMaterial().defines.MAX_SEARCH_STEPS_INT),opacity:l.opacity.value,"blend mode":l.blendFunction};e.add(p,"AA mode",m).onChange(function(){var e=we(p["AA mode"]);n.enabled=e===m.SMAA||e===m.SMAA_EDGES,r.renderToScreen=e===m.DISABLED||e===m.BROWSER,s.blendMode.blendFunction=e===m.SMAA_EDGES?qt.NORMAL:qt.SKIP,t(e===m.BROWSER),n.recompile()}),e.add(p,"sensitivity").min(.05).max(.5).step(.01).onChange(function(){i.setEdgeDetectionThreshold(p.sensitivity)}),e.add(p,"search steps").min(4).max(112).step(1).onChange(function(){i.setOrthogonalSearchSteps(p["search steps"])}),e.add(p,"opacity").min(0).max(1).step(.01).onChange(function(){l.opacity.value=p.opacity}),e.add(p,"blend mode",qt).onChange(function(){l.blendFunction=we(p["blend mode"]),n.recompile()})}},{key:"reset",value:function(){p(s(a.prototype),"reset",this).call(this),null!==this.rendererAA&&(this.rendererAA.dispose(),this.rendererAA=null),null!==this.controls2&&(this.controls2.dispose(),this.controls2=null)}}]),a}(jn),go=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"texture",e)),t.effect=null,t.pass=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.TextureLoader(a),o=new e.CubeTextureLoader(a),r="textures/skies/sunset/",i=".png",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(r,i){var l;0===t.size?(a.onError=i,a.onProgress=function(e,t,a){t===a&&r()},o.load(s,function(e){t.set("sky",e)}),n.load("textures/scratches.jpg",function(a){a.wrapS=a.wrapT=e.RepeatWrapping,t.set("scratches-color",a)}),l=new Image,l.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),l.src=La.searchImageDataURL,l=new Image,l.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),l.src=La.areaImageDataURL):r()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-.75,-.1,-1),r.lookAt(t.position),this.camera=r;var i=new Wn(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.lookAt(t.position),this.controls=i,t.background=a.get("sky");var s=new La(a.get("smaa-search"),a.get("smaa-area")),l=new Fa({blendFunction:qt.REFLECT,texture:a.get("scratches-color")});l.blendMode.opacity.value=.8;var d=new aa(r,s,l);this.renderPass.renderToScreen=!1,d.renderToScreen=!0,this.effect=l,this.pass=d,n.addPass(d)}},{key:"registerOptions",value:function(e){var t=this.pass,a=this.effect,n=a.blendMode,o={opacity:n.opacity.value,"blend mode":n.blendFunction};e.add(o,"opacity").min(0).max(1).step(.01).onChange(function(){n.opacity.value=o.opacity}),e.add(o,"blend mode",qt).onChange(function(){n.blendFunction=we(o["blend mode"]),t.recompile()}),e.add(t,"dithering")}}]),a}(jn),mo=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"tone-mapping",e)),t.effect=null,t.pass=null,t.object=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.TextureLoader(a),o=new e.CubeTextureLoader(a),r="textures/skies/sunset/",i=".png",s=[r+"px"+i,r+"nx"+i,r+"py"+i,r+"ny"+i,r+"pz"+i,r+"nz"+i];return new Promise(function(r,i){if(0===t.size){a.onError=i,a.onProgress=function(e,t,a){t===a&&r()},o.load(s,function(e){t.set("sky",e)}),n.load("textures/crate.jpg",function(a){a.wrapS=a.wrapT=e.RepeatWrapping,t.set("crate-color",a)});var l=new Image;l.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),l.src=La.searchImageDataURL,l=new Image,l.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),l.src=La.areaImageDataURL}else r()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(-3,0,-3),r.lookAt(t.position),this.camera=r;var i=new Wn(r.position,r.quaternion,o.domElement);i.settings.pointer.lock=!1,i.settings.translation.enabled=!1,i.settings.sensitivity.zoom=1,i.settings.zoom.minDistance=2.5,i.settings.zoom.maxDistance=40,i.lookAt(t.position),this.controls=i,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var s=new e.AmbientLight(6710886),l=new e.DirectionalLight(16759722);l.position.set(1440,200,2e3),l.target.position.copy(t.position),t.add(l),t.add(s);var d=new e.Mesh(new e.BoxBufferGeometry(1,1,1),new e.MeshPhongMaterial({map:a.get("crate-color")}));this.object=d,t.add(d);var c=new La(a.get("smaa-search"),a.get("smaa-area"));c.setEdgeDetectionThreshold(.06);var u=new Ia({blendFunction:qt.NORMAL,adaptive:!0,resolution:256,distinction:2,middleGrey:.6,maxLuminance:16,averageLuminance:1,adaptationRate:2});this.effect=u;var g=new aa(r,c,u);g.dithering=!0,this.pass=g,this.renderPass.renderToScreen=!1,g.renderToScreen=!0,n.addPass(g)}},{key:"render",value:function(e){var t=this.object,n=2*De;t.rotation.x+=5e-4,t.rotation.y+=.001,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),p(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.pass,a=this.effect,n=a.blendMode,o=Object.keys(qt).map(function(e){return e.toLowerCase()}),r={resolution:Ee(a.resolution),"adaptation rate":a.adaptationRate,"average lum":a.uniforms.get("averageLuminance").value,"max lum":a.uniforms.get("maxLuminance").value,"middle grey":a.uniforms.get("middleGrey").value,opacity:n.opacity.value,"blend mode":o[n.blendFunction]};e.add(r,"resolution").min(6).max(11).step(1).onChange(function(){a.resolution=Pe(2,r.resolution),t.recompile()});var i=e.addFolder("Luminance");i.add(a,"adaptive").onChange(function(){t.recompile()}),i.add(a,"distinction").min(1).max(10).step(.1),i.add(r,"adaptation rate").min(0).max(5).step(.01).onChange(function(){a.adaptationRate=r["adaptation rate"]}),i.add(r,"average lum").min(.01).max(1).step(.01).onChange(function(){a.uniforms.get("averageLuminance").value=r["average lum"]}),i.add(r,"max lum").min(0).max(32).step(1).onChange(function(){a.uniforms.get("maxLuminance").value=r["max lum"]}),i.add(r,"middle grey").min(0).max(1).step(.01).onChange(function(){a.uniforms.get("middleGrey").value=r["middle grey"]}),i.open(),e.add(r,"opacity").min(0).max(1).step(.01).onChange(function(){n.opacity.value=r.opacity}),e.add(r,"blend mode",o).onChange(function(){n.blendFunction=o.indexOf(r["blend mode"]),t.recompile()}),e.add(t,"dithering")}}]),a}(jn),po=function(t){function a(e){var t;return n(this,a),t=u(this,s(a).call(this,"vignette",e)),t.effect=null,t.pass=null,t.object=null,t}return i(a,t),r(a,[{key:"load",value:function(){var t=this.assets,a=this.loadingManager,n=new e.CubeTextureLoader(a),o="textures/skies/space/",r=".jpg",i=[o+"px"+r,o+"nx"+r,o+"py"+r,o+"ny"+r,o+"pz"+r,o+"nz"+r];return new Promise(function(e,o){var r;0===t.size?(a.onError=o,a.onProgress=function(t,a,n){a===n&&e()},n.load(i,function(e){t.set("sky",e)}),r=new Image,r.addEventListener("load",function(){t.set("smaa-search",this),a.itemEnd("smaa-search")}),a.itemStart("smaa-search"),r.src=La.searchImageDataURL,r=new Image,r.addEventListener("load",function(){t.set("smaa-area",this),a.itemEnd("smaa-area")}),a.itemStart("smaa-area"),r.src=La.areaImageDataURL):e()})}},{key:"initialize",value:function(){var t=this.scene,a=this.assets,n=this.composer,o=n.renderer,r=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(10,1,10),r.lookAt(t.position),this.camera=r;var s=new Wn(r.position,r.quaternion,o.domElement);s.settings.pointer.lock=!1,s.settings.translation.enabled=!1,s.settings.sensitivity.zoom=1,s.lookAt(t.position),this.controls=s,t.fog=new e.FogExp2(0,.0025),o.setClearColor(t.fog.color),t.background=a.get("sky");var l=new e.AmbientLight(6710886),d=new e.DirectionalLight(16759722);d.position.set(-1,1,1),d.target.position.copy(t.position),t.add(d),t.add(l);var c=new e.Object3D,u=new e.SphereBufferGeometry(1,4,4),g,m,p;for(p=0;100>p;++p)g=new e.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),m=new e.Mesh(u,g),m.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),m.position.multiplyScalar(10*Math.random()),m.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),m.scale.multiplyScalar(Math.random()),c.add(m);this.object=c,t.add(c);var f=new La(a.get("smaa-search"),a.get("smaa-area")),y=new Ra({eskil:!1,offset:.35,darkness:.75}),v=new aa(r,f,y);this.renderPass.renderToScreen=!1,v.renderToScreen=!0,this.effect=y,this.pass=v,n.addPass(v)}},{key:"render",value:function(e){var t=this.object,n=2*De;t.rotation.x+=.001,t.rotation.y+=.005,t.rotation.x>=n&&(t.rotation.x-=n),t.rotation.y>=n&&(t.rotation.y-=n),p(s(a.prototype),"render",this).call(this,e)}},{key:"registerOptions",value:function(e){var t=this.pass,a=this.effect,n=a.blendMode,o={offset:a.uniforms.get("offset").value,darkness:a.uniforms.get("darkness").value,opacity:n.opacity.value,"blend mode":n.blendFunction};e.add(a,"eskil").onChange(function(){return t.recompile()}),e.add(o,"offset").min(0).max(1).step(.001).onChange(function(){a.uniforms.get("offset").value=o.offset}),e.add(o,"darkness").min(0).max(1).step(.001).onChange(function(){a.uniforms.get("darkness").value=o.darkness}),e.add(o,"opacity").min(0).max(1).step(.01).onChange(function(){n.opacity.value=o.opacity}),e.add(o,"blend mode",qt).onChange(function(){n.blendFunction=we(o["blend mode"]),t.recompile()}),e.add(t,"dithering")}}]),a}(jn),fo,yo,vo;window.addEventListener("load",function t(){this.removeEventListener("load",t);var a=document.getElementById("viewport");fo=new e.WebGLRenderer({logarithmicDepthBuffer:!0,antialias:!1}),fo.setSize(a.clientWidth,a.clientHeight),fo.setPixelRatio(window.devicePixelRatio),fo.setClearColor(0),yo=new sa(fo,{stencilBuffer:!0}),vo=new Tt(a,{aside:document.getElementById("aside"),renderer:fo}),vo.addEventListener("change",ve),vo.addEventListener("load",Ae),vo.addDemo(new Kn(yo)),vo.addDemo(new $n(yo)),vo.addDemo(new Jn(yo)),vo.addDemo(new Zn(yo)),vo.addDemo(new qn(yo)),vo.addDemo(new eo(yo)),vo.addDemo(new to(yo)),vo.addDemo(new io(yo)),vo.addDemo(new ao(yo)),vo.addDemo(new oo(yo)),vo.addDemo(new ro(yo)),vo.addDemo(new so(yo)),vo.addDemo(new lo(yo)),vo.addDemo(new co(yo)),vo.addDemo(new uo(yo)),vo.addDemo(new go(yo)),vo.addDemo(new mo(yo)),vo.addDemo(new po(yo)),ye()}),window.addEventListener("resize",function(){function e(e){var a=e.target.innerWidth,n=e.target.innerHeight;vo.setSize(a,n),yo.setSize(a,n),t=0}var t=0;return function(a){0===t&&(t=setTimeout(e,66,a))}}()),document.addEventListener("keydown",function(e){var t=this.getElementById("aside");e.altKey&&null!==t&&(e.preventDefault(),t.style.visibility="hidden"===t.style.visibility?"visible":"hidden")})})(THREE);
