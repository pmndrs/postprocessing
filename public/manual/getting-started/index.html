<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Raoul van Rüschen"><meta name=generator content="Hugo 0.152.2"><title>Getting Started &#183; Post Processing Manual</title><base href=//pp.pmnd.rs/><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><script>document.documentElement.classList[localStorage.getItem("dark-mode")?"add":"remove"]("dark")</script><link rel=stylesheet href=/css/dist/index.60cbe46f8fbf5f9e36f08d6e6e18aa508134999cf1f99de608031ec3075c112d.css integrity="sha256-YMvkb4+/X5428I1ubhiqUIE0mZzx+Z3mCAMewwdcES0="><script defer src=/js/dist/index.acfa24b773fbd4b374e1e0207a9fba69df39c3a331e40b3d41961c309c92c30d.js integrity="sha256-rPokt3P71LN04eAgep+6ad85w6Mx5As9QZYcMJySww0="></script><script defer src=/js/dist/libs/vendor.8f861f0a0ce88bf5cafa15ed3633c19bd94072c9541a1fd95646d2dde32fe2d2.js integrity="sha256-j4YfCgzoi/XK+hXtNjPBm9lAcslUGh/ZVkbS3eMv4tI="></script></head><body class="preload page single"><div class=frame-content><div><a class=skip-main href=#main>Skip to content</a><div class=sidebar-button-open aria-label="Open navigation menu"></div><div class=sidebar><header class=page-header><h1 class=page-title><a href=/>Post Processing Manual</a></h1><div class=sidebar-button-close aria-label="Close navigation menu"></div></header><nav class=navigation><h2 class=main>Start</h2><ul class=menu><li><a href=/><span>Introduction</span></a></li><li class="getting-started active"><a href=/getting-started/><span>Getting Started</span></a></li><li class=custom-effects><a href=/custom-effects/><span>Custom Effects</span></a></li><li class=migration-guide><a href=/migration-guide/><span>Migration Guide</span></a></li><li><a href=../docs/ target=_blank><span>API Reference</span></a></li></ul><h2 class=community>Community</h2><ul class=menu><li class=plugins-tools><a href=/plugins-tools/><span>Plugins and Tools</span></a></li><li><a href=https://github.com/pmndrs/postprocessing/issues target=_blank><span>Issue Tracker</span></a></li><li><a href=https://discord.com/invite/poimandres target=_blank><span>Discord</span></a></li><li><a href=https://github.com/pmndrs/postprocessing/discussions target=_blank><span>Forum</span></a></li></ul><h2 class=demos>Demos</h2><ul class=menu><li class=anti-aliasing><h3>Anti-Aliasing</h3><ul class=sub-menu><li class=msaa><a href=/demos/anti-aliasing/msaa/><span>MSAA</span></a></li><li class=smaa><a href=/demos/anti-aliasing/smaa/><span>SMAA</span></a></li><li class=fxaa><a href=/demos/anti-aliasing/fxaa/><span>FXAA</span></a></li></ul></li><li class=color-grading><h3>Color Grading</h3><ul class=sub-menu><li class=brightness-contrast><a href=/demos/color-grading/brightness-contrast/><span>Brightness and Contrast</span></a></li><li class=hue-saturation><a href=/demos/color-grading/hue-saturation/><span>Hue and Saturation</span></a></li><li class=lut><a href=/demos/color-grading/lut/><span>LUT</span></a></li><li class=sepia><a href=/demos/color-grading/sepia/><span>Sepia</span></a></li><li class=tone-mapping><a href=/demos/color-grading/tone-mapping/><span>Tone Mapping</span></a></li></ul></li><li class=special-effects><h3>Special Effects</h3><ul class=sub-menu><li class=ascii><a href=/demos/special-effects/ascii/><span>ASCII</span></a></li><li class=chromatic-aberration><a href=/demos/special-effects/chromatic-aberration/><span>Chromatic Aberration</span></a></li><li class=color-depth><a href=/demos/special-effects/color-depth/><span>Color Depth</span></a></li><li class=depth-of-field><a href=/demos/special-effects/depth-of-field/><span>Depth of Field</span></a></li><li class=dot-screen><a href=/demos/special-effects/dot-screen/><span>Dot Screen</span></a></li><li class=glitch><a href=/demos/special-effects/glitch/><span>Glitch</span></a></li><li class=grid><a href=/demos/special-effects/grid/><span>Grid</span></a></li><li class=pixelation><a href=/demos/special-effects/pixelation/><span>Pixelation</span></a></li><li class=tilt-shift><a href=/demos/special-effects/tilt-shift/><span>Tilt Shift</span></a></li><li class=scanlines><a href=/demos/special-effects/scanlines/><span>Scanlines</span></a></li><li class=vignette><a href=/demos/special-effects/vignette/><span>Vignette</span></a></li></ul></li><li class=light-shadow><h3>Light & Shadow</h3><ul class=sub-menu><li class=bloom><a href=/demos/light-shadow/bloom/><span>Bloom</span></a></li><li class=god-rays><a href=/demos/light-shadow/god-rays/><span>God Rays</span></a></li><li class=ssao><a href=/demos/light-shadow/ssao/><span>SSAO</span></a></li></ul></li><li class=utility><h3>Utility</h3><ul class=sub-menu><li class=blur><a href=/demos/utility/blur/><span>Blur</span></a></li><li class=depth-picking><a href=/demos/utility/depth-picking/><span>Depth Picking</span></a></li><li class=outline><a href=/demos/utility/outline/><span>Outline</span></a></li><li class=texture><a href=/demos/utility/texture/><span>Texture</span></a></li></ul></li></ul></nav><footer class=page-footer><div class=contentinfo><ul class=menu><li class=legal><a href=/legal/><span>Legal</span></a></li><li class=privacy><a href=/privacy/><span>Privacy Policy</span></a></li></ul></div><div class=icons><div class=dark-mode title="Dark mode"></div><a href=https://github.com/pmndrs/postprocessing target=_blank><div class=repository title=Repository></div></a><a href=https://www.patreon.com/vanruesc target=_blank><div class=support title=Support></div></a></div></footer></div><main id=main class=getting-started tabindex=-1><div class=content><div><h1 id=getting-started>Getting Started <a href=/getting-started/#getting-started>¶</a></h1><h2 id=installation>Installation <a href=/getting-started/#installation>¶</a></h2><p>This library requires the peer dependency <a href=https://github.com/mrdoob/three.js/>three</a>. Check the <a href=https://github.com/vanruesc/postprocessing/releases>release notes</a> for supported versions.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>npm install three postprocessing
</span></span></code></pre></div><h2 id=build-setup>Build Setup <a href=/getting-started/#build-setup>¶</a></h2><p>To get started, pick a bundler of your choice:</p><ul><li><a href=https://github.com/evanw/esbuild>esbuild</a></li><li><a href=https://github.com/swc-project/swc>swc</a></li><li><a href=https://github.com/rollup/rollup>rollup</a></li><li><a href=https://github.com/webpack/webpack>webpack</a></li><li><a href=https://github.com/parcel-bundler/parcel>parcel</a></li></ul><p>This list is not exhaustive, so feel free to look around for another tool that best suits your needs. For more information about configuration, features and plugins, see the official documentation of your chosen bundler.</p><h3 id=example>Example <a href=/getting-started/#example>¶</a></h3><p>The following example uses esbuild for bundling.</p><p><strong>package.json</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nt>&#34;scripts&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nt>&#34;build&#34;</span><span class=p>:</span> <span class=s2>&#34;esbuild src/app.js --bundle --minify --outfile=dist/app.js&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=nt>&#34;dependencies&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nt>&#34;postprocessing&#34;</span><span class=p>:</span> <span class=s2>&#34;x.x.x&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nt>&#34;three&#34;</span><span class=p>:</span> <span class=s2>&#34;x.x.x&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=nt>&#34;devDependencies&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nt>&#34;esbuild&#34;</span><span class=p>:</span> <span class=s2>&#34;x.x.x&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>src/app.js</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>RenderPipeline</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;postprocessing&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>RenderPipeline</span><span class=p>);</span>
</span></span></code></pre></div><p>Install <a href=https://nodejs.org>node.js</a> and use the command <code>npm run build</code> to generate the code bundle. Include the bundle in an HTML file to run it in a browser.</p><h2 id=usage>Usage <a href=/getting-started/#usage>¶</a></h2><p>Postprocessing extends the common rendering workflow with fullscreen image manipulation tools. The following WebGL attributes should be used for an optimal workflow:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>WebGLRenderer</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;three&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>renderer</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>WebGLRenderer</span><span class=p>({</span>
</span></span><span class=line><span class=cl>	<span class=nx>powerPreference</span><span class=o>:</span> <span class=s2>&#34;high-performance&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>antialias</span>: <span class=kt>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>stencil</span>: <span class=kt>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>depth</span>: <span class=kt>false</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p><a href>RenderPipelines</a> are used to group passes. Common setups will only require one pipeline that contains a <a href>ClearPass</a>, a <a href>GeometryPass</a> and one or more <a href>EffectPass</a> instances. The latter is used to render fullscreen <a href>Effects</a>. Please refer to the <a href=https://threejs.org/docs/#manual/en/introduction/Creating-a-scene>three.js manual</a> for more information on how to setup the renderer, scene and camera.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>BloomEffect</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>ClearPass</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>EffectPass</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>GeometryPass</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>RenderPipeline</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;postprocessing&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>container</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s2>&#34;.viewport&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>container</span><span class=p>.</span><span class=nx>prepend</span><span class=p>(</span><span class=nx>renderer</span><span class=p>.</span><span class=nx>domElement</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>scene</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Scene</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>camera</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>PerspectiveCamera</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>pipeline</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>RenderPipeline</span><span class=p>(</span><span class=nx>renderer</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>pipeline</span><span class=p>.</span><span class=nx>addPass</span><span class=p>(</span><span class=k>new</span> <span class=nx>ClearPass</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>pipeline</span><span class=p>.</span><span class=nx>addPass</span><span class=p>(</span><span class=k>new</span> <span class=nx>GeometryPass</span><span class=p>(</span><span class=nx>scene</span><span class=p>,</span> <span class=nx>camera</span><span class=p>,</span> <span class=p>{</span> <span class=nx>samples</span>: <span class=kt>4</span> <span class=p>}));</span>
</span></span><span class=line><span class=cl><span class=nx>pipeline</span><span class=p>.</span><span class=nx>addPass</span><span class=p>(</span><span class=k>new</span> <span class=nx>EffectPass</span><span class=p>(</span><span class=k>new</span> <span class=nx>BloomEffect</span><span class=p>()));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>onResize</span><span class=p>()</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kr>const</span> <span class=nx>width</span> <span class=o>=</span> <span class=nx>container</span><span class=p>.</span><span class=nx>clientWidth</span><span class=p>,</span> <span class=nx>height</span> <span class=o>=</span> <span class=nx>container</span><span class=p>.</span><span class=nx>clientHeight</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=nx>camera</span><span class=p>.</span><span class=nx>aspect</span> <span class=o>=</span> <span class=nx>width</span> <span class=o>/</span> <span class=nx>height</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=nx>camera</span><span class=p>.</span><span class=nx>updateProjectionMatrix</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=nx>pipeline</span><span class=p>.</span><span class=nx>setSize</span><span class=p>(</span><span class=nx>width</span><span class=p>,</span> <span class=nx>height</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;resize&#34;</span><span class=p>,</span> <span class=nx>onResize</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>onResize</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>requestAnimationFrame</span><span class=p>(</span><span class=kd>function</span> <span class=nx>render</span><span class=p>(</span><span class=nx>timestamp</span>: <span class=kt>number</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>requestAnimationFrame</span><span class=p>(</span><span class=nx>render</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nx>pipeline</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span><span class=nx>timestamp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><h2 id=color-space-considerations>Color Space Considerations <a href=/getting-started/#color-space-considerations>¶</a></h2><p>New applications should follow a <a href=https://docs.unity3d.com/Manual/LinearRendering-LinearOrGammaWorkflow.html>linear workflow</a> for color management and postprocessing supports this automatically. Simply set <code>WebGLRenderer.canvasColorSpace</code> to <code>SRGBColorSpace</code> and postprocessing will follow suit. Built-in passes automatically encode colors when they render to screen and internal render operations are always performed in the most appropriate color space.</p><p>Postprocessing uses <code>UnsignedByteType</code> sRGB frame buffers to store intermediate results due to good hardware support and resource efficiency. This is a compromise because linear results normally require at least 12 bits per color channel to prevent <a href=https://blog.demofox.org/2018/03/10/dont-convert-srgb-u8-to-linear-u8/>color degradation and banding</a>. With low precision sRGB buffers, colors will be clamped to [0.0, 1.0] and information loss will shift to the darker spectrum which leads to noticable banding in dark scenes. Linear, high precision <code>HalfFloatType</code> buffers don&rsquo;t have these issues and are the preferred option for HDR-like workflows on desktop devices. You can enable high precision frame buffers like so:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>HalfFloatType</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;three&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>geoPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>GeometryPass</span><span class=p>(</span><span class=nx>scene</span><span class=p>,</span> <span class=nx>camera</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>frameBufferType</span>: <span class=kt>HalfFloatType</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>See <a href=https://threejs.org/docs/#manual/en/introduction/Color-management>three&rsquo;s color management manual</a> for more information on the topic.</p></div></div></main></div></div><script>document.querySelector(".navigation").scrollTop=Number(sessionStorage.getItem("nav-scroll")),document.querySelector("main").scrollTop=Number(sessionStorage.getItem("main-scroll"))</script></body></html>