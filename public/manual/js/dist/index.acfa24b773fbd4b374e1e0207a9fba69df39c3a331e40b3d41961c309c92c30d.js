"use strict";(()=>{var a=class{initialize(){let e=document.querySelector(".navigation"),t=document.getElementById("main");sessionStorage.removeItem("nav-scroll"),sessionStorage.removeItem("main-scroll");let s=!0,o=!0;function n(){s=!1}function i(){o=!1}for(let u of document.querySelectorAll("a"))u.target!=="_blank"&&u.addEventListener("click",n);document.querySelector(".page-title a").addEventListener("click",i),window.addEventListener("beforeunload",()=>{o&&sessionStorage.setItem("nav-scroll",e.scrollTop.toFixed(0)),s&&sessionStorage.setItem("main-scroll",t.scrollTop.toFixed(0))})}};var l=class{initialize(){let e=document.querySelector(".sidebar"),t=document.querySelector(".sidebar-button-open"),s=document.querySelector(".sidebar-button-close");t.addEventListener("click",()=>{e.classList.add("active"),t.classList.add("hidden")}),s.addEventListener("click",()=>{e.classList.remove("active"),t.classList.remove("hidden")}),document.body.addEventListener("click",o=>{let n=o.target;s.offsetParent!==null&&n!==t&&!e.contains(n)&&(e.classList.remove("active"),t.classList.remove("hidden"))})}};var c=class{setDarkModeEnabled(e){e?(localStorage.setItem("dark-mode","1"),document.documentElement.classList.add("dark")):(localStorage.removeItem("dark-mode"),document.documentElement.classList.remove("dark"))}initialize(){document.querySelector(".dark-mode").addEventListener("click",()=>this.setDarkModeEnabled(localStorage.getItem("dark-mode")===null));let t=window.matchMedia("(prefers-color-scheme: dark)");t.addEventListener("change",s=>this.setDarkModeEnabled(s.matches)),this.setDarkModeEnabled(t.matches||localStorage.getItem("dark-mode")!==null)}};var d=class{constructor(){this.viewport=null,this.fullscreenButton=null,this.preventScrolling=!1}showErrorMessage(e){let t=this.viewport,s=t.querySelector("canvas"),o=t.querySelector(".warning"),n=t.querySelector(".error"),i=n.querySelector("p");i.innerText=e,t.classList.remove("loading"),o.classList.add("hidden"),s.classList.add("hidden"),n.classList.remove("hidden")}showEpilepsyWarning(){let e=this.viewport,t=e.querySelector("canvas"),s=e.querySelector(".warning"),o=e.querySelector(".tp"),n=s.querySelector("a");o.classList.toggle("hidden"),t.classList.toggle("hidden"),s.classList.toggle("hidden"),n.addEventListener("click",i=>{i.preventDefault(),sessionStorage.setItem("epilepsy-warning","1"),s.classList.toggle("hidden"),t.classList.toggle("hidden"),o.classList.toggle("hidden")})}handleScroll(e){this.preventScrolling&&e.preventDefault()}toggleFullscreen(){document.fullscreenEnabled&&(document.fullscreenElement!==null?document.exitFullscreen():this.viewport.requestFullscreen())}handleEvent(e){switch(e.type){case"mouseenter":this.preventScrolling=!0;break;case"mouseleave":this.preventScrolling=!1;break;case"wheel":this.handleScroll(e);break;case"click":this.toggleFullscreen();break;case"fullscreenchange":this.fullscreenButton.classList.toggle("active");break;case"unhandledrejection":this.showErrorMessage(e.reason.message);break}}initialize(){let e=this.viewport=document.querySelector(".viewport");e!==null&&(window.addEventListener("unhandledrejection",this),document.getElementById("main").addEventListener("wheel",this),e.addEventListener("mouseenter",this),e.addEventListener("mouseleave",this),(this.fullscreenButton=e.querySelector(".fullscreen")).addEventListener("click",this),document.addEventListener("fullscreenchange",this),new MutationObserver((n,i)=>{for(let u of n)if(u.type==="childList"){e.classList.remove("loading");let h=sessionStorage.getItem("epilepsy-warning")!==null;e.dataset.epilepsyWarning&&!h&&this.showEpilepsyWarning(),i.disconnect()}}).observe(e,{childList:!0}))}};function m(r){switch(r){case"three":case"three/examples/jsm/loaders/GLTFLoader.js":case"tweakpane":case"spatial-controls":return window.VENDOR;default:throw new Error(`Cannot require ${r}`)}}Object.assign(window,{require:m});window.addEventListener("DOMContentLoaded",r=>{let e=[new a,new l,new c,new d];for(let t of e)t.initialize()});window.addEventListener("load",r=>{document.body.classList.remove("preload")});})();
