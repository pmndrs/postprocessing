<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="map[email:vanruesc@outlook.de name:Raoul van Rüschen]"><meta name=generator content="Hugo 0.152.2"><title>User Interface &#183; Post Processing Manual</title><base href=//pmndrs.github.io/postprocessing/manual/><script>"use strict";(()=>{localStorage.getItem("dark-mode")==="enabled"&&document.documentElement.classList.add("dark")})()</script><link rel=stylesheet href=/postprocessing/manual/css/dist/index.65f0f996d638e0fd51d31090c2312af5732104870a43ae77d7310801fea3c909.css integrity="sha256-ZfD5ltY44P1R0xCQwjEq9XMhBIcKQ6531zEIAf6jyQk=" crossorigin=anonymous><script defer src=/postprocessing/manual/js/dist/index.55b8038d8cb75af9e822adde2b9cac5e04837aee89fc579733b407008aa142f7.js integrity="sha256-VbgDjYy3WvnoIq3eK5ysXgSDeu6J/FeXM7QHAIqhQvc=" crossorigin=anonymous></script><script defer src=/postprocessing/manual/js/dist/libs/vendor.a0d935b8b50e2836f7a7e9c569f12a9a428e4e3b4fc4102ddef0103f0de58576.js integrity="sha256-oNk1uLUOKDb3p+nFafEqmkKOTjtPxBAt3vAQPw3lhXY=" crossorigin=anonymous></script><script defer src=/postprocessing/manual/js/dist/demos/ui.e49ef20b75ddc8b0aac50b3ebec571231eebfeff6d3f041f6ee8753a8e33d3ee.js integrity="sha256-5J7yC3XdyLCqxQs+vsVxIx7r/v9tPwQfbuh1Oo4z0+4=" crossorigin=anonymous></script></head><body class="preload demos single"><div class=frame-content><div><a class=skip-to-content href=/postprocessing/manual/demos/utility/ui/#content>Skip to content</a><div class=sidebar-button-open aria-label="Open navigation menu"></div><div class=sidebar><header class=page-header><div class=page-title><a href=//pmndrs.github.io/postprocessing/manual/>Post Processing Manual</a></div><div class=sidebar-button-close aria-label="Close navigation menu"></div></header><nav class=navigation><div class=search><pagefind-config bundle-path=//pmndrs.github.io/postprocessing/manual/pagefind/ excerpt-length=10></pagefind-config><pagefind-searchbox></pagefind-searchbox></div><ul><li class="menu main expanded" data-id=main><h2>Start</h2><ul><li class=manual><a href=/postprocessing/manual/><span>Introduction</span></a></li><li class=getting-started><a href=/postprocessing/manual/getting-started/><span>Getting Started</span></a></li><li class=custom-passes><a href=/postprocessing/manual/custom-passes/><span>Custom Passes</span></a></li><li class=custom-effects><a href=/postprocessing/manual/custom-effects/><span>Custom Effects</span></a></li><li class=migration-guide><a href=/postprocessing/manual/migration-guide/><span>Migration Guide</span></a></li><li><a href=../docs/ target=_blank><span>API Reference</span></a></li></ul></li><li class="menu community expanded" data-id=community><h2>Community</h2><ul><li class=plugins-tools><a href=/postprocessing/manual/plugins-tools/><span>Plugins and Tools</span></a></li><li><a href=https://github.com/pmndrs/postprocessing/issues target=_blank><span>Issue Tracker</span></a></li><li><a href=https://discord.com/invite/poimandres target=_blank><span>Discord</span></a></li><li><a href=https://github.com/pmndrs/postprocessing/discussions target=_blank><span>Forum</span></a></li></ul></li><li class="menu demos active expanded" data-id=demos><h2>Demos</h2><ul><li class="menu anti-aliasing" data-id=anti-aliasing><h3>Anti-Aliasing</h3><div><ul><li class=fxaa><a href=/postprocessing/manual/demos/anti-aliasing/fxaa/><span>FXAA</span></a></li><li class=msaa><a href=/postprocessing/manual/demos/anti-aliasing/msaa/><span>MSAA</span></a></li><li class=smaa><a href=/postprocessing/manual/demos/anti-aliasing/smaa/><span>SMAA</span></a></li></ul></div></li><li class="menu color-grading" data-id=color-grading><h3>Color Grading</h3><div><ul><li class=lut><a href=/postprocessing/manual/demos/color-grading/lut/><span>LUT</span></a></li><li class=tone-mapping><a href=/postprocessing/manual/demos/color-grading/tone-mapping/><span>Tone Mapping</span></a></li></ul></div></li><li class="menu special-effects" data-id=special-effects><h3>Special Effects</h3><div><ul><li class=ascii><a href=/postprocessing/manual/demos/special-effects/ascii/><span>ASCII</span></a></li><li class=color-depth><a href=/postprocessing/manual/demos/special-effects/color-depth/><span>Color Depth</span></a></li><li class=halftone><a href=/postprocessing/manual/demos/special-effects/halftone/><span>Halftone</span></a></li><li class=noise><a href=/postprocessing/manual/demos/special-effects/noise/><span>Noise</span></a></li><li class=scanlines><a href=/postprocessing/manual/demos/special-effects/scanlines/><span>Scanlines</span></a></li><li class=vignette><a href=/postprocessing/manual/demos/special-effects/vignette/><span>Vignette</span></a></li></ul></div></li><li class="menu light-shadow" data-id=light-shadow><h3>Light & Shadow</h3><div><ul><li class=bloom><a href=/postprocessing/manual/demos/light-shadow/bloom/><span>Bloom</span></a></li></ul></div></li><li class="menu utility active expanded" data-id=utility><h3>Utility</h3><div><ul><li class=blur><a href=/postprocessing/manual/demos/utility/blur/><span>Blur</span></a></li><li class=depth-picking><a href=/postprocessing/manual/demos/utility/depth-picking/><span>Depth Picking</span></a></li><li class=gbuffer><a href=/postprocessing/manual/demos/utility/gbuffer/><span>Geometry Buffer</span></a></li><li class=lens-distortion><a href=/postprocessing/manual/demos/utility/lens-distortion/><span>Lens Distortion</span></a></li><li class=scissor-viewport><a href=/postprocessing/manual/demos/utility/scissor-viewport/><span>Scissor & Viewport</span></a></li><li class=texture><a href=/postprocessing/manual/demos/utility/texture/><span>Texture</span></a></li><li class="ui active"><a href=/postprocessing/manual/demos/utility/ui/><span>User Interface</span></a></li></ul></div></li></ul></li></ul></nav><footer class=page-footer><div class=contentinfo><ul><li class=legal><a href=/postprocessing/manual/legal/><span>Legal</span></a></li><li class=privacy><a href=/postprocessing/manual/privacy/><span>Privacy Policy</span></a></li></ul></div><div class=buttons><div class=dark-mode title="Dark mode"></div><a href=https://github.com/pmndrs/postprocessing target=_blank><div class=repository title=Repository></div></a><a href=https://github.com/sponsors/vanruesc target=_blank><div class=support title=Support></div></a></div></footer></div><main id=main class=ui tabindex=-1><div id=viewport class=loading><div class=progress aria-label=loading><div class="spinner cubegrid"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><div class=buttons><div class="icon fullscreen" title=Fullscreen></div><a href=https://github.com/pmndrs/postprocessing/tree/main/manual/assets/js/src/demos/ui.js target=_blank title=Code><div class="icon code"></div></a><a href=/postprocessing/manual/attribution target=_blank title=Attribution><div class="icon info"></div></a></div><div class=tp></div><div class="warning hidden" aria-label=Warning><h4>Warning</h4><p>The following contains flashing imagery that may cause discomfort and/or seizures for those with photosensitive epilepsy.</p><a>Continue</a></div><div class="paused hidden" aria-label=Paused></div><div class="error hidden" aria-label=Error><h4>Error</h4><p></p></div></div><div id=content class=content><div data-pagefind-body><h1 id=user-interface><span>User Interface</span>&nbsp;<a href=/postprocessing/manual/demos/utility/ui/#user-interface data-pagefind-ignore>¶</a></h1><p>UI rendering requires special treatment when combined with postprocessing. There are several approaches to consider.</p><h2 id=depth-aware-ui><span>Depth-Aware UI</span>&nbsp;<a href=/postprocessing/manual/demos/utility/ui/#depth-aware-ui data-pagefind-ignore>¶</a></h2><p>Excluding UI elements, or any other 3D object, from being affected by image effects can be done by using a second <code>GeometryPass</code> with a separate UI scene. By default, the pass will copy the output of the preceding pass to its own output buffer before rendering the UI scene. If the UI pass was configured to use a <code>depthBuffer</code> (<code>true</code> by default), depth will either be reused, if possible, or copied. This allows UI elements to be occluded by other objects. However, there are three problems with this approach:</p><ol><li>Overlay effects such as bloom don&rsquo;t use depth, so they will always be overwritten by the UI elements.</li><li>MSAA is not supported because the image has already been resolved at this point.</li><li>The additional copy operation is fast but not free.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>const</span> <span class=nx>clearPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ClearPass</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>geoPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>GeometryPass</span><span class=p>(</span><span class=nx>scene</span><span class=p>,</span> <span class=nx>camera</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>effectPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EffectPass</span><span class=p>(...,</span> <span class=nx>toneMappingEffect</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>uiPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>GeometryPass</span><span class=p>(</span><span class=nx>uiScene</span><span class=p>,</span> <span class=nx>camera</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>aaPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EffectPass</span><span class=p>(</span><span class=nx>aaEffect</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>pipeline</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>RenderPipeline</span><span class=p>(</span><span class=nx>renderer</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>pipeline</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>clearPass</span><span class=p>,</span> <span class=nx>geoPass</span><span class=p>,</span> <span class=nx>effectPass</span><span class=p>,</span> <span class=nx>uiPass</span><span class=p>,</span> <span class=nx>aaPass</span><span class=p>);</span>
</span></span></code></pre></div><blockquote class="alert alert-note"><div class=alert-heading><div class=alert-icon></div><span>Note</span></div><p>Bloom and similar overlay effects may be applied after the UI elements, but tone mapping must then be applied afterwards to avoid color clipping.</p></blockquote><h2 id=hud-overlay><span>HUD Overlay</span>&nbsp;<a href=/postprocessing/manual/demos/utility/ui/#hud-overlay data-pagefind-ignore>¶</a></h2><h3 id=single-render-pipeline><span>Single Render Pipeline</span>&nbsp;<a href=/postprocessing/manual/demos/utility/ui/#single-render-pipeline data-pagefind-ignore>¶</a></h3><p>Instead of using a depth-aware <code>GeometryPass</code>, the UI elements can be rendered directly on top of the output buffer of a preceding fullscreen pass. To do this, the <code>GeometryPass</code> must be instantiated without a <code>depthBuffer</code> and its <code>output.defaultBuffer</code> must be set to the <code>output.defaultBuffer</code> of the preceding pass. The result then needs to be rendered to screen with a final <code>CopyPass</code> or <code>EffectPass</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>const</span> <span class=nx>clearPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ClearPass</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>geoPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>GeometryPass</span><span class=p>(</span><span class=nx>scene</span><span class=p>,</span> <span class=nx>camera</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>effectPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EffectPass</span><span class=p>(...,</span> <span class=nx>toneMappingEffect</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>uiPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>GeometryPass</span><span class=p>(</span><span class=nx>uiScene</span><span class=p>,</span> <span class=nx>camera</span><span class=p>,</span> <span class=p>{</span> <span class=nx>depthBuffer</span>: <span class=kt>false</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>uiPass</span><span class=p>.</span><span class=nx>output</span><span class=p>.</span><span class=nx>defaultBuffer</span> <span class=o>=</span> <span class=nx>effectPass</span><span class=p>.</span><span class=nx>output</span><span class=p>.</span><span class=nx>defaultBuffer</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>aaPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EffectPass</span><span class=p>(</span><span class=nx>aaEffect</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>pipeline</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>RenderPipeline</span><span class=p>(</span><span class=nx>renderer</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>pipeline</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>clearPass</span><span class=p>,</span> <span class=nx>geoPass</span><span class=p>,</span> <span class=nx>effectPass</span><span class=p>,</span> <span class=nx>uiPass</span><span class=p>,</span> <span class=nx>aaPass</span><span class=p>);</span>
</span></span></code></pre></div><p>Due to the lack of depth information, MSAA is not supported.</p><h3 id=multiple-render-pipelines><span>Multiple Render Pipelines</span>&nbsp;<a href=/postprocessing/manual/demos/utility/ui/#multiple-render-pipelines data-pagefind-ignore>¶</a></h3><p>UI elements can also be rendered in a separate pipeline with a <code>ClearPass</code> and a <code>GeometryPass</code>. The <code>GeometryPass</code> can make use of MSAA if it has a <code>depthBuffer</code> and the UI scene can be rendered only when needed. The resulting UI output texture can then be integrated into the main pipeline by using a <code>TextureEffect</code>. This approach is not depth-aware between pipelines.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>const</span> <span class=nx>uiClearPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ClearPass</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>uiPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>GeometryPass</span><span class=p>(</span><span class=nx>uiScene</span><span class=p>,</span> <span class=nx>camera</span><span class=p>,</span> <span class=p>{</span> <span class=nx>alpha</span>: <span class=kt>true</span><span class=p>,</span> <span class=nx>samples</span>: <span class=kt>4</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>uiPipeline</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>RenderPipeline</span><span class=p>(</span><span class=nx>renderer</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>uiPipeline</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>uiClearPass</span><span class=p>,</span> <span class=nx>uiPass</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>uiOverlayTexture</span> <span class=o>=</span> <span class=nx>uiPass</span><span class=p>.</span><span class=nx>output</span><span class=p>.</span><span class=nx>defaultBuffer</span><span class=o>?</span><span class=p>.</span><span class=nx>texture</span><span class=o>?</span><span class=p>.</span><span class=nx>value</span> <span class=o>??</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>uiOverlayEffect</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>TextureEffect</span><span class=p>(</span><span class=nx>uiOverlayTexture</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>clearPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ClearPass</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>geoPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>GeometryPass</span><span class=p>(</span><span class=nx>scene</span><span class=p>,</span> <span class=nx>camera</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>effectPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EffectPass</span><span class=p>(...,</span> <span class=nx>uiOverlayEffect</span><span class=p>,</span> <span class=nx>toneMappingEffect</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>aaPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EffectPass</span><span class=p>(</span><span class=nx>aaEffect</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>pipeline</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>RenderPipeline</span><span class=p>(</span><span class=nx>renderer</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>pipeline</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>clearPass</span><span class=p>,</span> <span class=nx>geoPass</span><span class=p>,</span> <span class=nx>effectPass</span><span class=p>,</span> <span class=nx>aaPass</span><span class=p>);</span>
</span></span></code></pre></div></div></div></main></div></div><script>"use strict";(()=>{function e(){let t=document.querySelector(".navigation"),n=localStorage.getItem("expanded-menus"),e=n!==null?JSON.parse(n):null;if(!(t===null||e===null||!Array.isArray(e))){for(let e of t.querySelectorAll(".menu"))e.classList.remove("expanded");if(e.length!==0)try{for(let n of t.querySelectorAll(e.map(e=>`.menu.${e}`).join(",")))n.classList.add("expanded")}catch{localStorage.removeItem("expanded-menus"),window.location.reload()}}}function t(){let e=document.querySelector(".navigation"),t=document.querySelector("main");e!==null&&t!==null&&(e.scrollTop=Number(sessionStorage.getItem("nav-scroll")),t.scrollTop=Number(sessionStorage.getItem("main-scroll")))}e(),t()})()</script></body></html>