<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="map[email:vanruesc@outlook.de name:Raoul van Rüschen]"><meta name=generator content="Hugo 0.152.2"><title>Custom Passes &#183; Post Processing Manual</title><base href=//pmndrs.github.io/postprocessing/manual/><script>"use strict";(()=>{localStorage.getItem("dark-mode")==="enabled"&&document.documentElement.classList.add("dark")})()</script><link rel=stylesheet href=/postprocessing/manual/css/dist/index.65f0f996d638e0fd51d31090c2312af5732104870a43ae77d7310801fea3c909.css integrity="sha256-ZfD5ltY44P1R0xCQwjEq9XMhBIcKQ6531zEIAf6jyQk=" crossorigin=anonymous><script defer src=/postprocessing/manual/js/dist/index.55b8038d8cb75af9e822adde2b9cac5e04837aee89fc579733b407008aa142f7.js integrity="sha256-VbgDjYy3WvnoIq3eK5ysXgSDeu6J/FeXM7QHAIqhQvc=" crossorigin=anonymous></script><script defer src=/postprocessing/manual/js/dist/libs/vendor.a0d935b8b50e2836f7a7e9c569f12a9a428e4e3b4fc4102ddef0103f0de58576.js integrity="sha256-oNk1uLUOKDb3p+nFafEqmkKOTjtPxBAt3vAQPw3lhXY=" crossorigin=anonymous></script></head><body class="preload page single"><div class=frame-content><div><a class=skip-to-content href=/postprocessing/manual/custom-passes/#content>Skip to content</a><div class=sidebar-button-open aria-label="Open navigation menu"></div><div class=sidebar><header class=page-header><div class=page-title><a href=//pmndrs.github.io/postprocessing/manual/>Post Processing Manual</a></div><div class=sidebar-button-close aria-label="Close navigation menu"></div></header><nav class=navigation><div class=search><pagefind-config bundle-path=//pmndrs.github.io/postprocessing/manual/pagefind/ excerpt-length=10></pagefind-config><pagefind-searchbox></pagefind-searchbox></div><ul><li class="menu main active expanded" data-id=main><h2>Start</h2><ul><li class=manual><a href=/postprocessing/manual/><span>Introduction</span></a></li><li class=getting-started><a href=/postprocessing/manual/getting-started/><span>Getting Started</span></a></li><li class="custom-passes active"><a href=/postprocessing/manual/custom-passes/><span>Custom Passes</span></a></li><li class=custom-effects><a href=/postprocessing/manual/custom-effects/><span>Custom Effects</span></a></li><li class=migration-guide><a href=/postprocessing/manual/migration-guide/><span>Migration Guide</span></a></li><li><a href=../docs/ target=_blank><span>API Reference</span></a></li></ul></li><li class="menu community expanded" data-id=community><h2>Community</h2><ul><li class=plugins-tools><a href=/postprocessing/manual/plugins-tools/><span>Plugins and Tools</span></a></li><li><a href=https://github.com/pmndrs/postprocessing/issues target=_blank><span>Issue Tracker</span></a></li><li><a href=https://discord.com/invite/poimandres target=_blank><span>Discord</span></a></li><li><a href=https://github.com/pmndrs/postprocessing/discussions target=_blank><span>Forum</span></a></li></ul></li><li class="menu demos" data-id=demos><h2>Demos</h2><ul><li class="menu anti-aliasing" data-id=anti-aliasing><h3>Anti-Aliasing</h3><div><ul><li class=fxaa><a href=/postprocessing/manual/demos/anti-aliasing/fxaa/><span>FXAA</span></a></li><li class=msaa><a href=/postprocessing/manual/demos/anti-aliasing/msaa/><span>MSAA</span></a></li><li class=smaa><a href=/postprocessing/manual/demos/anti-aliasing/smaa/><span>SMAA</span></a></li></ul></div></li><li class="menu color-grading" data-id=color-grading><h3>Color Grading</h3><div><ul><li class=lut><a href=/postprocessing/manual/demos/color-grading/lut/><span>LUT</span></a></li><li class=tone-mapping><a href=/postprocessing/manual/demos/color-grading/tone-mapping/><span>Tone Mapping</span></a></li></ul></div></li><li class="menu special-effects" data-id=special-effects><h3>Special Effects</h3><div><ul><li class=ascii><a href=/postprocessing/manual/demos/special-effects/ascii/><span>ASCII</span></a></li><li class=color-depth><a href=/postprocessing/manual/demos/special-effects/color-depth/><span>Color Depth</span></a></li><li class=halftone><a href=/postprocessing/manual/demos/special-effects/halftone/><span>Halftone</span></a></li><li class=noise><a href=/postprocessing/manual/demos/special-effects/noise/><span>Noise</span></a></li><li class=scanlines><a href=/postprocessing/manual/demos/special-effects/scanlines/><span>Scanlines</span></a></li><li class=vignette><a href=/postprocessing/manual/demos/special-effects/vignette/><span>Vignette</span></a></li></ul></div></li><li class="menu light-shadow" data-id=light-shadow><h3>Light & Shadow</h3><div><ul><li class=bloom><a href=/postprocessing/manual/demos/light-shadow/bloom/><span>Bloom</span></a></li></ul></div></li><li class="menu utility" data-id=utility><h3>Utility</h3><div><ul><li class=blur><a href=/postprocessing/manual/demos/utility/blur/><span>Blur</span></a></li><li class=depth-picking><a href=/postprocessing/manual/demos/utility/depth-picking/><span>Depth Picking</span></a></li><li class=gbuffer><a href=/postprocessing/manual/demos/utility/gbuffer/><span>Geometry Buffer</span></a></li><li class=lens-distortion><a href=/postprocessing/manual/demos/utility/lens-distortion/><span>Lens Distortion</span></a></li><li class=scissor-viewport><a href=/postprocessing/manual/demos/utility/scissor-viewport/><span>Scissor & Viewport</span></a></li><li class=texture><a href=/postprocessing/manual/demos/utility/texture/><span>Texture</span></a></li><li class=ui><a href=/postprocessing/manual/demos/utility/ui/><span>User Interface</span></a></li></ul></div></li></ul></li></ul></nav><footer class=page-footer><div class=contentinfo><ul><li class=legal><a href=/postprocessing/manual/legal/><span>Legal</span></a></li><li class=privacy><a href=/postprocessing/manual/privacy/><span>Privacy Policy</span></a></li></ul></div><div class=buttons><div class=dark-mode title="Dark mode"></div><a href=https://github.com/pmndrs/postprocessing target=_blank><div class=repository title=Repository></div></a><a href=https://github.com/sponsors/vanruesc target=_blank><div class=support title=Support></div></a></div></footer></div><main id=main class=custom-passes tabindex=-1><div id=content class=content><div data-pagefind-body><h1 id=custom-passes><span>Custom Passes</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#custom-passes data-pagefind-ignore>¶</a></h1><h2 id=introduction><span>Introduction</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#introduction data-pagefind-ignore>¶</a></h2><p>At a closer look, passes can be divided into four groups. The first group consists of passes that render normal scenes like the <code>GeometryPass</code>. The second type doesn&rsquo;t render anything but performs supporting operations like the <code>ClearPass</code> or <code>LambdaPass</code>. Passes that render textures for further use make up the third group. One example would be the <code>LuminancePass</code>. The fourth and most prominent group contains the fullscreen effect passes. If you want to make a pass that belongs to the last group, you should consider <a href=/postprocessing/manual/custom-effects/>creating an Effect</a> instead.</p><p>There are two options for creating custom passes. You can either rely on the general-purpose <code>ShaderPass</code> or extend <code>Pass</code>.</p><h2 id=shaderpass><span>ShaderPass</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#shaderpass data-pagefind-ignore>¶</a></h2><details><summary>TL;DR</summary><p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ShaderMaterial</span><span class=p>,</span> <span class=nx>Uniform</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;three&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ShaderPass</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;postprocessing&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>myShaderMaterial</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ShaderMaterial</span><span class=p>({</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>defines</span><span class=o>:</span> <span class=p>{</span> <span class=nx>SOMETHING</span><span class=o>:</span> <span class=s2>&#34;value&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=nx>uniforms</span><span class=o>:</span> <span class=p>{</span> <span class=nx>tDiffuse</span><span class=o>:</span> <span class=k>new</span> <span class=nx>Uniform</span><span class=p>(</span><span class=kc>null</span><span class=p>)</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=nx>vertexShader</span><span class=o>:</span> <span class=s2>&#34;...&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>fragmentShader</span><span class=o>:</span> <span class=s2>&#34;...&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>myShaderPass</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ShaderPass</span><span class=p>(</span><span class=nx>myShaderMaterial</span><span class=p>,</span> <span class=s2>&#34;tDiffuse&#34;</span><span class=p>);</span>
</span></span></code></pre></div></p></details><p>The <code>ShaderPass</code> expects an instance of <code>ShaderMaterial</code> as its first argument. The second argument specifies the name of the texture sampler uniform of the shader you provide. This name defaults to <code>"inputBuffer"</code> and the <code>ShaderPass</code> binds its <code>input.defaultBuffer</code> to this uniform.</p><p>In order to render a simple <code>ShaderMaterial</code>, you have to pass your shader object (uniforms, defines, fragment and vertex shader code) to <code>ShaderMaterial</code> and then pass that material instance to <code>ShaderPass</code>. Depending on the material you use, you may have to adjust the name of the input texture.</p><h2 id=extending-pass><span>Extending Pass</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#extending-pass data-pagefind-ignore>¶</a></h2><details><summary>TL;DR</summary><p><h5 id=shaderfrag><span>shader.frag</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#shaderfrag data-pagefind-ignore>¶</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-glsl data-lang=glsl><span class=line><span class=cl><span class=cp>#include &lt;pp_default_output_pars_fragment&gt;</span>
</span></span><span class=line><span class=cl><span class=cp>#include &lt;pp_input_buffer_pars_fragment&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>uniform</span> <span class=k>vec3</span> <span class=n>weights</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>in</span> <span class=k>vec2</span> <span class=n>vUv</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=n>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>vec4</span> <span class=n>texel</span> <span class=o>=</span> <span class=n>texture</span><span class=p>(</span><span class=n>inputBuffer</span><span class=p>,</span> <span class=n>vUv</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>out_Color</span> <span class=o>=</span> <span class=k>vec4</span><span class=p>(</span><span class=n>texel</span><span class=p>.</span><span class=n>rgb</span> <span class=o>*</span> <span class=n>weights</span><span class=p>,</span> <span class=n>texel</span><span class=p>.</span><span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h5 id=custommaterialts><span>CustomMaterial.ts</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#custommaterialts data-pagefind-ignore>¶</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ShaderMaterial</span><span class=p>,</span> <span class=nx>Uniform</span><span class=p>,</span> <span class=nx>Vector3</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;three&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>FullscreenMaterial</span><span class=p>,</span> <span class=nx>Uniform</span><span class=p>,</span> <span class=nx>Vector3</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;postprocessing&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Tip: Use a bundler plugin like esbuild-plugin-glsl to import shaders as text.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>fragmentShader</span> <span class=kr>from</span> <span class=s2>&#34;./shader.frag&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>CustomMaterial</span> <span class=kr>extends</span> <span class=nx>FullscreenMaterial</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kr>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=kr>super</span><span class=p>({</span>
</span></span><span class=line><span class=cl>			<span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;LuminanceMaterial&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>			<span class=nx>fragmentShader</span><span class=p>,</span>
</span></span><span class=line><span class=cl>			<span class=nx>uniforms</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nx>weights</span>: <span class=kt>new</span> <span class=nx>Uniform</span><span class=p>(</span><span class=k>new</span> <span class=nx>Vector3</span><span class=p>())</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h5 id=custompassjs><span>CustomPass.js</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#custompassjs data-pagefind-ignore>¶</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Pass</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;postprocessing&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>CustomMaterial</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;./CustomMaterial.js&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>CustomPass</span> <span class=kr>extends</span> <span class=nx>Pass</span><span class=p>&lt;</span><span class=nt>CustomMaterial</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kr>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=kr>super</span><span class=p>(</span><span class=s2>&#34;CustomPass&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=p>.</span><span class=nx>fullscreenMaterial</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>CustomMaterial</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>override</span> <span class=nx>render</span><span class=p>()</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=p>.</span><span class=nx>setRenderTarget</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>output</span><span class=p>.</span><span class=nx>defaultBuffer</span><span class=o>?</span><span class=p>.</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=p>.</span><span class=nx>renderFullscreen</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></p></details><p>By extending <code>Pass</code>, you can decide what happens during resizing, initialization and rendering. There are also several lifecycle hooks that you can take advantage of. Passes in postprocessing receive various input data from the main <code>GeometryPass</code> and the preceding pass in a render pipeline.</p><p>The minimum requirement to create a custom pass is to override the <code>render</code> method. If you&rsquo;re creating a fullscreen effect, you&rsquo;ll need to assign a <code>fullscreenMaterial</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=k>this</span><span class=p>.</span><span class=nx>fullscreenMaterial</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>MyMaterial</span><span class=p>();</span>
</span></span></code></pre></div><blockquote class="alert alert-tip"><div class=alert-heading><div class=alert-icon></div><span>Tip</span></div><p>If your pass uses multiple materials, add them to the <code>materials</code> set so that they can be precompiled. The <code>fullscreenMaterial</code> is added automatically.</p></blockquote><h3 id=resources><span>Resources</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#resources data-pagefind-ignore>¶</a></h3><p>Framebuffers can be created manually or via the <code>createFrambuffer</code> method. All framebuffers should be added to the <code>output</code> buffer resources so that the pipeline can optimize them:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=k>this</span><span class=p>.</span><span class=nx>output</span><span class=p>.</span><span class=nx>setBuffer</span><span class=p>(</span><span class=nx>MyPass</span><span class=p>.</span><span class=nx>BUFFER_ID</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>createFramebuffer</span><span class=p>());</span>
</span></span></code></pre></div><p>A convenience getter can be defined to retrieve the buffer as needed:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>private</span> <span class=kr>get</span> <span class=nx>renderTarget</span><span class=p>()</span><span class=o>:</span> <span class=nx>WebGLRenderTarget</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>output</span><span class=p>.</span><span class=nx>getBuffer</span><span class=p>(</span><span class=nx>MyPass</span><span class=p>.</span><span class=nx>BUFFER_ID</span><span class=p>)</span><span class=o>!</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote class="alert alert-tip"><div class=alert-heading><div class=alert-icon></div><span>Tip</span></div><p>If your pass uses disposable resources that don&rsquo;t fit into the existing <code>input</code> and <code>output</code> resources, add them to the <code>disposables</code> set instead.</p></blockquote><h3 id=g-buffer><span>G-Buffer</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#g-buffer data-pagefind-ignore>¶</a></h3><p>Passes can request <a href>GBuffer</a> components via <code>input.gBuffer</code>. The actual textures will be supplied via <code>input.buffers</code> and can be retrieved by using the <code>GBuffer</code> value as the key. Passes should override the <code>onInputChange</code> hook to fetch and utilize the requested textures.</p><h4 id=g-buffer-packing><span>G-Buffer Packing</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#g-buffer-packing data-pagefind-ignore>¶</a></h4><p>WebGL 2 guarantees that a compatible device supports at least 4 texture attachments per render target. For broad device support, postprocessing stays within this limitation and packs certain combinations of G-Buffer components into a single texture attachment. To be able to unpack this data, special shader macros that control predefined unpacking functions are provided to the requesting passes via input <code>defines</code>. If a pass uses a fullscreen material that extends <code>FullscreenMaterial</code>, these <code>defines</code> will automatically be integrated into the shaders. To finally read the data, the following shader chunks must be included in the fragment shader as needed:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-glsl data-lang=glsl><span class=line><span class=cl><span class=cp>#include &lt;pp_depth_utils_pars_fragment&gt;</span>
</span></span><span class=line><span class=cl><span class=cp>#include &lt;pp_normal_codec_pars_fragment&gt;</span>
</span></span><span class=line><span class=cl><span class=cp>#include &lt;pp_normal_utils_pars_fragment&gt;</span>
</span></span><span class=line><span class=cl><span class=cp>#include &lt;pp_velocity_utils_pars_fragment&gt;</span>
</span></span></code></pre></div><p>This include adds the following utility functions that should be used to read the respective G-Buffer data:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-glsl data-lang=glsl><span class=line><span class=cl><span class=k>float</span> <span class=n>readDepth</span><span class=p>(</span><span class=k>sampler2D</span> <span class=n>depthBuffer</span><span class=p>,</span> <span class=k>vec2</span> <span class=n>uv</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>vec3</span> <span class=n>readNormal</span><span class=p>(</span><span class=k>sampler2D</span> <span class=n>normalBuffer</span><span class=p>,</span> <span class=k>vec2</span> <span class=n>uv</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>vec2</span> <span class=n>readVelocity</span><span class=p>(</span><span class=k>sampler2D</span> <span class=n>velocityBuffer</span><span class=p>,</span> <span class=k>vec2</span> <span class=n>uv</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=lifecycle-hooks><span>Lifecycle Hooks</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#lifecycle-hooks data-pagefind-ignore>¶</a></h3><p>The <code>Pass</code> base class defines lifecycle methods that can be overridden to react to various events:</p><ul><li><code>checkRequirements(): void;</code></li><li><code>onInputChange(): void;</code></li><li><code>onOutputChange(): void;</code></li><li><code>onResolutionChange(): void;</code></li><li><code>onViewportChange(): void;</code></li><li><code>onScissorChange(): void;</code></li><li><code>onSceneChildAdded(): void;</code></li><li><code>onSceneChildRemoved(): void;</code></li></ul><h3 id=fullscreen-passes><span>Fullscreen Passes</span>&nbsp;<a href=/postprocessing/manual/custom-passes/#fullscreen-passes data-pagefind-ignore>¶</a></h3><p>It&rsquo;s recommended to use materials that extend <a href>FullscreenMaterial</a> for passes that perform fullscreen render operations. This base class defines the following uniforms by default and populates them automatically:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-glsl data-lang=glsl><span class=line><span class=cl><span class=k>uniform</span> <span class=n>mat4</span> <span class=n>projectionMatrix</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>uniform</span> <span class=n>mat4</span> <span class=n>projectionMatrixInverse</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>uniform</span> <span class=n>mat4</span> <span class=n>viewMatrix</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>uniform</span> <span class=n>mat4</span> <span class=n>viewMatrixInverse</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>uniform</span> <span class=k>vec3</span> <span class=n>cameraParams</span><span class=p>;</span> <span class=c1>// near, far, aspect</span>
</span></span><span class=line><span class=cl><span class=k>uniform</span> <span class=k>vec4</span> <span class=n>resolution</span><span class=p>;</span> <span class=c1>// screen resolution (xy), texel size (zw)</span>
</span></span><span class=line><span class=cl><span class=k>uniform</span> <span class=k>sampler2D</span> <span class=n>inputBuffer</span><span class=p>;</span>
</span></span></code></pre></div><p>To render a fullscreen material, first set the render target and then use the <code>renderFullscreen</code> method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=nx>override</span> <span class=nx>render</span><span class=p>()</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=nx>setRenderTarget</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>output</span><span class=p>.</span><span class=nx>defaultBuffer</span><span class=o>?</span><span class=p>.</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=nx>renderFullscreen</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></div></div></main></div></div><script>"use strict";(()=>{function e(){let t=document.querySelector(".navigation"),n=localStorage.getItem("expanded-menus"),e=n!==null?JSON.parse(n):null;if(!(t===null||e===null||!Array.isArray(e))){for(let e of t.querySelectorAll(".menu"))e.classList.remove("expanded");if(e.length!==0)try{for(let n of t.querySelectorAll(e.map(e=>`.menu.${e}`).join(",")))n.classList.add("expanded")}catch{localStorage.removeItem("expanded-menus"),window.location.reload()}}}function t(){let e=document.querySelector(".navigation"),t=document.querySelector("main");e!==null&&t!==null&&(e.scrollTop=Number(sessionStorage.getItem("nav-scroll")),t.scrollTop=Number(sessionStorage.getItem("main-scroll")))}e(),t()})()</script></body></html>